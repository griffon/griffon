<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="generator" content="Asciidoctor 0.1.4">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Griffon Guide</title>
<style>
@import url(http://fonts.googleapis.com/css?family=Open+Sans:400,600);
@import url(http://fonts.googleapis.com/css?family=Source+Code+Pro:500,700);

/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary {
    display: block;
}

audio, canvas, video {
    display: inline-block;
}

audio:not([controls]) {
    display: none;
    height: 0;
}

[hidden] {
    display: none;
}

script {
    display: none !important;
}

html {
    background: #fff;
    color: #000;
    font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
    -ms-text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%;
}

body {
    margin: 0;
}

a {
    background: transparent;
}

a:focus {
    outline: thin dotted;
}

a:active, a:hover {
    outline: 0;
}

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

abbr[title] {
    border-bottom: 1px dotted;
}

b, strong {
    font-weight: bold;
}

dfn {
    font-style: italic;
}

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

mark {
    background: #ff0;
    color: #000;
}

code, kbd, pre, samp {
    font-family: 'Source Code Pro', monospace, serif;
    font-size: 1em;
}

pre {
    white-space: pre-wrap;
}

q {
    quotes: "\201C" "\201D" "\2018" "\2019";
}

small {
    font-size: 80%;
}

sub, sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

img {
    border: 0;
}

svg:not(:root) {
    overflow: hidden;
}

figure {
    margin: 0;
}

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

legend {
    border: 0;
    padding: 0;
}

button, input, select, textarea {
    font-family: inherit;
    font-size: 100%;
    margin: 0;
}

button, input {
    line-height: normal;
}

button, select {
    text-transform: none;
}

button, html input[type="button"], input[type="reset"], input[type="submit"] {
    -webkit-appearance: button;
    cursor: pointer;
}

button[disabled], html input[disabled] {
    cursor: default;
}

input[type="checkbox"], input[type="radio"] {
    box-sizing: border-box;
    padding: 0;
}

input[type="search"] {
    -webkit-appearance: textfield;
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box;
    box-sizing: content-box;
}

input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

button::-moz-focus-inner, input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

textarea {
    overflow: auto;
    vertical-align: top;
}

table {
    border-collapse: collapse;
    border-spacing: 0;
}

*, *:before, *:after {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
}

html, body {
    font-size: 100%;
}

body {
    background: white;
    color: #222222;
    padding: 0;
    margin: 0;
    font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-weight: normal;
    font-style: normal;
    line-height: 1;
    position: relative;
    cursor: auto;
}

a:hover {
    cursor: pointer;
}

a:focus {
    outline: none;
}

img, object, embed {
    max-width: 100%;
    height: auto;
}

object, embed {
    height: 100%;
}

img {
    -ms-interpolation-mode: bicubic;
}

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object {
    max-width: none !important;
}

.left {
    float: left !important;
}

.right {
    float: right !important;
}

.text-left {
    text-align: left !important;
}

.text-right {
    text-align: right !important;
}

.text-center {
    text-align: center !important;
}

.text-justify {
    text-align: justify !important;
}

.hide {
    display: none;
}

.antialiased, body {
    -webkit-font-smoothing: antialiased;
}

img {
    display: inline-block;
    vertical-align: middle;
}

textarea {
    height: auto;
    min-height: 50px;
}

select {
    width: 100%;
}

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p {
    font-size: 1.21875em;
    line-height: 1.6;
}

.subheader, #content #toctitle, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title, .tableblock > caption {
    line-height: 1.4;
    color: #7a2518;
    font-weight: 300;
    margin-top: 0.2em;
    margin-bottom: 0.5em;
}

div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td {
    margin: 0;
    padding: 0;
    direction: ltr;
}

a {
    color: #005498;
    text-decoration: underline;
    line-height: inherit;
}

a:hover, a:focus {
    color: #00467f;
}

a img {
    border: none;
}

p {
    font-family: inherit;
    font-weight: normal;
    font-size: 1em;
    line-height: 1.6;
    margin-bottom: 1.25em;
    text-rendering: optimizeLegibility;
}

p aside {
    font-size: 0.875em;
    line-height: 1.35;
    font-style: italic;
}

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 {
    font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-weight: normal;
    font-style: normal;
    color: #222;
    text-rendering: optimizeLegibility;
    margin-top: 1em;
    margin-bottom: 0.5em;
    line-height: 1.2125em;
}

h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small {
    font-size: 60%;
    color: #e99b8f;
    line-height: 0;
}

h1 {
    font-size: 2.125em;
}

h2 {
    font-size: 1.6875em;
    font-weight: bold;
}

h3, #toctitle, .sidebarblock > .content > .title {
    font-size: 1.375em;
    font-weight: bold;
}

h4 {
    font-size: 1.125em;
    font-weight: bold;
}

h5 {
    font-size: 1.125em;
    font-weight: bold;
}

h6 {
    font-size: 1em;
}

hr {
    border: solid #dddddd;
    border-width: 1px 0 0;
    clear: both;
    margin: 1.25em 0 1.1875em;
    height: 0;
}

em, i {
    font-style: italic;
    line-height: inherit;
}

strong, b {
    font-weight: bold;
    line-height: inherit;
}

small {
    font-size: 60%;
    line-height: inherit;
}

code {
    font-family: 'Source Code Pro', Consolas, "Liberation Mono", Courier, monospace;
    font-weight: normal;
    color: #6d180b;
    font-size: 85%;
}

ul, ol, dl {
    font-size: 1em;
    line-height: 1.6;
    margin-bottom: 1.25em;
    list-style-position: outside;
    font-family: inherit;
}

ul, ol {
    margin-left: 1.5em;
}

ul li ul, ul li ol {
    margin-left: 1.25em;
    margin-bottom: 0;
    font-size: 1em;
}

ul.square li ul, ul.circle li ul, ul.disc li ul {
    list-style: inherit;
}

ul.square {
    list-style-type: square;
}

ul.circle {
    list-style-type: circle;
}

ul.disc {
    list-style-type: disc;
}

ul.no-bullet {
    list-style: none;
}

ol li ul, ol li ol {
    margin-left: 1.25em;
    margin-bottom: 0;
}

dl dt {
    margin-bottom: 0.3125em;
    font-weight: bold;
}

dl dd {
    margin-bottom: 1.25em;
}

abbr, acronym {
    text-transform: uppercase;
    font-size: 90%;
    color: #222222;
    border-bottom: 1px dotted #dddddd;
    cursor: help;
}

abbr {
    text-transform: none;
}

blockquote {
    margin: 0 0 1.25em;
    padding: 0.5625em 1.25em 0 1.1875em;
    border-left: 1px solid #dddddd;
}

blockquote cite {
    display: block;
    font-size: inherit;
    color: #555555;
}

blockquote cite:before {
    content: "\2014 \0020";
}

blockquote cite a, blockquote cite a:visited {
    color: #555555;
}

blockquote, blockquote p {
    line-height: 1.6;
    color: #6f6f6f;
}

.vcard {
    display: inline-block;
    margin: 0 0 1.25em 0;
    border: 1px solid #dddddd;
    padding: 0.625em 0.75em;
}

.vcard li {
    margin: 0;
    display: block;
}

.vcard .fn {
    font-weight: bold;
    font-size: 0.9375em;
}

.vevent .summary {
    font-weight: bold;
}

.vevent abbr {
    cursor: auto;
    text-decoration: none;
    font-weight: bold;
    border: none;
    padding: 0 0.0625em;
}

@media only screen and (min-width: 768px) {
    h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 {
        line-height: 1.4;
    }

    h1 {
        font-size: 2.75em;
    }

    h2 {
        font-size: 2.3125em;
        font-weight: bold;
    }

    h3, #toctitle, .sidebarblock > .content > .title {
        font-size: 1.6875em;
        font-weight: bold;
    }

    h4 {
        font-size: 1.4375em;
        font-weight: bold;
    }

    h5 {
        font-size: 1.3em;
        font-weight: bold;
    }
}

.print-only {
    display: none !important;
}

@media print {
    * {
        background: transparent !important;
        color: #000 !important;
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a, a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after {
        content: "";
    }

    pre, blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group;
    }

    tr, img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p, h2, h3, #toctitle, .sidebarblock > .content > .title {
        orphans: 3;
        widows: 3;
    }

    h2, h3, #toctitle, .sidebarblock > .content > .title {
        page-break-after: avoid;
    }

    .hide-on-print {
        display: none !important;
    }

    .print-only {
        display: block !important;
    }

    .hide-for-print {
        display: none !important;
    }

    .show-for-print {
        display: inherit !important;
    }
}

table {
    background: white;
    margin-bottom: 1.25em;
    border: solid 1px #dddddd;
}

table thead, table tfoot {
    background: whitesmoke;
    font-weight: bold;
}

table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td {
    padding: 0.5em 0.625em 0.625em;
    font-size: inherit;
    color: #222222;
    text-align: left;
}

table tr th, table tr td {
    padding: 0.5625em 0.625em;
    font-size: inherit;
    color: #222222;
}

table tr.even, table tr.alt, table tr:nth-of-type(even) {
    background: #f9f9f9;
}

table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td {
    display: table-cell;
    line-height: 1.6;
}

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after {
    content: " ";
    display: table;
}

.clearfix:after, .float-group:after {
    clear: both;
}

*:not(pre) > code {
    font-size: 0.9375em;
    padding: 1px 3px 0;
    white-space: nowrap;
    background-color: #f2f2f2;
    border: 1px solid #cccccc;
    -webkit-border-radius: 4px;
    border-radius: 4px;
    text-shadow: none;
}

pre, pre > code {
    line-height: 1.4;
    color: inherit;
    font-family: 'Source Code Pro', Consolas, "Liberation Mono", Courier, monospace;
    font-weight: normal;
}

kbd.keyseq {
    color: #555555;
}

kbd:not(.keyseq) {
    display: inline-block;
    color: #222222;
    font-size: 0.75em;
    line-height: 1.4;
    background-color: #F7F7F7;
    border: 1px solid #ccc;
    -webkit-border-radius: 3px;
    border-radius: 3px;
    -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset;
    box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset;
    margin: -0.15em 0.15em 0 0.15em;
    padding: 0.2em 0.6em 0.2em 0.5em;
    vertical-align: middle;
    white-space: nowrap;
}

.keyseq kbd:first-child {
    margin-left: 0;
}

.keyseq kbd:last-child {
    margin-right: 0;
}

.menuseq, .menu {
    color: #090909;
}

p a > code:hover {
    color: #561309;
}

#header, #content, #footnotes, #footer {
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    margin-top: 0;
    margin-bottom: 0;
    max-width: 62.5em;
    *zoom: 1;
    position: relative;
    padding-left: 0.9375em;
    padding-right: 0.9375em;
}

#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after {
    content: " ";
    display: table;
}

#header:after, #content:after, #footnotes:after, #footer:after {
    clear: both;
}

#header {
    margin-bottom: 2.5em;
}

#header > h1 {
    color: black;
    font-weight: normal;
    border-bottom: 1px solid #dddddd;
    margin-bottom: -28px;
    padding-bottom: 32px;
}

#header span {
    color: #6f6f6f;
}

#header #revnumber {
    text-transform: capitalize;
}

#header br {
    display: none;
}

#header br + span {
    padding-left: 3px;
}

#header br + span:before {
    content: "\2013 \0020";
}

#header br + span.author {
    padding-left: 0;
}

#header br + span.author:before {
    content: ", ";
}

#toc {
    border-bottom: 3px double #ebebeb;
    padding-bottom: 1.25em;
}

#toc > ul {
    margin-left: 0.25em;
}

#toc ul.sectlevel0 > li > a {
    font-style: italic;
}

#toc ul.sectlevel0 ul.sectlevel1 {
    margin-left: 0;
    margin-top: 0.5em;
    margin-bottom: 0.5em;
}

#toc ul {
    list-style-type: none;
}

#toctitle {
    color: #7a2518;
}

@media only screen and (min-width: 1280px) {
    body.toc2 {
        padding-left: 20em;
    }

    #toc.toc2 {
        position: fixed;
        width: 20em;
        left: 0;
        top: 0;
        border-right: 1px solid #ebebeb;
        border-bottom: 0;
        z-index: 1000;
        padding: 1em;
        height: 100%;
        overflow: auto;
    }

    #toc.toc2 #toctitle {
        margin-top: 0;
    }

    #toc.toc2 > ul {
        font-size: .95em;
    }

    #toc.toc2 ul ul {
        margin-left: 0;
        padding-left: 1.25em;
    }

    #toc.toc2 ul.sectlevel0 ul.sectlevel1 {
        padding-left: 0;
        margin-top: 0.5em;
        margin-bottom: 0.5em;
    }

    body.toc2.toc-right {
        padding-left: 0;
        padding-right: 20em;
    }

    body.toc2.toc-right #toc.toc2 {
        border-right: 0;
        border-left: 1px solid #ebebeb;
        left: auto;
        right: 0;
    }
}

#content #toc {
    border-style: solid;
    border-width: 1px;
    border-color: #d9d9d9;
    margin-bottom: 1.25em;
    padding: 1.25em;
    background: #f2f2f2;
    border-width: 0;
    -webkit-border-radius: 4px;
    border-radius: 4px;
}

#content #toc > :first-child {
    margin-top: 0;
}

#content #toc > :last-child {
    margin-bottom: 0;
}

#content #toc a {
    text-decoration: none;
}

#content #toctitle {
    font-weight: bold;
    font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif;
    font-size: 1em;
    padding-left: 0.125em;
}

#footer {
    max-width: 100%;
    background-color: #222222;
    padding: 1.25em;
}

#footer-text {
    color: #dddddd;
    line-height: 1.44;
}

.sect1 {
    padding-bottom: 1.25em;
}

.sect1 + .sect1 {
    border-top: 3px double #ebebeb;
}

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor {
    position: absolute;
    width: 1em;
    margin-left: -1em;
    display: block;
    text-decoration: none;
    visibility: hidden;
    text-align: center;
    font-weight: normal;
}

#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before {
    content: '\00A7';
    font-size: .85em;
    vertical-align: text-top;
    display: block;
    margin-top: 0.05em;
}

#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover {
    visibility: visible;
}

#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link {
    color: #ba3925;
    text-decoration: none;
}

#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover {
    color: #a53221;
}

.imageblock, .literalblock, .listingblock, .verseblock, .videoblock {
    margin-bottom: 1.25em;
}

.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title {
    text-align: left;
    font-weight: bold;
}

.tableblock > caption {
    text-align: left;
    font-weight: bold;
    white-space: nowrap;
    overflow: visible;
    max-width: 0;
}

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p {
    font-size: inherit;
}

.admonitionblock > table {
    border: 0;
    background: none;
    width: 100%;
}

.admonitionblock > table td.icon {
    text-align: center;
    width: 80px;
}

.admonitionblock > table td.icon img {
    max-width: none;
}

.admonitionblock > table td.icon .title {
    font-weight: bold;
    text-transform: uppercase;
}

.admonitionblock > table td.content {
    padding-left: 1.125em;
    padding-right: 1.25em;
    border-left: 1px solid #dddddd;
    color: #6f6f6f;
}

.admonitionblock > table td.content > :last-child > :last-child {
    margin-bottom: 0;
}

.exampleblock > .content {
    border-style: solid;
    border-width: 1px;
    border-color: #e6e6e6;
    margin-bottom: 1.25em;
    padding: 1.25em;
    background: white;
    -webkit-border-radius: 4px;
    border-radius: 4px;
}

.exampleblock > .content > :first-child {
    margin-top: 0;
}

.exampleblock > .content > :last-child {
    margin-bottom: 0;
}

.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p {
    color: #333333;
}

.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 {
    line-height: 1;
    margin-bottom: 0.625em;
}

.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader {
    line-height: 1.4;
}

.exampleblock.result > .content {
    -webkit-box-shadow: 0 1px 8px #d9d9d9;
    box-shadow: 0 1px 8px #d9d9d9;
}

.sidebarblock {
    border-style: solid;
    border-width: 1px;
    border-color: #d9d9d9;
    margin-bottom: 1.25em;
    padding: 1.25em;
    background: #f2f2f2;
    -webkit-border-radius: 4px;
    border-radius: 4px;
}

.sidebarblock > :first-child {
    margin-top: 0;
}

.sidebarblock > :last-child {
    margin-bottom: 0;
}

.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p {
    color: #333333;
}

.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 {
    line-height: 1;
    margin-bottom: 0.625em;
}

.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader {
    line-height: 1.4;
}

.sidebarblock > .content > .title {
    color: #7a2518;
    margin-top: 0;
    line-height: 1.6;
}

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child {
    margin-bottom: 0;
}

.literalblock > .content pre, .listingblock > .content pre {
    background: none;
    border-width: 1px 0;
    border-style: dotted;
    border-color: #bfbfbf;
    -webkit-border-radius: 4px;
    border-radius: 4px;
    padding: 0.75em 0.75em 0.5em 0.75em;
    word-wrap: break-word;
}

.literalblock > .content pre.nowrap, .listingblock > .content pre.nowrap {
    overflow-x: auto;
    white-space: pre;
    word-wrap: normal;
}

.literalblock > .content pre > code, .listingblock > .content pre > code {
    display: block;
}

@media only screen {
    .literalblock > .content pre, .listingblock > .content pre {
        font-size: 0.8em;
    }
}

@media only screen and (min-width: 768px) {
    .literalblock > .content pre, .listingblock > .content pre {
        font-size: 0.9em;
    }
}

@media only screen and (min-width: 1280px) {
    .literalblock > .content pre, .listingblock > .content pre {
        font-size: 1em;
    }
}

.listingblock pre.highlight {
    padding: 0;
}

.listingblock pre.highlight > code {
    padding: 0.75em 0.75em 0.5em 0.75em;
}

.listingblock > .content {
    position: relative;
}

.listingblock:hover code[class*=" language-"]:before {
    text-transform: uppercase;
    font-size: 0.9em;
    color: #999;
    position: absolute;
    top: 0.375em;
    right: 0.375em;
}

.listingblock:hover code.asciidoc:before {
    content: "asciidoc";
}

.listingblock:hover code.clojure:before {
    content: "clojure";
}

.listingblock:hover code.css:before {
    content: "css";
}

.listingblock:hover code.groovy:before {
    content: "groovy";
}

.listingblock:hover code.html:before {
    content: "html";
}

.listingblock:hover code.java:before {
    content: "java";
}

.listingblock:hover code.javascript:before {
    content: "javascript";
}

.listingblock:hover code.python:before {
    content: "python";
}

.listingblock:hover code.ruby:before {
    content: "ruby";
}

.listingblock:hover code.scss:before {
    content: "scss";
}

.listingblock:hover code.xml:before {
    content: "xml";
}

.listingblock:hover code.yaml:before {
    content: "yaml";
}

.listingblock.terminal pre .command:before {
    content: attr(data-prompt);
    padding-right: 0.5em;
    color: #999;
}

.listingblock.terminal pre .command:not([data-prompt]):before {
    content: '$';
}

table.pyhltable {
    border: 0;
    margin-bottom: 0;
}

table.pyhltable td {
    vertical-align: top;
    padding-top: 0;
    padding-bottom: 0;
}

table.pyhltable td.code {
    padding-left: .75em;
    padding-right: 0;
}

.highlight.pygments .lineno, table.pyhltable td:not(.code) {
    color: #999;
    padding-left: 0;
    padding-right: .5em;
    border-right: 1px solid #dddddd;
}

.highlight.pygments .lineno {
    display: inline-block;
    margin-right: .25em;
}

table.pyhltable .linenodiv {
    background-color: transparent !important;
    padding-right: 0 !important;
}

.quoteblock {
    margin: 0 0 1.25em;
    padding: 0.5625em 1.25em 0 1.1875em;
    border-left: 1px solid #dddddd;
}

.quoteblock blockquote {
    margin: 0 0 1.25em 0;
    padding: 0 0 0.5625em 0;
    border: 0;
}

.quoteblock blockquote > .paragraph:last-child p {
    margin-bottom: 0;
}

.quoteblock .attribution {
    margin-top: -.25em;
    padding-bottom: 0.5625em;
    font-size: inherit;
    color: #555555;
}

.quoteblock .attribution br {
    display: none;
}

.quoteblock .attribution cite {
    display: block;
    margin-bottom: 0.625em;
}

table thead th, table tfoot th {
    font-weight: bold;
}

table.tableblock.grid-all {
    border-collapse: separate;
    border-spacing: 1px;
    -webkit-border-radius: 4px;
    border-radius: 4px;
    border-top: 1px solid #dddddd;
    border-bottom: 1px solid #dddddd;
}

table.tableblock.frame-topbot, table.tableblock.frame-none {
    border-left: 0;
    border-right: 0;
}

table.tableblock.frame-sides, table.tableblock.frame-none {
    border-top: 0;
    border-bottom: 0;
}

table.tableblock td .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child {
    margin-bottom: 0;
}

th.tableblock.halign-left, td.tableblock.halign-left {
    text-align: left;
}

th.tableblock.halign-right, td.tableblock.halign-right {
    text-align: right;
}

th.tableblock.halign-center, td.tableblock.halign-center {
    text-align: center;
}

th.tableblock.valign-top, td.tableblock.valign-top {
    vertical-align: top;
}

th.tableblock.valign-bottom, td.tableblock.valign-bottom {
    vertical-align: bottom;
}

th.tableblock.valign-middle, td.tableblock.valign-middle {
    vertical-align: middle;
}

tbody tr th {
    display: table-cell;
    line-height: 1.6;
    background: whitesmoke;
}

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p {
    color: #222222;
    font-weight: bold;
}

td > div.verse {
    white-space: pre;
}

ol {
    margin-left: 1.75em;
}

ul li ol {
    margin-left: 1.5em;
}

dl dd {
    margin-left: 1.125em;
}

dl dd:last-child, dl dd:last-child > :last-child {
    margin-bottom: 0;
}

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist {
    margin-bottom: 0.625em;
}

ul.unstyled, ol.unnumbered, ul.checklist, ul.none {
    list-style-type: none;
}

ul.unstyled, ol.unnumbered, ul.checklist {
    margin-left: 0.625em;
}

ul.checklist li > p:first-child > i[class^="icon-check"]:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child {
    margin-right: 0.25em;
}

ul.checklist li > p:first-child > input[type="checkbox"]:first-child {
    position: relative;
    top: 1px;
}

ul.inline {
    margin: 0 auto 0.625em auto;
    margin-left: -1.375em;
    margin-right: 0;
    padding: 0;
    list-style: none;
    overflow: hidden;
}

ul.inline > li {
    list-style: none;
    float: left;
    margin-left: 1.375em;
    display: block;
}

ul.inline > li > * {
    display: block;
}

.unstyled dl dt {
    font-weight: normal;
    font-style: normal;
}

ol.arabic {
    list-style-type: decimal;
}

ol.decimal {
    list-style-type: decimal-leading-zero;
}

ol.loweralpha {
    list-style-type: lower-alpha;
}

ol.upperalpha {
    list-style-type: upper-alpha;
}

ol.lowerroman {
    list-style-type: lower-roman;
}

ol.upperroman {
    list-style-type: upper-roman;
}

ol.lowergreek {
    list-style-type: lower-greek;
}

.hdlist > table, .colist > table {
    border: 0;
    background: none;
}

.hdlist > table > tbody > tr, .colist > table > tbody > tr {
    background: none;
}

td.hdlist1 {
    padding-right: .8em;
    font-weight: bold;
}

td.hdlist1, td.hdlist2 {
    vertical-align: top;
}

.literalblock + .colist, .listingblock + .colist {
    margin-top: -0.5em;
}

.colist > table tr > td:first-of-type {
    padding: 0 .8em;
    line-height: 1;
}

.colist > table tr > td:last-of-type {
    padding: 0.25em 0;
}

.qanda > ol > li > p > em:only-child {
    color: #00467f;
}

.thumb, .th {
    line-height: 0;
    display: inline-block;
    border: solid 4px white;
    -webkit-box-shadow: 0 0 0 1px #dddddd;
    box-shadow: 0 0 0 1px #dddddd;
}

.imageblock.left, .imageblock[style*="float: left"] {
    margin: 0.25em 0.625em 1.25em 0;
}

.imageblock.right, .imageblock[style*="float: right"] {
    margin: 0.25em 0 1.25em 0.625em;
}

.imageblock > .title {
    margin-bottom: 0;
}

.imageblock.thumb, .imageblock.th {
    border-width: 6px;
}

.imageblock.thumb > .title, .imageblock.th > .title {
    padding: 0 0.125em;
}

.image.left, .image.right {
    margin-top: 0.25em;
    margin-bottom: 0.25em;
    display: inline-block;
    line-height: 0;
}

.image.left {
    margin-right: 0.625em;
}

.image.right {
    margin-left: 0.625em;
}

a.image {
    text-decoration: none;
}

span.footnote, span.footnoteref {
    vertical-align: super;
    font-size: 0.875em;
}

span.footnote a, span.footnoteref a {
    text-decoration: none;
}

#footnotes {
    padding-top: 0.75em;
    padding-bottom: 0.75em;
    margin-bottom: 0.625em;
}

#footnotes hr {
    width: 20%;
    min-width: 6.25em;
    margin: -.25em 0 .75em 0;
    border-width: 1px 0 0 0;
}

#footnotes .footnote {
    padding: 0 0.375em;
    line-height: 1.3;
    font-size: 0.875em;
    margin-left: 1.2em;
    text-indent: -1.2em;
    margin-bottom: .2em;
}

#footnotes .footnote a:first-of-type {
    font-weight: bold;
    text-decoration: none;
}

#footnotes .footnote:last-of-type {
    margin-bottom: 0;
}

#content #footnotes {
    margin-top: -0.625em;
    margin-bottom: 0;
    padding: 0.75em 0;
}

.gist .file-data > table {
    border: none;
    background: #fff;
    width: 100%;
    margin-bottom: 0;
}

.gist .file-data > table td.line-data {
    width: 99%;
}

div.unbreakable {
    page-break-inside: avoid;
}

.big {
    font-size: larger;
}

.small {
    font-size: smaller;
}

.underline {
    text-decoration: underline;
}

.overline {
    text-decoration: overline;
}

.line-through {
    text-decoration: line-through;
}

.aqua {
    color: #00bfbf;
}

.aqua-background {
    background-color: #00fafa;
}

.black {
    color: black;
}

.black-background {
    background-color: black;
}

.blue {
    color: #0000bf;
}

.blue-background {
    background-color: #0000fa;
}

.fuchsia {
    color: #bf00bf;
}

.fuchsia-background {
    background-color: #fa00fa;
}

.gray {
    color: #606060;
}

.gray-background {
    background-color: #7d7d7d;
}

.green {
    color: #006000;
}

.green-background {
    background-color: #007d00;
}

.lime {
    color: #00bf00;
}

.lime-background {
    background-color: #00fa00;
}

.maroon {
    color: #600000;
}

.maroon-background {
    background-color: #7d0000;
}

.navy {
    color: #000060;
}

.navy-background {
    background-color: #00007d;
}

.olive {
    color: #606000;
}

.olive-background {
    background-color: #7d7d00;
}

.purple {
    color: #600060;
}

.purple-background {
    background-color: #7d007d;
}

.red {
    color: #bf0000;
}

.red-background {
    background-color: #fa0000;
}

.silver {
    color: #909090;
}

.silver-background {
    background-color: #bcbcbc;
}

.teal {
    color: #006060;
}

.teal-background {
    background-color: #007d7d;
}

.white {
    color: #bfbfbf;
}

.white-background {
    background-color: #fafafa;
}

.yellow {
    color: #bfbf00;
}

.yellow-background {
    background-color: #fafa00;
}

span.icon > [class^="icon-"], span.icon > [class*=" icon-"] {
    cursor: default;
}

.admonitionblock td.icon [class^="icon-"]:before {
    font-size: 2.5em;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    cursor: default;
}

.admonitionblock td.icon .icon-note:before {
    content: "\f05a";
    color: #4298b8;
}

.admonitionblock td.icon .icon-tip:before {
    content: "\f0eb";
    text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8);
    color: #ffe400;
}

.admonitionblock td.icon .icon-warning:before {
    content: "\f071";
    color: #ff8c00;
}

.admonitionblock td.icon .icon-caution:before {
    content: "\f06d";
    color: #db4800;
}

.admonitionblock td.icon .icon-important:before {
    content: "\f06a";
    color: #db4800;
}

.conum {
    display: inline-block;
    color: white !important;
    background-color: #222222;
    -webkit-border-radius: 100px;
    border-radius: 100px;
    text-align: center;
    width: 20px;
    height: 20px;
    font-size: 12px;
    font-weight: bold;
    line-height: 20px;
    font-family: Arial, sans-serif;
    font-style: normal;
    position: relative;
    top: -2px;
    letter-spacing: -1px;
}

.conum * {
    color: white !important;
}

.conum + b {
    display: none;
}

.conum:after {
    content: attr(data-value);
}

.conum:not([data-value]):empty {
    display: none;
}

#toc.toc2 {
    background: #ededed;
}

.literalblock > .content > pre, .listingblock > .content > pre {
    -webkit-border-radius: 0;
    border-radius: 0;
}
</style>
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.min.css">
<style>
/* Foundation stylesheet for CodeRay (to match GitHub theme) | MIT License | http://foundation.zurb.com */
table.CodeRay { border-collapse: collapse; padding: 2px; margin-bottom: 0; border: 0; background: transparent; }
table.CodeRay td { padding: 0 .5em; vertical-align: top; }
table.CodeRay td.line-numbers { text-align: right; color: #999; border-right: 1px solid #e5e5e5; padding-left: 0; }
span.line-numbers { border-right: 1px solid #E5E5E5; color: #999; display: inline-block; margin-right: 0.5em; padding-right: 0.5em; }
.CodeRay td.line-numbers strong, .CodeRay span.line-numbers strong { font-weight: normal; }
.CodeRay .debug { color: white !important; background: blue !important; }
.CodeRay .annotation { color: #007; }
.CodeRay .attribute-name { color: #f08; }
.CodeRay .attribute-value { color: #700; }
.CodeRay .binary { color: #509; }
.CodeRay .comment  { color: #999; font-style: italic; }
.CodeRay .char { color: #04D; }
.CodeRay .char .content { color: #04D; }
.CodeRay .char .delimiter { color: #039; }
.CodeRay .class { color: #458; }
.CodeRay .complex { color: #A08; }
.CodeRay .constant { color: teal; }
.CodeRay .color { color: #0A0; }
.CodeRay .class-variable { color: #369; }
.CodeRay .decorator { color: #B0B; }
.CodeRay .definition { color: #099; }
.CodeRay .directive { color: #088; }
.CodeRay .delimiter { color: black; }
.CodeRay .doc { color: #970; }
.CodeRay .doctype { color: #34b; }
.CodeRay .doc-string { color: #D42; }
.CodeRay .escape  { color: #666; }
.CodeRay .entity { color: #800; }
.CodeRay .error { color: #808; }
.CodeRay .exception { color: #C00; }
.CodeRay .filename { color: #099; }
.CodeRay .function { color: #900; }
.CodeRay .global-variable { color: teal; }
.CodeRay .hex { color: #058; }
.CodeRay .integer  { color: #099; }
.CodeRay .include { color: #B44; }
.CodeRay .inline { color: black; }
.CodeRay .inline .inline { background: #ccc; }
.CodeRay .inline .inline .inline { background: #bbb; }
.CodeRay .inline .inline-delimiter { color: #D14; }
.CodeRay .inline-delimiter { color: #D14; }
.CodeRay .important { color: #f00; }
.CodeRay .interpreted { color: #B2B; }
.CodeRay .instance-variable { color: teal; }
.CodeRay .label { color: #970; }
.CodeRay .local-variable { color: #963; }
.CodeRay .octal { color: #40E; }
.CodeRay .predefined { color: #369; }
.CodeRay .preprocessor { color: #579; }
.CodeRay .pseudo-class { color: #00C; }
.CodeRay .predefined-type { color: #074; }
.CodeRay .reserved, .keyword  { color: #000; }
.CodeRay .key { color: #808; }
.CodeRay .key .delimiter { color: #606; }
.CodeRay .key .char { color: #80f; }
.CodeRay .value { color: #088; }
.CodeRay .regexp { background-color: #fff0ff; }
.CodeRay .regexp .content { color: #808; }
.CodeRay .regexp .delimiter { color: #404; }
.CodeRay .regexp .modifier { color: #C2C; }
.CodeRay .regexp .function  { color: #404; font-weight: bold; }
.CodeRay .string { color: #D20; }
.CodeRay .string .string { }
.CodeRay .string .string .string { background-color: #ffd0d0; }
.CodeRay .string .content { color: #D14; }
.CodeRay .string .char { color: #D14; }
.CodeRay .string .delimiter { color: #D14; }
.CodeRay .shell { color: #D14; }
.CodeRay .shell .content { }
.CodeRay .shell .delimiter { color: #D14; }
.CodeRay .symbol { color: #990073; }
.CodeRay .symbol .content { color: #A60; }
.CodeRay .symbol .delimiter { color: #630; }
.CodeRay .tag, .CodeRay .attribute-name { color: #070; }
.CodeRay .tag-special { color: #D70; }
.CodeRay .type { color: #339; }
.CodeRay .variable  { color: #036; }
.CodeRay .insert { background: #afa; }
.CodeRay .delete { background: #faa; }
.CodeRay .change { color: #aaf; background: #007; }
.CodeRay .head { color: #f8f; background: #505; }
.CodeRay .insert .insert { color: #080; }
.CodeRay .delete .delete { color: #800; }
.CodeRay .change .change { color: #66f; }
.CodeRay .head .head { color: #f4f; }

</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>The Griffon Guide</h1>
<span id="author" class="author">Andres Almiray</span><br>
<span id="revnumber">version 2.0.0.BETA2</span>
<br><span id="revremark">The Desktop/Embedded application framework for the JVM</span>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_credits_and_acknowledgements">Credits and Acknowledgements</a></li>
</ul>
</li>
<li><a href="#_getting_started">2. Getting Started</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_getting_started_environment_setup">2.1. Environment Setup</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_jdk">2.1.1. JDK</a></li>
<li><a href="#_gradle">2.1.2. Gradle</a></li>
<li><a href="#_maven">2.1.3. Maven</a></li>
<li><a href="#_ides">2.1.4. IDEs</a></li>
</ul>
</li>
<li><a href="#_getting_started_console_example">2.2. Console Example</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_creating_a_project">2.2.1. Creating a Project</a></li>
<li><a href="#_project_layout">2.2.2. Project Layout</a></li>
<li>
<ul class="sectlevel4">
<li><a href="#_gradle_2">Gradle</a></li>
<li><a href="#_model">Model</a></li>
<li><a href="#_controller">Controller</a></li>
<li><a href="#_view">View</a></li>
</ul>
</li>
<li><a href="#_running_the_application">2.2.3. Running the application</a></li>
<li><a href="#_testing">2.2.4. Testing</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_overview">3. Application Overview</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_overview_lifecycle">3.1. Lifecycle</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_overview_lifecycle_initialize">3.1.1. Initialize</a></li>
<li><a href="#_overview_lifecycle_startup">3.1.2. Startup</a></li>
<li><a href="#_overview_lifecycle_ready">3.1.3. Ready</a></li>
<li><a href="#_overview_lifecycle_shutdown">3.1.4. Shutdown</a></li>
<li><a href="#_overview_lifecycle_stop">3.1.5. Stop</a></li>
</ul>
</li>
<li><a href="#_overview_modules">3.2. Modules</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_overview_module_definition">3.2.1. Module Definition</a></li>
<li><a href="#_overview_module_configuration">3.2.2. Module Configuration</a></li>
<li>
<ul class="sectlevel4">
<li><a href="#_overview_instance_binding">Instance Binding</a></li>
<li><a href="#_overview_target_binding">Target Binding</a></li>
<li><a href="#_overview_provider_binding">Provider Binding</a></li>
<li><a href="#_overview_provider_type_binding">Provider Type Binding</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_mvc">4. The MVC Pattern</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_mvc_mvcmanager">4.1. The MVCGroupManager</a></li>
<li><a href="#_mvc_mvcgroups">4.2. MVC Groups</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_mvc_configuring_mvc_groups">4.2.1. Configuring MVC groups</a></li>
<li>
<ul class="sectlevel4">
<li><a href="#_disabling_lifecycle_events">Disabling Lifecycle Events</a></li>
<li><a href="#_disabling_instantiation_events">Disabling Instantiation Events</a></li>
<li><a href="#_disabling_destruction_events">Disabling Destruction Events</a></li>
<li><a href="#_disabling_controllers_as_application_event_listeners">Disabling Controllers as Application Event Listeners</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_mvc_mvcaware_transformation">4.3. The @MVCAware Transformation</a></li>
</ul>
</li>
<li><a href="#_models">5. Models</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_models_binding_swing">5.1. Swing Binding</a></li>
<li><a href="#_models_binding_javafx">5.2. JavaFX Binding</a></li>
<li><a href="#_models_observable_transformation">5.3. The @Observable AST Transformation</a></li>
<li><a href="#_models_vetoable_transformation">5.4. The @Vetoable AST Transformation</a></li>
<li><a href="#_models_property_listener_transformation">5.5. The @PropertyListener AST Transformation</a></li>
</ul>
</li>
<li><a href="#_controllers">6. Controllers</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_controllers_actions_and_threads">6.1. Actions and Threads</a></li>
<li><a href="#_controllers_actionmanager">6.2. The ActionManager</a></li>
<li><a href="#_controllers_action_interceptors">6.3. Action Interceptors</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_implementing_an_action_interceptor">6.3.1. Implementing an Action Interceptor</a></li>
<li><a href="#_configuration">6.3.2. Configuration</a></li>
</ul>
</li>
<li><a href="#_services">6.4. Services</a></li>
<li><a href="#_views">6.5. Views</a></li>
<li><a href="#_views_windowmanager">6.6. The WindowManager</a></li>
<li><a href="#_views_swing">6.7. Swing Specific</a></li>
<li><a href="#_views_javafx">6.8. JavaFX Specific</a></li>
</ul>
</li>
<li><a href="#_threading">7. Threading</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_threading_sync">7.1. Synchronous Calls</a></li>
<li><a href="#_threading_async">7.2. Asynchronous Calls</a></li>
<li><a href="#_threading_outside">7.3. Outside Calls</a></li>
<li><a href="#_threading_additional_methods">7.4. Additional Threading Methods</a></li>
<li><a href="#_threading_annotation">7.5. The @Threading Annotation</a></li>
<li><a href="#_threading_transformation">7.6. The @ThreadingAware AST Transformation</a></li>
</ul>
</li>
<li><a href="#_events">8. Events</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_events_publishing">8.1. Publishing Events</a></li>
<li><a href="#_events_consuming">8.2. Consuming events</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_examples">8.2.1. Examples</a></li>
</ul>
</li>
<li><a href="#_events_application_events">8.3. Application Events</a></li>
<li><a href="#_events_lifecycle_events">8.4. Lifecycle Events</a></li>
<li><a href="#_events_miscellaneous_events">8.5. Miscellaneous Events</a></li>
<li><a href="#_events_eventpublisher_transformation">8.6. The @EventPublisher AST Transformation</a></li>
</ul>
</li>
<li><a href="#_internationalization">9. Internationalization</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_internationalization_message_source">9.1. MessageSource</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_message_formats">9.1.1. Message Formats</a></li>
<li>
<ul class="sectlevel4">
<li><a href="#_standard_format">Standard Format</a></li>
<li><a href="#_map_format">Map Format</a></li>
<li><a href="#_groovy_format">Groovy format</a></li>
</ul>
</li>
<li><a href="#_reference_keys">9.1.2. Reference Keys</a></li>
</ul>
</li>
<li><a href="#_internationalization_message_source_configuration">9.2. MessageSource Configuration</a></li>
<li><a href="#_internationalization_message_source_transformation">9.3. The @MessageSourceAware AST Transformation</a></li>
</ul>
</li>
<li><a href="#_resources">10. Resource Management</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_resources_locating_resources">10.1. Locating Classpath Resources</a></li>
<li><a href="#_resources_resources_aware_transformation">10.2. The @ResourcesAware AST Transformation</a></li>
<li><a href="#_resources_resource_resolver">10.3. ResourceResolver</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_message_formats_2">10.3.1. Message Formats</a></li>
<li>
<ul class="sectlevel4">
<li><a href="#_standard_format_2">Standard Format</a></li>
<li><a href="#_map_format_2">Map Format</a></li>
<li><a href="#_groovy_format_2">Groovy format</a></li>
</ul>
</li>
<li><a href="#_type_conversion">10.3.2. Type Conversion</a></li>
<li><a href="#_reference_keys_2">10.3.3. Reference Keys</a></li>
</ul>
</li>
<li><a href="#_resources_resource_resolver_configuration">10.4. ResourceResolver Configuration</a></li>
<li><a href="#_resources_resource_resolver_transformation">10.5. The @ResourceResolverAware AST Transformation</a></li>
<li><a href="#_resources_injected_resources">10.6. Resource Injection</a></li>
<li><a href="#_resources_property_editors">10.7. Property Editors</a></li>
</ul>
</li>
<li><a href="#_addons">11. Addons</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_addons-addonmanager">11.1. The AddonManager</a></li>
</ul>
</li>
<li><a href="#_testing">12. Testing</a></li>
<li><a href="#_contributing">13. Contributing</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_contributing_issues">13.1. Issues</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_reviewing_issues">13.1.1. Reviewing issues</a></li>
</ul>
</li>
<li><a href="#_contributing_build">13.2. Build</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_running_the_test_suite">13.2.1. Running the test suite</a></li>
<li><a href="#_developing_in_intellij_idea">13.2.2. Developing in IntelliJ IDEA</a></li>
</ul>
</li>
<li><a href="#_contributing_patches">13.3. Patches</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_forking_and_pull_requests">13.3.1. Forking and Pull Requests</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_appendix_migration">Appendix A: Migrating from Griffon 1.x</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_build_configuration">1.1. Build Configuration</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_dependencies">1.1.1. Dependencies</a></li>
</ul>
</li>
<li><a href="#_runtime_configuration">1.2. Runtime Configuration</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_application_and_config_scripts">1.2.1. Application and Config Scripts</a></li>
<li><a href="#_builder_script">1.2.2. Builder Script</a></li>
<li><a href="#_events_script">1.2.3. Events Script</a></li>
</ul>
</li>
<li><a href="#_artifacts">1.3. Artifacts</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_controllers_2">1.3.1. Controllers</a></li>
<li><a href="#_views_2">1.3.2. Views</a></li>
</ul>
</li>
<li><a href="#_lifecycle_scripts">1.4. Lifecycle Scripts</a></li>
<li><a href="#_tests">1.5. Tests</a></li>
</ul>
</li>
<li><a href="#_appendix_module_bindings">Appendix B: Module Bindings</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_core">1.1. Core</a></li>
<li><a href="#_groovy">1.2. Groovy</a></li>
<li><a href="#_swing">1.3. Swing</a></li>
<li><a href="#_swing_builder">1.4. Swing Builder</a></li>
<li><a href="#_javafx">1.5. JavaFX</a></li>
<li><a href="#_javafx_builder">1.6. JavaFX Builder</a></li>
<li><a href="#_lanterna">1.7. Lanterna</a></li>
<li><a href="#_lanterna_builder">1.8. Lanterna Builder</a></li>
<li><a href="#_pivot">1.9. Pivot</a></li>
<li><a href="#_pivot_builder">1.10. Pivot Builder</a></li>
</ul>
</li>
<li><a href="#_appendix_ast_transformations">Appendix C: AST Transformations</a></li>
<li><a href="#_appenidx_sample_applications">Appendix D: Sample Applications</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_swing_2">1.1. Swing</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_model_2">1.1.1. Model</a></li>
<li><a href="#_controller_2">1.1.2. Controller</a></li>
<li><a href="#_service">1.1.3. Service</a></li>
<li><a href="#_view_2">1.1.4. View</a></li>
<li><a href="#_resources_2">1.1.5. Resources</a></li>
</ul>
</li>
<li><a href="#_javafx_2">1.2. JavaFX</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_model_3">1.2.1. Model</a></li>
<li><a href="#_controller_3">1.2.2. Controller</a></li>
<li><a href="#_service_2">1.2.3. Service</a></li>
<li><a href="#_view_3">1.2.4. View</a></li>
<li><a href="#_resources_3">1.2.5. Resources</a></li>
</ul>
</li>
<li><a href="#_lanterna_2">1.3. Lanterna</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_model_4">1.3.1. Model</a></li>
<li><a href="#_controller_4">1.3.2. Controller</a></li>
<li><a href="#_service_3">1.3.3. Service</a></li>
<li><a href="#_view_4">1.3.4. View</a></li>
<li><a href="#_resources_4">1.3.5. Resources</a></li>
</ul>
</li>
<li><a href="#_pivot_2">1.4. Pivot</a></li>
<li>
<ul class="sectlevel3">
<li><a href="#_model_5">1.4.1. Model</a></li>
<li><a href="#_controller_5">1.4.2. Controller</a></li>
<li><a href="#_service_4">1.4.3. Service</a></li>
<li><a href="#_view_5">1.4.4. View</a></li>
<li><a href="#_resources_5">1.4.5. Resources</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/griffon-banner-large.png" alt="Griffon">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Developing desktop/RIA applications on the JVM is a hard task. You have to make
choices upfront during application design that might complicate the implementation,
compromising the user experience; not to mention the amount of configuration needed.</p>
</div>
<div class="paragraph">
<p>RCP solutions like Eclipse RCP and NetBeans RCP are great for developing desktop
applications, not so much for RIAs and applets. Griffon is a framework inspired by
<a href="http://grails.org">Grails</a>, whose aim is to overcome the problems you may encounter
while developing all these types of applications. It brings along popular concepts like</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Convention over Configuration</p>
</li>
<li>
<p>Don&#8217;t Repeat Yourself (DRY)</p>
</li>
<li>
<p>Pervasive MVC</p>
</li>
<li>
<p>Testing supported "out of the box"</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This documentation will take you through getting started with Griffon and building
desktop/RIA applications with the Griffon framework.</p>
</div>
<div class="sect2">
<h3 id="_credits_and_acknowledgements"><a class="anchor" href="#_credits_and_acknowledgements"></a>Credits and Acknowledgements</h3>
<div class="paragraph">
<p>This guide is heavily influenced by the <a href="http://grails.org/doc/latest">Grails Guide</a>.
It simply would not have been possible without the great efforts made by:
<a href="http://twitter.com/graemerocher">Graeme Rocher</a>, <a href="http://twitter.com/pledbrook">Peter Ledbrook</a>,
<a href="http://twitter.com/wangjammer5">Marc Palmer</a>, <a href="http://twitter.com/jeffscottbrown">Jeff Brown</a>
and their sponsor: SpringSource. The Griffon team would like to thank them all
(and the Grails community too!) for making such a great framework and bringing the
fun back to programming applications.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started"><a class="anchor" href="#_getting_started"></a>2. Getting Started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter will help you get started with Griffon by explaining how to download
and install the project, how to use Griffon from within your favorite IDE, and how
to write your first application.</p>
</div>
<div class="sect2">
<h3 id="_getting_started_environment_setup"><a class="anchor" href="#_getting_started_environment_setup"></a>2.1. Environment Setup</h3>
<div class="paragraph">
<p>The following section outlines the minimum environment requirements to get started with Griffon.</p>
</div>
<div class="sect3">
<h4 id="_jdk"><a class="anchor" href="#_jdk"></a>2.1.1. JDK</h4>
<div class="paragraph">
<p><a href="http://java.oracle.com">JDK7</a> is the lowest JVM version supported by Griffon. You can safely use
<a href="http://java.oracle.com">JDK8</a> features such as lambdas too. We strongly suggest to use JDK8 if
you&#8217;re planning to build JavaFX based applications as JavaFX8 delivers many enhancements over
JavaFX 2.2 (the version included in JDK7).</p>
</div>
</div>
<div class="sect3">
<h4 id="_gradle"><a class="anchor" href="#_gradle"></a>2.1.2. Gradle</h4>
<div class="paragraph">
<p><a href="http://gradle.org">Gradle</a> 1.12 was used to thoroughly test the Griffon source code and as such
is guaranteed to work. We suggest installing <a href="http://gvmtool.net">GVM</a> as a means to keep your
Gradle installation up to date. GVM can also be used to install <a href="http://github.com/pledbrook/lazybones">Lazybones</a>,
a templating tool for creating Griffon projects.</p>
</div>
</div>
<div class="sect3">
<h4 id="_maven"><a class="anchor" href="#_maven"></a>2.1.3. Maven</h4>
<div class="paragraph">
<p>Alternatively you may use Maven instead of Gradle as your build tool of choice. Maven is
a popular choice amongst Java developers, however it&#8217;s our form believe that Gradle delivers
a much better development and user experience. YMMV.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ides"><a class="anchor" href="#_ides"></a>2.1.4. IDEs</h4>
<div class="paragraph">
<p>Any IDE that supports Gradle and/or Maven can be used to build a Griffon project.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_getting_started_console_example"><a class="anchor" href="#_getting_started_console_example"></a>2.2. Console Example</h3>
<div class="sect3">
<h4 id="_creating_a_project"><a class="anchor" href="#_creating_a_project"></a>2.2.1. Creating a Project</h4>
<div class="paragraph">
<p>The first is to get Lazybones installed on your system. The easiest way to achieve
this goal is to install <a href="http://gvmtool.net">GVM</a> first</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>$ curl -s get.gvmtool.net | bash</code></pre>
</div>
</div>
<div class="paragraph">
<p>Install the latest version of Lazybones with the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>$ gvm install lazybones</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, add the official Griffon Lazybones templates repository to your Lazybones
configuration. Edit <code>$USER_HOME/.lazybones/config.groovy</code> and paste the following
content</p>
</div>
<div class="listingblock">
<div class="title">$USER_HOME/.lazybones/config.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">bintrayRepositories = [
    <span class="string"><span class="delimiter">&quot;</span><span class="content">griffon/griffon-lazybones-templates</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">pledbrook/lazybones-templates</span><span class="delimiter">&quot;</span></span>
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>We&#8217;re now ready to create the project. You can list all available templates with
the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>$ lazybones list
Available templates in griffon/griffon-lazybones-templates:

    griffon-javafx-java
    griffon-javafx-groovy
    griffon-lanterna-java
    griffon-lanterna-groovy
    griffon-pivot-java
    griffon-pivot-groovy
    griffon-swing-java
    griffon-swing-groovy
    griffon-plugin-single</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that template names follow a naming convention identifying the main UI toolkit
and main programming language. Alright, let&#8217;s create an simple project using Swing as
main UI toolkit and Groovy as main language</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>$ lazybones create griffon-swing-groovy console
Creating project from template griffon-swing-groovy (latest) in 'console'
Define value for 'group' [org.example]: console
Define value for 'version' [0.1.0-SNAPSHOT]:
Define value for 'package' [console]:
Define value for 'griffonVersion' [2.0.0.BETA]:</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_project_layout"><a class="anchor" href="#_project_layout"></a>2.2.2. Project Layout</h4>
<div class="paragraph">
<p>Take a moment to familiarize yourself with the standard Griffon project layout.
Every Griffon project shares the same layout, making it easy to dive in as artifacts
are located in specific directories according to their responsibilities and behavior.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>console
 griffon-app
  conf
  controllers
  i18n
  lifecycle
  models
  resources
  services
  views
 src
     integration-test
      groovy
     main
      groovy
      resources
     test
         groovy
         resources</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here&#8217;s an screenshot of the finished application running to give you an idea of what
we&#8217;re aiming at with this example . A small Groovy script has been executed, you
can see the result on the bottom right side</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/console-swing-groovy.png" alt="Swing" width="50%" height="50%">
</div>
</div>
<div class="sect4">
<h5 id="_gradle_2"><a class="anchor" href="#_gradle_2"></a>Gradle</h5>
<div class="paragraph">
<p>The following listing shows the Gradle build file generated by the Lazybones template</p>
</div>
<div id="gradle-build-file" class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">buildscript {
    repositories {
        jcenter()
    }

    dependencies {
        classpath <span class="string"><span class="delimiter">'</span><span class="content">org.codehaus.griffon:gradle-griffon-plugin:1.0.0.BETA</span><span class="delimiter">'</span></span>
        classpath <span class="string"><span class="delimiter">'</span><span class="content">net.saliman:gradle-cobertura-plugin:2.2.4</span><span class="delimiter">'</span></span>
        classpath <span class="string"><span class="delimiter">'</span><span class="content">org.kt3k.gradle.plugin:coveralls-gradle-plugin:0.4.0</span><span class="delimiter">'</span></span>
        classpath <span class="string"><span class="delimiter">'</span><span class="content">nl.javadude.gradle.plugins:license-gradle-plugin:0.9.0</span><span class="delimiter">'</span></span>
    }
}

apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">groovy</span><span class="delimiter">'</span></span>
apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">org.codehaus.griffon.griffon</span><span class="delimiter">'</span></span>
apply <span class="key">from</span>: <span class="string"><span class="delimiter">'</span><span class="content">gradle/publishing.gradle</span><span class="delimiter">'</span></span>
apply <span class="key">from</span>: <span class="string"><span class="delimiter">'</span><span class="content">gradle/code-coverage.gradle</span><span class="delimiter">'</span></span>
apply <span class="key">from</span>: <span class="string"><span class="delimiter">'</span><span class="content">gradle/code-quality.gradle</span><span class="delimiter">'</span></span>
apply <span class="key">from</span>: <span class="string"><span class="delimiter">'</span><span class="content">gradle/integration-test.gradle</span><span class="delimiter">'</span></span>

mainClassName = <span class="string"><span class="delimiter">'</span><span class="content">console.Launcher</span><span class="delimiter">'</span></span>

dependencies {
    compileOnly <span class="string"><span class="delimiter">&quot;</span><span class="content">org.codehaus.griffon:griffon-groovy-compile:</span><span class="inline"><span class="inline-delimiter">$</span>griffonVersion</span><span class="delimiter">&quot;</span></span>

    compile <span class="string"><span class="delimiter">&quot;</span><span class="content">org.codehaus.griffon:griffon-groovy:</span><span class="inline"><span class="inline-delimiter">$</span>griffonVersion</span><span class="delimiter">&quot;</span></span>
    compile <span class="string"><span class="delimiter">&quot;</span><span class="content">org.codehaus.griffon:griffon-swing:</span><span class="inline"><span class="inline-delimiter">$</span>griffonVersion</span><span class="delimiter">&quot;</span></span>
    compile <span class="string"><span class="delimiter">&quot;</span><span class="content">org.codehaus.griffon:griffon-guice:</span><span class="inline"><span class="inline-delimiter">$</span>griffonVersion</span><span class="delimiter">&quot;</span></span>

    runtime <span class="string"><span class="delimiter">&quot;</span><span class="content">org.codehaus.griffon:griffon-swing-groovy:</span><span class="inline"><span class="inline-delimiter">$</span>griffonVersion</span><span class="delimiter">&quot;</span></span>
    runtime(<span class="string"><span class="delimiter">'</span><span class="content">log4j:log4j:1.2.17</span><span class="delimiter">'</span></span>) {
        exclude <span class="key">group</span>: <span class="string"><span class="delimiter">'</span><span class="content">ant</span><span class="delimiter">'</span></span>,         <span class="key">module</span>: <span class="string"><span class="delimiter">'</span><span class="content">ant-nodeps</span><span class="delimiter">'</span></span>
        exclude <span class="key">group</span>: <span class="string"><span class="delimiter">'</span><span class="content">ant</span><span class="delimiter">'</span></span>,         <span class="key">module</span>: <span class="string"><span class="delimiter">'</span><span class="content">ant-junit</span><span class="delimiter">'</span></span>
        exclude <span class="key">group</span>: <span class="string"><span class="delimiter">'</span><span class="content">ant-contrib</span><span class="delimiter">'</span></span>, <span class="key">module</span>: <span class="string"><span class="delimiter">'</span><span class="content">ant-contrib</span><span class="delimiter">'</span></span>
    }
    runtime <span class="string"><span class="delimiter">'</span><span class="content">org.slf4j:slf4j-log4j12:1.7.7</span><span class="delimiter">'</span></span>

    testCompile <span class="string"><span class="delimiter">&quot;</span><span class="content">org.codehaus.griffon:griffon-fest-test:</span><span class="inline"><span class="inline-delimiter">$</span>griffonVersion</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alright, let&#8217;s get started with the code. We&#8217;ll visit the Model first.</p>
</div>
</div>
<div class="sect4">
<h5 id="_model"><a class="anchor" href="#_model"></a>Model</h5>
<div class="paragraph">
<p>The model for this application is simple: it contains properties that hold the script to be
evaluated and the results of the evaluation. Make sure you paste the following code into
<code>griffon-app/models/console/ConsoleModel.groovy</code>.</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/models/console/ConsoleModel.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> console

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonModel</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>
<span class="keyword">import</span> <span class="include">griffon.transform.Observable</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonModel)
<span class="type">class</span> <span class="class">ConsoleModel</span> {
    <span class="predefined-type">String</span> scriptSource                                  <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="annotation">@Observable</span> <span class="predefined-type">Object</span> scriptResult                      <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="annotation">@Observable</span> <span class="type">boolean</span> enabled = <span class="predefined-constant">true</span>                   <i class="conum" data-value="3"></i><b>(3)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Holds the script&#8217;s text</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Holds the result of the script&#8217;s execution</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Enable/disable flag</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Griffon Models are <strong><em>not</em></strong> domain classes like the ones you find in Grails; they&#8217;re more akin
to presentation models, and as such, they&#8217;re used to transfer data between Views and Controllers.</p>
</div>
</div>
<div class="sect4">
<h5 id="_controller"><a class="anchor" href="#_controller"></a>Controller</h5>
<div class="paragraph">
<p>The controller is also trivial: throw the contents of the script from the model at an <code>Evaluator</code>,
then store the result back into the model. Make sure you paste the following code into
<code>griffon-app/controllers/console/ConsoleController.groovy</code>.</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/controllers/console/ConsoleController.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> console

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonController)
<span class="type">class</span> <span class="class">ConsoleController</span> {
    <span class="keyword">def</span> model                                                <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Inject</span>
    Evaluator evaluator                                      <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="type">void</span> executeScript() {                                   <i class="conum" data-value="3"></i><b>(3)</b>
        model.enabled = <span class="predefined-constant">false</span>
        <span class="keyword">def</span> result
        <span class="keyword">try</span> {
            result = evaluator.evaluate(model.scriptSource)  <i class="conum" data-value="4"></i><b>(4)</b>
        } <span class="keyword">finally</span> {
            model.enabled = <span class="predefined-constant">true</span>
            model.scriptResult = result                      <i class="conum" data-value="5"></i><b>(5)</b>
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Injected by JSR 330</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Controller action; automatically executed off the UI thread</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Evaluate the script</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Write back result to Model</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Griffon framework will inject references to the other portions of the MVC triad if fields
named <code>model</code>, <code>view</code>, and <code>controller</code> are present in the Model, Controller or View. This allows
us to access the view widgets and the model data if needed. Any other class members annotated with
<code>@Inject</code> participate in dependency injection as laid out by JSR 330, in this case the controller
will get an instance of <code>Evaluator</code> if a suitable implementation is bound.</p>
</div>
<div class="paragraph">
<p>The <code>executeScript</code> <em class="conum">3</em> method will be used later in the View in combination
with a button. You may notice that there&#8217;s no explicit threading management. All Swing developers
know they must obey the Swing Rule: long running computations must run outside of the EDT; all UI
components should be queried/modified inside the EDT. It turns out Griffon is aware of this rule,
making sure an action is called outside of the EDT by default; all bindings made to UI components
via the model will be updated inside the EDT <em class="conum">5</em>. We&#8217;ll setup the bindings in
the next listing.</p>
</div>
<div class="paragraph">
<p>We must create a <code><a href="api/griffon/core/injection/Module.html" target="_blank">Module</a></code> in order to bind <code>Evaluator</code>.
These are the required class definitions</p>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/console/Evaluator.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> console

<span class="directive">public</span> <span class="type">interface</span> Evaluator {
    <span class="predefined-type">Object</span> evaluate(<span class="predefined-type">String</span> input)
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/console/GroovyShellEvaluator.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> console

<span class="type">class</span> <span class="class">GroovyShellEvaluator</span> <span class="directive">implements</span> Evaluator {
    <span class="directive">private</span> GroovyShell shell = <span class="keyword">new</span> GroovyShell()

    <span class="annotation">@Override</span>
    <span class="predefined-type">Object</span> evaluate(<span class="predefined-type">String</span> input) {
        shell.evaluate(input)
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/console/ApplicationModule.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> console

<span class="keyword">import</span> <span class="include">griffon.core.injection.Module</span>
<span class="keyword">import</span> <span class="include">griffon.inject.DependsOn</span>
<span class="keyword">import</span> <span class="include">griffon.swing.SwingWindowDisplayHandler</span>
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.injection.AbstractModule</span>
<span class="keyword">import</span> <span class="include">org.kordamp.jipsy.ServiceProviderFor</span>

<span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.util.AnnotationUtils.named</span>

<span class="annotation">@DependsOn</span>(<span class="string"><span class="delimiter">'</span><span class="content">swing</span><span class="delimiter">'</span></span>)                                                        <i class="conum" data-value="3"></i><b>(3)</b>
<span class="annotation">@ServiceProviderFor</span>(Module)
<span class="type">class</span> <span class="class">ApplicationModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        bind(Evaluator)                                                    <i class="conum" data-value="1"></i><b>(1)</b>
            .to(GroovyShellEvaluator)
            .asSingleton()

        bind(SwingWindowDisplayHandler)                                    <i class="conum" data-value="2"></i><b>(2)</b>
            .withClassifier(named(<span class="string"><span class="delimiter">'</span><span class="content">defaultWindowDisplayHandler</span><span class="delimiter">'</span></span>))
            .to(CenteringWindowDisplayHandler)
            .asSingleton()
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Binding definition</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Overriding an existing binding</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Loaded after <em>swing</em> module</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Modules can define several bindings, even override existing bindings. In our particular
case we defined a binding <em class="conum">1</em> for <code>Evaluator</code> and overrode a
binding <em class="conum">2</em> for <code>SwingWindowDisplayHandler</code>. The latter is
supplied by the <code>swing</code> module thus me must mark it as a dependency <em class="conum">3</em>
in our module definition. The implementation of our custom <code>SwingWindowDisplayHandler</code>
is quite trivial, as shown by the following snippet</p>
</div>
<div class="listingblock">
<div class="title">src/main/groovy/console/CenteringWindowDisplayHandler.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> console

<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.swing.DefaultSwingWindowDisplayHandler</span>

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>
<span class="keyword">import</span> <span class="include">java.awt.Window</span>

<span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.swing.support.SwingUtils.centerOnScreen</span>

<span class="type">class</span> <span class="class">CenteringWindowDisplayHandler</span> <span class="directive">extends</span> DefaultSwingWindowDisplayHandler {
    <span class="annotation">@Override</span>
    <span class="type">void</span> show(<span class="annotation">@Nonnull</span> <span class="predefined-type">String</span> name, <span class="annotation">@Nonnull</span> <span class="predefined-type">Window</span> window) {
        centerOnScreen(window)
        <span class="local-variable">super</span>.show(name, window)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This handler is only concerned with centering the window on the screen before showing it.</p>
</div>
</div>
<div class="sect4">
<h5 id="_view"><a class="anchor" href="#_view"></a>View</h5>
<div class="paragraph">
<p>The view classes contain the visual components for your application. Please paste the following code
into <code>griffon-app/views/console/ConsoleView.groovy</code>.</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/views/console/ConsoleView.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> console

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonView)
<span class="type">class</span> <span class="class">ConsoleView</span> {
    <span class="keyword">def</span> builder                                                              <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="keyword">def</span> model                                                                <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="type">void</span> initUI() {
        builder.with {
            actions {
                action(executeScriptAction,                                  <i class="conum" data-value="2"></i><b>(2)</b>
                    <span class="key">enabled</span>: bind { model.enabled })
            }

            application(<span class="key">title</span>: application.configuration[<span class="string"><span class="delimiter">'</span><span class="content">application.title</span><span class="delimiter">'</span></span>],
                <span class="key">pack</span>: <span class="predefined-constant">true</span>, <span class="key">locationByPlatform</span>: <span class="predefined-constant">true</span>, <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">mainWindow</span><span class="delimiter">'</span></span>,
                <span class="key">iconImage</span>:   imageIcon(<span class="string"><span class="delimiter">'</span><span class="content">/griffon-icon-48x48.png</span><span class="delimiter">'</span></span>).image,
                <span class="key">iconImages</span>: [imageIcon(<span class="string"><span class="delimiter">'</span><span class="content">/griffon-icon-48x48.png</span><span class="delimiter">'</span></span>).image,
                             imageIcon(<span class="string"><span class="delimiter">'</span><span class="content">/griffon-icon-32x32.png</span><span class="delimiter">'</span></span>).image,
                             imageIcon(<span class="string"><span class="delimiter">'</span><span class="content">/griffon-icon-16x16.png</span><span class="delimiter">'</span></span>).image]) {
                panel(<span class="key">border</span>: emptyBorder(<span class="integer">6</span>)) {
                    borderLayout()

                    scrollPane(<span class="key">constraints</span>: CENTER) {
                        textArea(<span class="key">text</span>: bind(<span class="key">target</span>: model, <span class="string"><span class="delimiter">'</span><span class="content">scriptSource</span><span class="delimiter">'</span></span>),  <i class="conum" data-value="3"></i><b>(3)</b>
                            <span class="key">enabled</span>: bind { model.enabled },                 <i class="conum" data-value="2"></i><b>(2)</b>
                            <span class="key">columns</span>: <span class="integer">40</span>, <span class="key">rows</span>: <span class="integer">10</span>)
                    }

                    hbox(<span class="key">constraints</span>: SOUTH) {
                        button(executeScriptAction)                          <i class="conum" data-value="4"></i><b>(4)</b>
                        hstrut(<span class="integer">5</span>)
                        label(<span class="string"><span class="delimiter">'</span><span class="content">Result:</span><span class="delimiter">'</span></span>)
                        hstrut(<span class="integer">5</span>)
                        textField(<span class="key">editable</span>: <span class="predefined-constant">false</span>,
                                  <span class="key">text</span>: bind { model.scriptResult })         <i class="conum" data-value="5"></i><b>(5)</b>
                    }
                }
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Bind enabled state from model</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Bind script source to model</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Apply controller action by convention</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Bind script result from model</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The View contains a fairly straightforward SwingBuilder script. Griffon will execute these groovy
scripts in context of it&#8217;s <code><a href="api/griffon/util/CompositeBuilder.html" target="_blank">CompositeBuilder</a></code>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_running_the_application"><a class="anchor" href="#_running_the_application"></a>2.2.3. Running the application</h4>
<div class="paragraph">
<p>Running the application requires you to execute the <code>run</code> task if using Gradle</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>$ ./gradlew run</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or the <code>exec:java</code> task if using Maven. Take special note that this task assumes classes
have been compiled already, so it&#8217;s best to pair it up with <code>compile</code> for safe measure</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>$ mvn compile exec:java</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now that we know the basic structure of a Griffon application and how to run it we turn
to testing.</p>
</div>
</div>
<div class="sect3">
<h4 id="_testing"><a class="anchor" href="#_testing"></a>2.2.4. Testing</h4>
<div class="paragraph">
<p>It&#8217;s always a good idea to test out the code we write. It&#8217;s pretty easy to write tests for
regular components such as <code>Evaluator</code> and <code>GroovyShellEvaluator</code>, as they require little
to no external dependencies. Testing Griffon artifacts such as Controllers and Models on the
other hand requires a bit more of effort, but not much as shown by <code>ConsoleControllerTest</code></p>
</div>
<div class="listingblock">
<div class="title">src/test/groovy/console/ConsoleControllerTest.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> console

<span class="keyword">import</span> <span class="include">griffon.core.artifact.ArtifactManager</span>
<span class="keyword">import</span> <span class="include">griffon.core.injection.Module</span>
<span class="keyword">import</span> <span class="include">griffon.core.test.GriffonUnitRule</span>
<span class="keyword">import</span> <span class="include">griffon.core.test.TestFor</span>
<span class="keyword">import</span> <span class="include">griffon.inject.DependsOn</span>
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.injection.AbstractModule</span>
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>
<span class="keyword">import</span> <span class="include">org.junit.Test</span>

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>
<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>

<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.jayway.awaitility.Awaitility.await</span>
<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.jayway.awaitility.Awaitility.fieldIn</span>
<span class="keyword">import</span> <span class="include">static</span> <span class="include">java.util.concurrent.TimeUnit.SECONDS</span>
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.notNullValue</span>

<span class="annotation">@TestFor</span>(ConsoleController)                                                   <i class="conum" data-value="1"></i><b>(1)</b>
<span class="type">class</span> <span class="class">ConsoleControllerTest</span> {
    <span class="directive">private</span> ConsoleController controller                                      <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">private</span> ArtifactManager artifactManager                                   <i class="conum" data-value="3"></i><b>(3)</b>

    <span class="annotation">@Rule</span>
    <span class="directive">public</span> <span class="directive">final</span> GriffonUnitRule griffon = <span class="keyword">new</span> GriffonUnitRule()              <i class="conum" data-value="4"></i><b>(4)</b>

    <span class="annotation">@Test</span>
    <span class="type">void</span> testExecuteScriptAction() {
        <span class="comment">// given:                                                             </span><i class="conum" data-value="5"></i><b>(5)</b>
        ConsoleModel model = artifactManager.newInstance(ConsoleModel.class)
        controller.model = model

        <span class="comment">// when:                                                              </span><i class="conum" data-value="6"></i><b>(6)</b>
        <span class="predefined-type">String</span> input = <span class="string"><span class="delimiter">'</span><span class="content">var = &quot;Griffon&quot;</span><span class="delimiter">'</span></span>
        model.scriptSource = input
        controller.invokeAction(<span class="string"><span class="delimiter">'</span><span class="content">executeScript</span><span class="delimiter">'</span></span>)

        <span class="comment">// then:                                                              </span><i class="conum" data-value="7"></i><b>(7)</b>
        await().atMost(<span class="integer">2</span>, SECONDS)
            .until(fieldIn(model)
            .ofType(<span class="predefined-type">Object</span>)
            .andWithName(<span class="string"><span class="delimiter">'</span><span class="content">scriptResult</span><span class="delimiter">'</span></span>),
            notNullValue())
        <span class="keyword">assert</span> input == model.scriptResult
    }

    <span class="directive">private</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">EchoEvaluator</span> <span class="directive">implements</span> Evaluator {                 <i class="conum" data-value="8"></i><b>(8)</b>
        <span class="annotation">@Override</span>
        <span class="predefined-type">Object</span> evaluate(<span class="predefined-type">String</span> input) {
            input
        }
    }

    <span class="annotation">@DependsOn</span>(<span class="string"><span class="delimiter">'</span><span class="content">application</span><span class="delimiter">'</span></span>)
    <span class="directive">private</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">TestModule</span> <span class="directive">extends</span> AbstractModule {
        <span class="annotation">@Override</span>
        <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
            bind(Evaluator)
                .to(EchoEvaluator)
                .asSingleton()
        }
    }

    <span class="annotation">@Nonnull</span>
    <span class="directive">private</span> <span class="predefined-type">List</span>&lt;Module&gt; moduleOverrides() {
        [<span class="keyword">new</span> TestModule()]
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Indicate class under test</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Injected by <code>GriffonUnitRule</code> given <em class="conum">1</em></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Injected by <code>GriffonUnitRule</code> via JSR 330</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Instantiates and configures a <code>GriffonAplication</code> for testing</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Setup collaborators</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Stimulus</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Validate after waiting 2 seconds at most</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>At the heart we have the <code>@TestFor</code> <em class="conum">1</em> annotation and a JUnit4 rule:
+ @GriffonUnitRule+ <em class="conum">4</em>. These two key elements are responsible for
injecting the required behavior to the test case. <code>@TestFor</code> identifies the type of component,
a Controller in this case, that&#8217;s under test; it assumes a suitable private field <em class="conum">2</em>
to be defined in the testcase. This filed is used to inject the instance under test.
The <code>GriffonUnitRule</code> is responsible for bootstrapping a barebones application and putting
together all the required bindings. Notice that the test case can participate in dependency
injection <em class="conum">3</em> too.</p>
</div>
<div class="paragraph">
<p>Running tests requires executing the <code>test</code> task</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>$ ./gradlew test</code></pre>
</div>
</div>
<div class="paragraph">
<p>A similar command can be invoked with Maven</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>$ mvn test</code></pre>
</div>
</div>
<div class="paragraph">
<p>These are the basics for getting started with a Griffon project.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a>3. Application Overview</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_lifecycle"><a class="anchor" href="#_overview_lifecycle"></a>3.1. Lifecycle</h3>
<div class="paragraph">
<p>Every Griffon application goes through the same life cycle phases no matter in which
mode they are running, with the exception of applet mode where there is an additional
phase due to the intrinsic nature of applets. The application&#8217;s lifecycle has been
inspired by JSR-296, the Swing Application Framework.</p>
</div>
<div class="paragraph">
<p>Every phase has an associated lifecycle class that will be invoked at the appropriate
time. Class names match each phase name; you&#8217;ll find them inside <code>griffon-app/lifecycle</code>.</p>
</div>
<div class="sect3">
<h4 id="_overview_lifecycle_initialize"><a class="anchor" href="#_overview_lifecycle_initialize"></a>3.1.1. Initialize</h4>
<div class="paragraph">
<p>The initialization phase is the first to be called by the application&#8217;s life cycle.
The application instance has just been created and its configuration has been read.</p>
</div>
<div class="paragraph">
<p>This phase is typically used to tweak the application for the current platform,
including its Look &amp; Feel.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
The <code>Initialize</code> lifecycle handler will be called right after the configuration
has been read but before <a href="#_addons">addons</a> and managers are initialized.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_overview_lifecycle_startup"><a class="anchor" href="#_overview_lifecycle_startup"></a>3.1.2. Startup</h4>
<div class="paragraph">
<p>This phase is responsible for instantiating all MVC groups that have been defined
in the application&#8217;s configuration and that also have been marked as startup groups
in the same configuration file.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
The <code>Startup</code> lifecycle handler will be called after all MVC groups have been
initialized.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_overview_lifecycle_ready"><a class="anchor" href="#_overview_lifecycle_ready"></a>3.1.3. Ready</h4>
<div class="paragraph">
<p>This phase will be called right after <code>Startup</code> with the condition that no pending
events are available in the UI queue. The application&#8217;s main window will be displayed
at the end of this phase.</p>
</div>
</div>
<div class="sect3">
<h4 id="_overview_lifecycle_shutdown"><a class="anchor" href="#_overview_lifecycle_shutdown"></a>3.1.4. Shutdown</h4>
<div class="paragraph">
<p>Called when the application is about to close. Any artifact can invoke the shutdown
sequence by calling <code>shutdown()</code> on the <code><a href="api/griffon/core/GriffonApplication.html" target="_blank">GriffonApplication</a></code> instance.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
The <code>Shutdown</code> lifecycle handler will be called after all <code><a href="api/griffon/core/ShutdownHandler.html" target="_blank">ShutdownHandler</a></code>s and
event handlers interested in the <code><a href="#_events_lifecycle_events">ShutdownStart</a></code> event.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_overview_lifecycle_stop"><a class="anchor" href="#_overview_lifecycle_stop"></a>3.1.5. Stop</h4>
<div class="paragraph">
<p>This phase is only available when running on applet mode. It will be called when the
applet container invokes <code>destroy()</code> on the applet instance.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_overview_modules"><a class="anchor" href="#_overview_modules"></a>3.2. Modules</h3>
<div class="paragraph">
<p><code><a href="api/griffon/core/injection/Module.html" target="_blank">Module</a></code>s define components that can be injected using the JSR 330 API.
Module definitions are highly influenced by the Guice 3.x API however they do not
impose a strict dependency on Guice.</p>
</div>
<div class="sect3">
<h4 id="_overview_module_definition"><a class="anchor" href="#_overview_module_definition"></a>3.2.1. Module Definition</h4>
<div class="paragraph">
<p>All modules must implement the <code><a href="api/griffon/core/injection/Module.html" target="_blank">Module</a></code> interface shown next</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">Module</span> {
    <span class="annotation">@Nonnull</span>
    <span class="predefined-type">List</span>&lt;<span class="predefined-type">Binding</span>&lt;?&gt;&gt; getBindings();

    <span class="type">void</span> configure();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>They also require to have a well defined name. This can be achieved by annotating the module
class with <code>@javax.inject.Named</code>. If a value for <code>@javax.inject.Named</code> is not defined then
one will be automatically calculated using the fully qualified class name. For example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">org.example</span>;

<span class="keyword">import</span> <span class="include">griffon.core.injection.Module</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.injection.AbstractModule</span>;
<span class="keyword">import</span> <span class="include">org.kordamp.jipsy.ServiceProviderFor</span>;

<span class="keyword">import</span> <span class="include">javax.inject.Named</span>;

<span class="annotation">@ServiceProviderFor</span>(Module.class)
<span class="annotation">@Named</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">CustomModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        <span class="comment">// bindings</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Results in a module named <code>org.example.custom</code>, where as the following definition</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">org.example</span>;

<span class="keyword">import</span> <span class="include">griffon.core.injection.Module</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.injection.AbstractModule</span>;
<span class="keyword">import</span> <span class="include">org.kordamp.jipsy.ServiceProviderFor</span>;

<span class="keyword">import</span> <span class="include">javax.inject.Named</span>;

<span class="annotation">@ServiceProviderFor</span>(Module.class)
<span class="annotation">@Named</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">custom</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">CustomModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        <span class="comment">// bindings</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Results in a module simply called <code>custom</code>. A module may depend on another module; when
that&#8217;s the case then the bindings of this module are processed after their dependencies. This
allows dependent modules to override bindings made by their dependencies. Module dependencies
are specified using the <code><a href="api/griffon/inject/DependsOn.html" target="_blank">@griffon.inject.DependsOn</a></code> annotation, like so</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="keyword">import</span> <span class="include">griffon.core.injection.Module</span>;
<span class="keyword">import</span> <span class="include">griffon.inject.DependsOn</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.injection.AbstractModule</span>;
<span class="keyword">import</span> <span class="include">org.kordamp.jipsy.ServiceProviderFor</span>;

<span class="keyword">import</span> <span class="include">javax.inject.Named</span>;

<span class="annotation">@ServiceProviderFor</span>(Module.class)
<span class="annotation">@DependsOn</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">parent-module</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Named</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">CustomModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        <span class="comment">// bindings</span>
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_overview_module_configuration"><a class="anchor" href="#_overview_module_configuration"></a>3.2.2. Module Configuration</h4>
<div class="paragraph">
<p>Modules perform their duty by defining bindings, of which there are 4 kinds</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="api/griffon/core/injection/InstanceBinding.html" target="_blank">InstanceBinding</a></p>
</li>
<li>
<p><a href="api/griffon/core/injection/TargetBinding.html" target="_blank">TargetBinding</a></p>
</li>
<li>
<p><a href="api/griffon/core/injection/ProviderBinding.html" target="_blank">ProviderBinding</a></p>
</li>
<li>
<p><a href="api/griffon/core/injection/ProviderTypeBinding.html" target="_blank">ProviderTypeBinding</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Bindings have an scope, either <code>singleton</code> or <code>prototype</code>. <code>InstanceBinding</code> is the only
binding that has <code>singleton</code> as implicit scope; this setting can&#8217;t be changed.
All bindings accept a <code>classifier</code> or an <code>classifier_type</code>. Classifiers are annotations that
have been annotated with <code>@javax.inject.Qualifier</code>. You must specify one or the other but
not both; <code>classifier</code> has precedence over <code>classifier_type</code>.</p>
</div>
<div class="sect4">
<h5 id="_overview_instance_binding"><a class="anchor" href="#_overview_instance_binding"></a>Instance Binding</h5>
<div class="paragraph">
<p>This binding is used to define explicit and eager singletons, for example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java">bind(Calculator.class)
    .toInstance(<span class="keyword">new</span> GroovyShellCalculator());</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_overview_target_binding"><a class="anchor" href="#_overview_target_binding"></a>Target Binding</h5>
<div class="paragraph">
<p>This binding enables you to specify the <em>source</em> type and <em>target</em> type. Typically the
<em>source</em> is an interface while the <em>target</em> is a concrete implementation. If the <em>target</em>
is omitted then the binding assumes the <em>source</em> to be a concrete type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java">bind(Calculator.class)
    .to(GroovyShellCalculator.class);</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_overview_provider_binding"><a class="anchor" href="#_overview_provider_binding"></a>Provider Binding</h5>
<div class="paragraph">
<p>This binding behaves like a factory, giving you the power to decide with extreme precision
how the instance should be created. Bindings of this type require an eager instance of
type <code>javax.inject.Provider</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java">bind(Calculator.class)
    .toProvider(<span class="keyword">new</span> CalculatorProvider());</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_overview_provider_type_binding"><a class="anchor" href="#_overview_provider_type_binding"></a>Provider Type Binding</h5>
<div class="paragraph">
<p>Finally we have the most flexible binding as it lets you specify a <code>javax.injectProvider</code>
type that will be used to lazily instantiate the provider before obtaining the type instance.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java">bind(Calculator.class)
    .toProvider(CalculatorProvider.class);</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mvc"><a class="anchor" href="#_mvc"></a>4. The MVC Pattern</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All Griffon applications operate with a basic unit called the MVC group. An MVC group
is comprised of 3 member parts: <a href="#_models">Models</a>, <a href="#_views">Views</a> and <a href="#_controllers">Controllers</a>.
However it is possible to add (or even remove) members from an MVC group by carefully
choosing a suitable configuration.</p>
</div>
<div class="paragraph">
<p>MVC groups configuration is setup in <code>Config.groovy</code> located inside <code>griffon-app/conf</code> (or
<code>Config.java</code> if using Java as main language). This file holds an entry for every MVC group
that the application has (not counting those provided by <a href="#_addons">Addons</a>).</p>
</div>
<div class="paragraph">
<p>Here&#8217;s how a typical MVC group configuration looks like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">mvcGroups {
    <span class="comment">// MVC Group for &quot;sample&quot;</span>
    <span class="string"><span class="delimiter">'</span><span class="content">sample</span><span class="delimiter">'</span></span> {
        model      = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleModel</span><span class="delimiter">'</span></span>
        view       = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleView</span><span class="delimiter">'</span></span>
        controller = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleController</span><span class="delimiter">'</span></span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The definition order is very important, it determines the order in which each member
will be initialized. In the previous example both <code>model</code> and <code>view</code> will be initialized
before the <code>controller</code>. Do not mistake initialization for instantiation, as initialization
relies on calling <code><a href="api/griffon/core/artifact/GriffonMVCArtifact.html#mvcGroupInit()" target="_blank">mvcGroupInit()</a></code> on the group member.</p>
</div>
<div class="paragraph">
<p>MVC group configurations accept a special key that defines additional configuration
for that group, as it can be seen in the following snippet</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">mvcGroups {
    <span class="comment">// MVC Group for &quot;sample&quot;</span>
    <span class="string"><span class="delimiter">'</span><span class="content">sample</span><span class="delimiter">'</span></span> {
        model      = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleModel</span><span class="delimiter">'</span></span>
        view       = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleView</span><span class="delimiter">'</span></span>
        controller = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleController</span><span class="delimiter">'</span></span>
    }

    <span class="comment">// MVC Group for &quot;foo&quot;</span>
    <span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span> {
        model      = <span class="string"><span class="delimiter">'</span><span class="content">sample.FooModel</span><span class="delimiter">'</span></span>
        view       = <span class="string"><span class="delimiter">'</span><span class="content">sample.FooView</span><span class="delimiter">'</span></span>
        controller = <span class="string"><span class="delimiter">'</span><span class="content">sample.FooController</span><span class="delimiter">'</span></span>
        config {
            key = <span class="string"><span class="delimiter">'</span><span class="content">bar</span><span class="delimiter">'</span></span>
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Values placed under this key become available to MVC members during the call to
<code><a href="api/griffon/core/artifact/GriffonMVCArtifact.html#mvcGroupInit()" target="_blank">mvcGroupInit()</a></code>, as part of the arguments sent to that method. Here&#8217;s how
the <code>FooController</code> can reach the key defined in the configuration</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="annotation">@ArtifactProviderFor</span>(GriffonController)
<span class="type">class</span> <span class="class">FooController</span> {
    <span class="type">void</span> mvcGroupInit(<span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; args) {
        println args.configuration.config.key
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>While being able to set additional values under this key is a certainly an advantage
it would probably be better if those values could be mutated or tweaked, probably
treating them as variables, effectively making a group configuration work as a template.
For that we&#8217;ll have to discuss the <code>MVCGroupManager</code> first.</p>
</div>
<div class="sect2">
<h3 id="_mvc_mvcmanager"><a class="anchor" href="#_mvc_mvcmanager"></a>4.1. The MVCGroupManager</h3>
<div class="paragraph">
<p>This class is responsible for holding the configuration of all MVC groups no matter
how they were defined, which can be either in <code>Config.groovy</code> or in an <a href="#_addon">addon</a> descriptor.</p>
</div>
<div class="paragraph">
<p>During the startup sequence an instance of <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code> will be created
and initialized. Later the application will instruct this instance to create all startup
groups as required. <code>MVCGroupManager</code> has a handful set of methods that deal with
MVC group configuration alone; however those that deal with group instantiation come
in 3 versions, with 2 flavors each (one Groovy, the other Java friendly).</p>
</div>
<div class="paragraph">
<p>Locating a group configuration is easily done by specifying the name you&#8217;re interested in finding</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">MVCGroupConfiguration configuration = application.mvcGroupManager.findConfiguration(<span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once you have a configuration reference you can instantiate a group with it by calling
any of the variants of the <code>create</code> method</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">MVCGroupConfiguration configuration = application.mvcGroupManager.findConfiguration(<span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>)
MVCGroup group1 = configuration.create(<span class="string"><span class="delimiter">'</span><span class="content">foo1</span><span class="delimiter">'</span></span>)
MVCGroup group2 = configuration.create(<span class="string"><span class="delimiter">'</span><span class="content">foo2</span><span class="delimiter">'</span></span>, [<span class="key">someKey</span>: <span class="string"><span class="delimiter">'</span><span class="content">someValue</span><span class="delimiter">'</span></span>])
<span class="comment">// the following will make the group's id match its name</span>
MVCGroup group3 = configuration.create()
MVCGroup group4 = configuration.create(<span class="key">someKey</span>: <span class="string"><span class="delimiter">'</span><span class="content">someValue</span><span class="delimiter">'</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Be aware that creating groups with the same name is usually not a good idea. The
default <code>MVCGroupManager</code> will complain when this happens and will automatically spit
out an exception. This behavior may be changed by setting a configuration key in <code>Config.groovy</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">griffon.mvcid.collision = <span class="string"><span class="delimiter">'</span><span class="content">warning</span><span class="delimiter">'</span></span> <span class="comment">// accepted values are 'warning', 'exception' (default)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The manager will log a warning and destroy the previously existing group before instantiating
the new one when <em>warning</em> is the preferred strategy .</p>
</div>
<div class="paragraph">
<p>Now, even though you can create group instances based on their configurations the preferred
way is to call any of <code><a href="api/griffon/core/mvc/MVCGroupManager.html#createMVCGroup()" target="_blank">createMVCGroup()</a></code>,
<code><a href="api/griffon/core/mvc/MVCGroupManager.html#buildMVCGroup()" target="_blank">buildMVCGroup()</a></code> or <code><a href="api/griffon/core/mvc/MVCGroupManager.html#withMVCGroup()" target="_blank">withMVCGroup()</a></code>
methods. Any class annotated with the <a href="#_mvc_mvcaware_transformation">@griffon.transform.MVCAware</a>
will also gain access to these methods.</p>
</div>
<div class="paragraph">
<p>Groups will be available by id regardless of how they were instantiated. You can ask
the <code>MVCGroupManager</code> for a particular group at any time, for example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">def</span> g1 = application.mvcGroupManager.groups.foo1
<span class="keyword">def</span> g2 = application.mvcGroupManager.findGroup(<span class="string"><span class="delimiter">'</span><span class="content">foo1</span><span class="delimiter">'</span></span>)
<span class="keyword">def</span> g3 = application.mvcGroupManager.foo1
<span class="keyword">assert</span> g1 == g2
<span class="keyword">assert</span> g1 == g3</code></pre>
</div>
</div>
<div class="paragraph">
<p>It&#8217;s also possible to query all models, views, controllers and builders on their own.
Say you&#8217;d want to inspect all currently instantiated models, this is how it can be done</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">application.mvcGroupManager.models.each { model -&gt;
    <span class="comment">// do something with model</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mvc_mvcgroups"><a class="anchor" href="#_mvc_mvcgroups"></a>4.2. MVC Groups</h3>
<div class="paragraph">
<p>Now that we know which are the different ways to instantiate MVC groups we can go
back to customizing them.</p>
</div>
<div class="paragraph">
<p>The simplest way is to pass in new values as part of the arguments map that
<code><a href="api/griffon/core/artifact/GriffonMVCArtifact.html#mvcGroupInit()" target="_blank">mvcGroupInit()</a></code> receives, for example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">MVCGroup group = application.mvcGroupManager.buildMVCGroup(<span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>, [<span class="key">key</span>: <span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>])</code></pre>
</div>
</div>
<div class="paragraph">
<p>However is you wish to use the special <code>config</code> key that every MVC group configuratio
 may have then you must instantiate the group in the following way</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">MVCGroupConfiguration configuration = application.mvcGroupManager
                                          .cloneMVCConfiguration(<span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>, [<span class="key">key</span>: <span class="string"><span class="delimiter">'</span><span class="content">someValue</span><span class="delimiter">'</span></span>])
MVCGroup group = configuration.create()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that you can still send custom arguments to the <code>create()</code> method.</p>
</div>
<div class="sect3">
<h4 id="_mvc_configuring_mvc_groups"><a class="anchor" href="#_mvc_configuring_mvc_groups"></a>4.2.1. Configuring MVC groups</h4>
<div class="paragraph">
<p>The following options are available to all MVC groups as long as you use the <code>config</code> key.</p>
</div>
<div class="sect4">
<h5 id="_disabling_lifecycle_events"><a class="anchor" href="#_disabling_lifecycle_events"></a>Disabling Lifecycle Events</h5>
<div class="paragraph">
<p>Every MVC group triggers a few events during the span of its lifetime. These events
will be sent to the event bus even if no component is interested in handling them.
There may be times when you don&#8217;t want these events to be placed in the event bus
in order to speed up group creation/destruction. Use the following configuration to
gain this effect:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">mvcGroups {
    <span class="comment">// MVC Group for &quot;sample&quot;</span>
    <span class="string"><span class="delimiter">'</span><span class="content">sample</span><span class="delimiter">'</span></span> {
        model      = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleModel</span><span class="delimiter">'</span></span>
        view       = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleView</span><span class="delimiter">'</span></span>
        controller = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleController</span><span class="delimiter">'</span></span>
        config {
            events {
                lifecycle = <span class="predefined-constant">false</span>
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following events will be disabled with this setting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><a href="#_events_application_events">InitializeMVCGroup</a></code></p>
</li>
<li>
<p><code><a href="#_events_application_events">CreateMVCGroup</a></code></p>
</li>
<li>
<p><code><a href="#_events_application_events">DestroyMVCGroup</a></code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_disabling_instantiation_events"><a class="anchor" href="#_disabling_instantiation_events"></a>Disabling Instantiation Events</h5>
<div class="paragraph">
<p>The Griffon runtime will trigger an event for every artifact it manages. As with
the previous events this one will be sent to the event bus even if no component handles
it. Skipping publication of this event may result in a slight increase of speed during
group instantiation. Use the following configuration to gain this effect:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">mvcGroups {
    <span class="comment">// MVC Group for &quot;sample&quot;</span>
    <span class="string"><span class="delimiter">'</span><span class="content">sample</span><span class="delimiter">'</span></span> {
        model      = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleModel</span><span class="delimiter">'</span></span>
        view       = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleView</span><span class="delimiter">'</span></span>
        controller = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleController</span><span class="delimiter">'</span></span>
        config {
            events {
                instantiation = <span class="predefined-constant">false</span>
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following events will be disabled with this setting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><a href="#_events_application_events">NewInstance</a></code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_disabling_destruction_events"><a class="anchor" href="#_disabling_destruction_events"></a>Disabling Destruction Events</h5>
<div class="paragraph">
<p>This is the counterpart of the <code>NewInstance</code> event. Skipping publication of this event
may result in a slight increase of speed when a group or any artifact instance is destroyed.
Use the following configuration to gain this effect:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">mvcGroups {
    <span class="comment">// MVC Group for &quot;sample&quot;</span>
    <span class="string"><span class="delimiter">'</span><span class="content">sample</span><span class="delimiter">'</span></span> {
        model      = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleModel</span><span class="delimiter">'</span></span>
        view       = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleView</span><span class="delimiter">'</span></span>
        controller = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleController</span><span class="delimiter">'</span></span>
        config {
            events {
                destruction = <span class="predefined-constant">false</span>
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following events will be disabled with this setting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><a href="#_events_application_events">DestroyInstance</a></code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_disabling_controllers_as_application_event_listeners"><a class="anchor" href="#_disabling_controllers_as_application_event_listeners"></a>Disabling Controllers as Application Event Listeners</h5>
<div class="paragraph">
<p>Controllers are registered as application event handlers by default when a group in
instantiated. This makes it very convenient to have them react to events placed in
the application&#8217;s event bus. However you may want to avoid this automatic registration
altogether, as it can lead to performance improvements. You can disable this feature
with the following configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">mvcGroups {
    <span class="comment">// MVC Group for &quot;sample&quot;</span>
    <span class="string"><span class="delimiter">'</span><span class="content">sample</span><span class="delimiter">'</span></span> {
        model      = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleModel</span><span class="delimiter">'</span></span>
        view       = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleView</span><span class="delimiter">'</span></span>
        controller = <span class="string"><span class="delimiter">'</span><span class="content">sample.SampleController</span><span class="delimiter">'</span></span>
        config {
            events {
                listener = <span class="predefined-constant">false</span>
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can still manually register a controller as an application event handler at any time,
with the caveat that it&#8217;s now your responsibility to unregister it when the time is
appropriate, most typically during the group&#8217;s destroy sequence when <code><a href="api/griffon/core/artifact/GriffonMVCArtifact.html#mvcGroupDestroy()" target="_blank">mvcGroupDestroy()</a></code>
is invoked.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mvc_mvcaware_transformation"><a class="anchor" href="#_mvc_mvcaware_transformation"></a>4.3. The @MVCAware Transformation</h3>
<div class="paragraph">
<p>Any component may gain the ability to create and destroy MVC groups through a <code>MVCGroupManager</code>
instance. You only need annotate the class with <code><a href="api/griffon/transform/MVCAware.html" target="_blank">@griffon.transform.MVCAware</a></code>
and it will automatically gain all methods exposed by <code><a href="api/griffon/core/mvc/MVCHandler.html" target="_blank">MVCHandler</a></code>.</p>
</div>
<div class="paragraph">
<p>This feature is just a shortcut to avoid reaching for the application instance
from objects that do not hold a reference to it.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of a custom bean that&#8217;s able to work with MVC groups</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="annotation">@griffon</span>.transform.MVCAware
<span class="type">class</span> <span class="class">Bean</span> {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This class can be used in the following way</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="type">class</span> <span class="class">SampleService</span> {
    <span class="annotation">@Inject</span> Bean bean

    <span class="type">void</span> buildSecondary(<span class="predefined-type">String</span> groupName) {
        <span class="keyword">def</span> (m, v, c) = bean.createMVCGroup(groupName)
        <span class="comment">// do something with m, v and c</span>
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_models"><a class="anchor" href="#_models"></a>5. Models</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_models_binding_swing"><a class="anchor" href="#_models_binding_swing"></a>5.1. Swing Binding</h3>

</div>
<div class="sect2">
<h3 id="_models_binding_javafx"><a class="anchor" href="#_models_binding_javafx"></a>5.2. JavaFX Binding</h3>

</div>
<div class="sect2">
<h3 id="_models_observable_transformation"><a class="anchor" href="#_models_observable_transformation"></a>5.3. The @Observable AST Transformation</h3>

</div>
<div class="sect2">
<h3 id="_models_vetoable_transformation"><a class="anchor" href="#_models_vetoable_transformation"></a>5.4. The @Vetoable AST Transformation</h3>

</div>
<div class="sect2">
<h3 id="_models_property_listener_transformation"><a class="anchor" href="#_models_property_listener_transformation"></a>5.5. The @PropertyListener AST Transformation</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_controllers"><a class="anchor" href="#_controllers"></a>6. Controllers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Controllers are the entry point for your application&#8217;s logic. Each controller has
access to their <code>model</code> and <code>view</code> instances from their respective MVC group.</p>
</div>
<div class="paragraph">
<p>Controller actions are defined as public methods on a controller class, for example
in Groovy you&#8217;d write</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>

<span class="annotation">@griffon</span>.metadata.ArtifactProviderFor(GriffonController)
<span class="type">class</span> <span class="class">SampleController</span> {
    <span class="keyword">def</span> model

    <span class="type">void</span> click() {
        model.clickCount++
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The corresponding code for Java 8 would be</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">sample</span>;

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>;

<span class="annotation">@griffon</span>.metadata.ArtifactProviderFor(GriffonController.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleController</span> {
    <span class="directive">private</span> <span class="predefined-type">SampleModel</span> model;

    <span class="directive">public</span> <span class="type">void</span> setModel(<span class="predefined-type">SampleModel</span> model) {
        <span class="local-variable">this</span>.model = model;
    }

    <span class="directive">public</span> <span class="type">void</span> click() {
        runInsideUIAsync(() -&gt; {
            model.setClickCount(model.getClickCount() + <span class="integer">1</span>);
        });
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Actions must follow these rules in order to be considered as such:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>must have public visibility modifier.</p>
</li>
<li>
<p>name does not match an event handler, i.e, it does not begin with <code>on</code>.</p>
</li>
<li>
<p>must pass <code><a href="api/griffon/util/GriffonClassUtils.html#isPlainMethod" target="_blank">GriffonClassUtils.isPlainMethod()</a></code>.</p>
</li>
<li>
<p>must have <code>void</code> as return type.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The application&#8217;s <code><a href="api/griffon/core/controller/ActionManager.html" target="_blank">ActionManager</a></code> will automatically configure an <code><a href="api/griffon/core/controller/Action.html" target="_blank">Action</a></code>
instance for each matching controller action. These <code>Action</code> instances can be later used
within Views to link them to UI components. The following example shows a Swing View
making use of the configured <code>clickAction</code> from <code>SampleController</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>

<span class="annotation">@griffon</span>.metadata.ArtifactProviderFor(GriffonView)
<span class="type">class</span> <span class="class">SampleView</span> {
    FactoryBuilderSupport builder
    <span class="predefined-type">SampleModel</span> model

    <span class="type">void</span> initUI() {
        builder.with {
            application(<span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">Clicker</span><span class="delimiter">'</span></span>, <span class="key">pack</span>: <span class="predefined-constant">true</span>)) {
                button(clickAction, <span class="key">label</span>: bind { model.clickCount })
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Controllers can perform other tasks too:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>listen to <a href="#_events_application_events">application events</a>.</p>
</li>
<li>
<p>react to MVC initialization/destruction via a pair of methods (<code>mvcGroupInit()</code>, <code>mvcGroupDestroy()</code>).</p>
</li>
<li>
<p>hold references to <a href="#_services">services</a>.</p>
</li>
<li>
<p>participate in dependency injection (members must be annotated with <code>@javax.inject.Inject</code>).</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_controllers_actions_and_threads"><a class="anchor" href="#_controllers_actions_and_threads"></a>6.1. Actions and Threads</h3>

</div>
<div class="sect2">
<h3 id="_controllers_actionmanager"><a class="anchor" href="#_controllers_actionmanager"></a>6.2. The ActionManager</h3>

</div>
<div class="sect2">
<h3 id="_controllers_action_interceptors"><a class="anchor" href="#_controllers_action_interceptors"></a>6.3. Action Interceptors</h3>
<div class="paragraph">
<p><code><a href="api/griffon/core/controller/ActionInterceptor.html" target="_blank">ActionInterceptor</a></code>s open a new set of possibilities by allowing developers
and <a href="#_addons">addon</a> authors to define code that should be executed before and after
any controller action is invoked by the framework. For example, you may want to protect
the execution of a particular action given specific permissions; the <code>shiro</code> plugin uses
annotations that are handled by an <code>ActionInterceptor</code>, like this</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>
<span class="keyword">import</span> <span class="include">griffon.plugins.shiro.annotation.*</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonController)
<span class="annotation">@RequiresAuthentication</span>
<span class="type">class</span> <span class="class">PrinterController</span> {
   <span class="annotation">@RequiresPermission</span>(<span class="string"><span class="delimiter">'</span><span class="content">printer:print</span><span class="delimiter">'</span></span>)
   <span class="type">void</span> print () { ... }

   <span class="annotation">@RequiresRoles</span>(<span class="string"><span class="delimiter">'</span><span class="content">administrator</span><span class="delimiter">'</span></span>)
   <span class="type">void</span> configure() { ... }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>scaffolding</code> plugin on the other hand modifies the arguments sent to the action.
Take the following snippet for example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>
<span class="keyword">import</span> <span class="include">griffon.plugins.shiro.annotation.*</span>
<span class="keyword">import</span> <span class="include">org.apache.shiro.authc.UsernamePasswordToken</span>
impprt org.apache.shiro.subject.Subject
<span class="keyword">import</span> <span class="include">javax.swing.JOptionPane</span>

<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonController)
<span class="type">class</span> <span class="class">StrutsController</span> {
    <span class="annotation">@Inject</span>
    <span class="directive">private</span> <span class="predefined-type">Subject</span> subject

    <span class="annotation">@RequiresGuest</span>
    <span class="type">void</span> login(LoginCommandObject cmd) {
        <span class="keyword">try</span> {
            subject.login(<span class="keyword">new</span> UsernamePasswordToken(cmd.username, cmd.password))
        } <span class="keyword">catch</span>(<span class="exception">Exception</span> e) {
            <span class="predefined-type">JOptionPane</span>.showMessageDialog(
                app.windowManager.findWindow(<span class="string"><span class="delimiter">'</span><span class="content">mainWindow</span><span class="delimiter">'</span></span>),
                <span class="string"><span class="delimiter">'</span><span class="content">Invalid username and/or password</span><span class="delimiter">'</span></span>,
                <span class="string"><span class="delimiter">'</span><span class="content">Security Failure</span><span class="delimiter">'</span></span>, <span class="predefined-type">JOptionPane</span>.ERROR_MESSAGE)
        }
    }

    <span class="annotation">@RequiresAuthentication</span>
    <span class="type">void</span> logout() {
        subject.logout()
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the <code>login</code> action requires an instance of <code>LoginCommandObject</code>. The <code>scaffolding</code>
plugin is aware of this fact; it will create an instance of said class, wire up an scaffolded
view in a dialog and present it to the user. The <code>LoginCommandObject</code> instance will be set
as the action&#8217;s arguments if it validates successfully, otherwise action execution is aborted.</p>
</div>
<div class="sect3">
<h4 id="_implementing_an_action_interceptor"><a class="anchor" href="#_implementing_an_action_interceptor"></a>6.3.1. Implementing an Action Interceptor</h4>
<div class="paragraph">
<p>Action interceptors must implement the <code><a href="api/griffon/core/controller/ActionInterceptor.html" target="_blank">ActionInterceptor</a></code> interface. There&#8217;s a
handy base class (<code>org.codehaus.griffon.runtime.core.controller.AbstractActionInterceptor</code>)
that provides sensible defaults. Say you&#8217;d want to know how much time it took for an action
to be executed, also if an exception occurred during its execution. This interceptor could
be implemented as follows</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> com.acme

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>
<span class="keyword">import</span> <span class="include">griffon.core.controller.ActionExecutionStatus</span>
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.controller.AbstractActionInterceptor</span>

<span class="keyword">import</span> <span class="include">javax.inject.Named</span>

<span class="annotation">@Named</span>(<span class="string"><span class="delimiter">'</span><span class="content">tracer</span><span class="delimiter">'</span></span>)
<span class="type">class</span> <span class="class">TracerActionInterceptor</span> <span class="directive">extends</span> AbstractActionInterceptor {
    <span class="directive">private</span> <span class="directive">final</span> <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Long</span>&gt; TIMES = [:]

    <span class="predefined-type">Object</span><span class="type">[]</span> before(GriffonController controller, <span class="predefined-type">String</span> actionName, <span class="predefined-type">Object</span><span class="type">[]</span> args) {
        TIMES[qualifyActionName(controller, actionName)] = <span class="predefined-type">System</span>.currentTimeMillis()
        <span class="keyword">return</span> <span class="local-variable">super</span>.before(controller, actionName, args)
    }

    <span class="type">void</span> after(ActionExecutionStatus status, GriffonController controller, <span class="predefined-type">String</span> actionName, <span class="predefined-type">Object</span><span class="type">[]</span> args) {
        <span class="predefined-type">String</span> qualifiedActionName = qualifyActionName(controller, actionName)
        <span class="type">long</span> time = <span class="predefined-type">System</span>.currentTimeMillis() - TIMES[qualifiedActionName]
        println(<span class="string"><span class="delimiter">&quot;</span><span class="content">Action </span><span class="inline"><span class="inline-delimiter">${</span>qualifiedActionName<span class="inline-delimiter">}</span></span><span class="content"> took </span><span class="inline"><span class="inline-delimiter">${</span>time<span class="inline-delimiter">}</span></span><span class="content"> ms [</span><span class="inline"><span class="inline-delimiter">${</span>status<span class="inline-delimiter">}</span></span><span class="content">]</span><span class="delimiter">&quot;</span></span>)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code><a href="api/griffon/core/controller/ActionInterceptor.html" target="_blank">ActionInterceptor</a></code>  interface defines a handful of methods that are invoked
by the <code><a href="api/griffon/core/controller/ActionManager.html" target="_blank">ActionManager</a></code> at very specific points during the lifetime and execution
of controller actions.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">void configure(GriffonController controller, String actionName, Method method)</dt>
<dd>
<p>The
<code>configure()</code> method is called during the configuration phase, when the <code>ActionManager</code>
creates the actions. This method is called once in the lifetime of an action.</p>
</dd>
<dt class="hdlist1">Object[] before(GriffonController controller, String actionName, Object[] args)</dt>
<dd>
<p>The
<code>before()</code> method is executed every time an action is about to be invoked. This method
is responsible for adjusting the arguments (if needed) or aborting the action execution
altogether. Any exception thrown by an interceptor in this method will halt action
execution however only <code><a href="api/griffon/core/controller/AbortActionExecution.html" target="_blank">AbortActionExecution</a></code> is interpreted as a graceful abort.</p>
</dd>
<dt class="hdlist1">boolean exception(Exception exception, GriffonController controller, String actionName, Object[] args)</dt>
<dd>
<p>The
<code>exception()</code> method is invoked only when an exception occurred during the action&#8217;s execution.
Implementors must return <code>true</code> if the exception was handled successfully. The exception will
be rethrown by the <code>ActionManager</code> if no interceptor handled the exception. This happens as the
last step of the action interception procedure.</p>
</dd>
<dt class="hdlist1">void after(ActionExecutionStatus status, GriffonController controller, String actionName, Object[] args)</dt>
<dd>
<p>The
<code>after()</code> method is called after an action has been executed. Any exceptions occurred during
the action&#8217;s execution should have been handled by <code>exception()</code>. The <code>status</code> argument
specifies if the action was successfully executed (<code>OK</code>), if it was aborted by an
interceptor (<code>ABORTERD</code>) or if an exception occurred during its execution (<code>EXCEPTION</code>).</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Action interceptors can participate in Dependency Injection.</p>
</div>
</div>
<div class="sect3">
<h4 id="_configuration"><a class="anchor" href="#_configuration"></a>6.3.2. Configuration</h4>
<div class="paragraph">
<p>Action Interceptors must be registered within a <code><a href="api/griffon/core/injection/Module.html" target="_blank">Module</a></code> in order to be picked
up by the <code>ActionManager</code>. The following example shows how the previous <code>TracerActionInterceptor</code>
can be registered in a <code>Module</code></p>
</div>
<div class="listingblock">
<div class="title">src/main/com/acme/ApplicationModule.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> com.acme

<span class="keyword">import</span> <span class="include">griffon.core.injection.Module</span>
<span class="keyword">import</span> <span class="include">griffon.core.controller.ActionInterceptor</span>
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.injection.AbstractModule</span>
<span class="keyword">import</span> <span class="include">org.kordamp.jipsy.ServiceProviderFor</span>

<span class="keyword">import</span> <span class="include">javax.inject.Named</span>

<span class="annotation">@ServiceProviderFor</span>(Module)
<span class="annotation">@Named</span>(<span class="string"><span class="delimiter">'</span><span class="content">application</span><span class="delimiter">'</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">ApplicationModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        bind(ActionInterceptor)
            .to(TracerActionInterceptor)
            .asSingleton()
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>An Interceptor may define a dependency on another interceptor; use the <code><a href="api/griffon/inject/DependsOn.html" target="_blank">@griffon.inject.DependsOn</a></code>
annotation to express the relationship.</p>
</div>
<div class="paragraph">
<p>It&#8217;s also possible to globally override the order of execution of interceptors, or
define and order when interceptors are orthogonal. Take for example the <code>security</code>
interceptor provided by the <code>shiro</code> plugin and the <code>scaffolding</code> interceptor provided by
<code>scaffolding</code> plugin. These interceptors know nothing about each other however <code>security</code>
should be called before <code>scaffolding</code>. This can be accomplished by adding the following
snippet to <code>Config.groovy</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">griffon.controller.action.interceptor.order = [<span class="string"><span class="delimiter">'</span><span class="content">security</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">scaffolding</span><span class="delimiter">'</span></span>]
----
:<span class="key">leveloffset</span>: <span class="integer">1</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_services"><a class="anchor" href="#_services"></a>6.4. Services</h3>

</div>
<div class="sect2">
<h3 id="_views"><a class="anchor" href="#_views"></a>6.5. Views</h3>

</div>
<div class="sect2">
<h3 id="_views_windowmanager"><a class="anchor" href="#_views_windowmanager"></a>6.6. The WindowManager</h3>

</div>
<div class="sect2">
<h3 id="_views_swing"><a class="anchor" href="#_views_swing"></a>6.7. Swing Specific</h3>

</div>
<div class="sect2">
<h3 id="_views_javafx"><a class="anchor" href="#_views_javafx"></a>6.8. JavaFX Specific</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_threading"><a class="anchor" href="#_threading"></a>7. Threading</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Building a well behaved multi-threaded desktop application has been a hard task for
many years, however it does not have to be that way anymore. The following sections
explain the threading facilities exposed by the Griffon framework.</p>
</div>
<div class="sect2">
<h3 id="_threading_sync"><a class="anchor" href="#_threading_sync"></a>7.1. Synchronous Calls</h3>

</div>
<div class="sect2">
<h3 id="_threading_async"><a class="anchor" href="#_threading_async"></a>7.2. Asynchronous Calls</h3>

</div>
<div class="sect2">
<h3 id="_threading_outside"><a class="anchor" href="#_threading_outside"></a>7.3. Outside Calls</h3>

</div>
<div class="sect2">
<h3 id="_threading_additional_methods"><a class="anchor" href="#_threading_additional_methods"></a>7.4. Additional Threading Methods</h3>

</div>
<div class="sect2">
<h3 id="_threading_annotation"><a class="anchor" href="#_threading_annotation"></a>7.5. The @Threading Annotation</h3>

</div>
<div class="sect2">
<h3 id="_threading_transformation"><a class="anchor" href="#_threading_transformation"></a>7.6. The @ThreadingAware AST Transformation</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_events"><a class="anchor" href="#_events"></a>8. Events</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Applications have the ability to publish events from time to time to communicate
that something of interest has happened at runtime. Events will be triggered by
the application during each of its life cycle phases, also when MVC groups are
created and destroyed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
All application event handlers are guaranteed to be called in the same thread
that originated the event.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_events_publishing"><a class="anchor" href="#_events_publishing"></a>8.1. Publishing Events</h3>
<div class="paragraph">
<p>Any instance that obtains a reference to an <code><a href="api/griffon/core/event/EventRouter.html" target="_blank">EventRouter</a></code> can publish events.
<code><a href="api/griffon/core/GriffonApplication.html" target="_blank">GriffonApplication</a></code> exposes the application wide <code>EventRouter</code> via a read-only
property. You may use Dependency Injection to inject an <code>EventRouter</code> to any class too.</p>
</div>
<div class="paragraph">
<p>Publishing an event can be done synchronously on the current thread, asynchronously to
the current thread, or asynchronously relative to the UI thread. For example, the following
snippet will trigger an event that will be handled in the same thread, which could be the
UI thread itself</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">application.eventRouter.publish(<span class="string"><span class="delimiter">'</span><span class="content">MyEventName</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">arg0</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">arg1</span><span class="delimiter">'</span></span>])</code></pre>
</div>
</div>
<div class="paragraph">
<p>Whereas the following snippet guarantees that all event handlers that are interested in
an event of type <code>MyEventName</code> will be called outside of the UI thread</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">application.eventRouter.publishOutsideUI(<span class="string"><span class="delimiter">'</span><span class="content">MyEventName</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">arg0</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">arg1</span><span class="delimiter">'</span></span>])</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, if you&#8217;d want event notification to be handed in a thread that is not the current
one (regardless if the current one is the UI thread or not) then use the following method</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">application.eventRouter.publishAsync(<span class="string"><span class="delimiter">'</span><span class="content">MyEventName</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">arg0</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">arg1</span><span class="delimiter">'</span></span>])</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you may specify an instance of a subclass of <code><a href="api/griffon/core/event/Event.html" target="_blank">Event</a></code> as the sole
argument to any of these methods. The event instance will be the single argument sent
to the event handlers when the <code>event</code> methods are invoked in this way.</p>
</div>
<div class="paragraph">
<p>There may be times when event publishing must be stopped for a while. If that&#8217;s the
case then you can instruct the application to stop delivering events by invoking the
following code</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">application.eventRouter.eventPublishingEnabled = <span class="predefined-constant">false</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Any events sent through the application&#8217;s event bus will be discarded after that call;
there&#8217;s no way to get them back or replay them. When it&#8217;s time to enable the event bus
again simply call</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">application.eventRouter.eventPublishingEnabled = <span class="predefined-constant">true</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_events_consuming"><a class="anchor" href="#_events_consuming"></a>8.2. Consuming events</h3>
<div class="paragraph">
<p>Any artifact or class that abides to the following conventions can be registered as
an application listener, those conventions are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>it is a Map, a <code><a href="api/griffon/core/CallableWithArgs.html" target="_blank">CallableWithArgs</a></code> or an Object.</p>
</li>
<li>
<p>in the case of a Map, each key maps to <code>&lt;EventName&gt;</code>, the value must be a CallableWithArgs.</p>
</li>
<li>
<p>in the case of object, public methods whose name matches <code>on&lt;EventName&gt;</code> will be used
as event handlers.</p>
</li>
<li>
<p>Objects and maps can be registered/unregistered by calling
<code>addApplicationListener()</code>/<code>removeApplicationListener()</code> on the <code>EventRouter</code> instance.</p>
</li>
<li>
<p>CallableWithArgs event handlers must be registered with an overloaded version of
<code>addApplicationListener()</code>/<code>removeApplicationListener()</code> that takes <code>&lt;EventName&gt;</code>
as the first parameter, and the callable itself as the second parameter.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There is a global, per-application event handler that can be registered. If you want
to take advantage of this feature you must define a class named <code>Events</code>. Lastly both
Controller and Service instances are automatically registered as application event
listeners.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
You can also write the <code>Events</code> class in Java.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_examples"><a class="anchor" href="#_examples"></a>8.2.1. Examples</h4>
<div class="paragraph">
<p>These are some examples of event handlers:</p>
</div>
<div class="paragraph">
<p>Display a message right before default MVC groups are instantiated</p>
</div>
<div class="listingblock">
<div class="title">src/main/Events.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">import</span> <span class="include">griffon.core.GriffonApplication</span>
<span class="keyword">import</span> <span class="include">griffon.core.event.EventHandler</span>

<span class="type">class</span> <span class="class">Events</span> <span class="directive">implements</span> <span class="predefined-type">EventHandler</span> {
    <span class="type">void</span> onBootstrapEnd(GriffonApplication application) {
        println <span class="string"><span class="delimiter">&quot;&quot;&quot;</span><span class="content">
            Application configuration has finished loading.
            MVC Groups will be initialized now.
        </span><span class="delimiter">&quot;&quot;&quot;</span></span>.stripIndent(<span class="integer">12</span>)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Print the name of the application plus a short message when the application is about to shut down.</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/controller/MyController.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="type">class</span> <span class="class">MyController</span> {
    <span class="type">void</span> onShutdownStart(application)
        println <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">${</span>application.configuration[<span class="string"><span class="delimiter">'</span><span class="content">application.title</span><span class="delimiter">'</span></span>]<span class="inline-delimiter">}</span></span><span class="content"> is shutting down</span><span class="delimiter">&quot;</span></span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Print a message every time the event "Foo" is published</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/controller/MyController.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="type">class</span> <span class="class">MyController</span> {
    <span class="type">void</span> mvcGroupInit(<span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; args) {
        application.eventRouter.addEventListener([
            <span class="key">Foo</span>: { println <span class="string"><span class="delimiter">'</span><span class="content">got foo!</span><span class="delimiter">'</span></span> } <span class="keyword">as</span> CallableWithArgs
        ])
    }

    <span class="type">void</span> fooAction() {
        <span class="comment">// do something</span>
        application.eventRouter.publish(<span class="string"><span class="delimiter">'</span><span class="content">Foo</span><span class="delimiter">'</span></span>)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>An alternative to the previous example using a <code>CallableWithArgs</code> event handler</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/controller/MyController.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="type">class</span> <span class="class">MyController</span> {
    <span class="type">void</span> mvcGroupInit(<span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; args) {
        application.eventRouter.addEventListener(<span class="string"><span class="delimiter">'</span><span class="content">Foo</span><span class="delimiter">'</span></span>,
            { println <span class="string"><span class="delimiter">'</span><span class="content">got foo!</span><span class="delimiter">'</span></span> } <span class="keyword">as</span> CallableWithArgs
        ])
    }

    <span class="type">void</span> fooAction() {
        <span class="comment">// do something</span>
        application.eventRouter.publish(<span class="string"><span class="delimiter">'</span><span class="content">Foo</span><span class="delimiter">'</span></span>)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>An alternative to the previous example using a custom event class</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/controller/MyController.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="type">class</span> <span class="class">MyController</span> {
    <span class="type">void</span> mvcGroupInit(<span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; args) {
        application.eventRouter.addListener(Foo) {
            e -&gt; <span class="keyword">assert</span> e <span class="keyword">instanceof</span> Foo
        }
    }

    <span class="type">void</span> fooAction() {
        <span class="comment">// do something</span>
        application.eventRouter.publish(<span class="keyword">new</span> MyController.Foo(<span class="local-variable">this</span>))
    }

    <span class="directive">static</span> <span class="type">class</span> <span class="class">Foo</span> <span class="directive">extends</span> griffon.core.Event {
        Foo(<span class="predefined-type">Object</span> source) { <span class="local-variable">super</span>(source) }
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_events_application_events"><a class="anchor" href="#_events_application_events"></a>8.3. Application Events</h3>
<div class="paragraph">
<p>The following events will be triggered by the application when dealing with artifacts</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">NewInstance(Class klass, Object instance)</dt>
<dd>
<p>When a new artifact is created.</p>
</dd>
<dt class="hdlist1">DestroyInstance(Class klass, Object instance)</dt>
<dd>
<p>When an artifact instance is destroyed.</p>
</dd>
<dt class="hdlist1">LoadAddonsStart(GriffonApplication application)</dt>
<dd>
<p>Before any <a href="#_addons">addons</a> are
initialized, during the <a href="#_overview_lifecycle_initialize">Initialize</a> phase.</p>
</dd>
<dt class="hdlist1">LoadAddonsEnd(GriffonApplication application, Map&lt;String, GriffonAddon&gt; addons)</dt>
<dd>
<p>After
all <a href="#_addons">addons</a> have been initialized, during the <a href="#_overview_lifecycle_initialize">Initialize</a> phase.</p>
</dd>
<dt class="hdlist1">LoadAddonStart(String name, GriffonAddon addon, GriffonApplication application)</dt>
<dd>
<p>Before
an addon is initialized, during the <a href="#_overview_lifecycle_initialize">Initialize</a> phase.</p>
</dd>
<dt class="hdlist1">LoadAddonEnd(String name, GriffonAddon addon, GriffonApplication application)</dt>
<dd>
<p>After
an addon has been initialized, during the <a href="#_overview_lifecycle_initialize">Initialize</a> phase.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>These events will be triggered when dealing with MVC groups</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">InitializeMVCGroup(MVCGroupConfiguration configuration, MVCGroup group)</dt>
<dd>
<p>When a new MVC
group is initialized.</p>
</dd>
<dt class="hdlist1">CreateMVCGroup(MVCGroup group)</dt>
<dd>
<p>When a new MVC group is created.</p>
</dd>
<dt class="hdlist1">DestroyMVCGroup(MVCGroup group)</dt>
<dd>
<p>When an MVC group is destroyed.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_events_lifecycle_events"><a class="anchor" href="#_events_lifecycle_events"></a>8.4. Lifecycle Events</h3>
<div class="paragraph">
<p>The following events will be triggered by the application during each one of its phases</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">BootstrapStart(GriffonApplication application)</dt>
<dd>
<p>After logging configuration has
been setup, during the <a href="#_overview_lifecycle_initialize">Initialize</a> phase.</p>
</dd>
<dt class="hdlist1">BootstrapEnd(GriffonApplication application)</dt>
<dd>
<p>At the end of the <a href="#_overview_lifecycle_initialize">Initialize</a> phase.</p>
</dd>
<dt class="hdlist1">StartupStart(GriffonApplication application)</dt>
<dd>
<p>At the beginning of the <a href="#_overview_lifecycle_startup">Startup</a> phase.</p>
</dd>
<dt class="hdlist1">StartupEnd(GriffonApplication application)</dt>
<dd>
<p>At the end of the <a href="#_overview_lifecycle_startup">Startup</a> phase.</p>
</dd>
<dt class="hdlist1">ReadyStart(GriffonApplication application)</dt>
<dd>
<p>At the beginning of the <a href="#_overview_lifecycle_ready">Ready</a> phase.</p>
</dd>
<dt class="hdlist1">ReadyEnd(GriffonApplication application)</dt>
<dd>
<p>At the end of the <a href="#_overview_lifecycle_ready">ready</a> phase.</p>
</dd>
<dt class="hdlist1">ShutdownRequested(GriffonApplication application)</dt>
<dd>
<p>Before the <a href="#_overview_lifecycle_shutdown">Shutdown</a> begins.</p>
</dd>
<dt class="hdlist1">ShutdownAborted(GriffonApplication application)</dt>
<dd>
<p>If a <code><a href="api/griffon/core/ShutdownHandler.html" target="_blank">ShutdownHandler</a></code> prevented
the application from entering the <a href="#_overview_lifecycle_shutdown">Shutdown</a> phase.</p>
</dd>
<dt class="hdlist1">ShutdownStart(GriffonApplication application)</dt>
<dd>
<p>At the beginning of the <a href="#_overview_lifecycle_shutdown">Shutdown</a> phase.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_events_miscellaneous_events"><a class="anchor" href="#_events_miscellaneous_events"></a>8.5. Miscellaneous Events</h3>
<div class="paragraph">
<p>These events will be triggered when a specific condition is reached</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">WindowShown(W window)</dt>
<dd>
<p>Triggered by the <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code> when a window is shown.</p>
</dd>
<dt class="hdlist1">WindowHidden(W window)</dt>
<dd>
<p>Triggered by the <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code> when a window is hidden.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_events_eventpublisher_transformation"><a class="anchor" href="#_events_eventpublisher_transformation"></a>8.6. The @EventPublisher AST Transformation</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_internationalization"><a class="anchor" href="#_internationalization"></a>9. Internationalization</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes Internationalization (<code>I18N</code>) features available to all applications.</p>
</div>
<div class="sect2">
<h3 id="_internationalization_message_source"><a class="anchor" href="#_internationalization_message_source"></a>9.1. MessageSource</h3>
<div class="paragraph">
<p>Applications have the ability to resolve internationalizable messages by leveraging
the behavior exposed by <code><a href="api/griffon/core/i18n/MessageSource.html" target="_blank">MessageSource</a></code>. This interface exposes the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>String getMessage(String key)</p>
</li>
<li>
<p>String getMessage(String key, Locale locale)</p>
</li>
<li>
<p>String getMessage(String key, Object[] args)</p>
</li>
<li>
<p>String getMessage(String key, Object[] args, Locale locale)</p>
</li>
<li>
<p>String getMessage(String key, List args)</p>
</li>
<li>
<p>String getMessage(String key, List args, Locale locale)</p>
</li>
<li>
<p>String getMessage(String key, Map args)</p>
</li>
<li>
<p>String getMessage(String key, Map args, Locale locale)</p>
</li>
<li>
<p>Object resolveMessageValue(String key, Locale locale)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first set throws <code>NoSuchMessageException</code> if a message could not be resolved given
the key sent as argument. The following methods take and additional <code>defaultMessage</code>
parameter that may be used if no configured message is found. If this optional parameter
were to be null then the <code>key</code> is used as the message; in other words, these methods
never throw <code>NoSuchMessageException</code> nor return <code>null</code> unless the passed in <code>key</code> is null.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>String getMessage(String key, String defaultMessage)</p>
</li>
<li>
<p>String getMessage(String key, Locale locale, String defaultMessage)</p>
</li>
<li>
<p>String getMessage(String key, Object[] args, String defaultMessage)</p>
</li>
<li>
<p>String getMessage(String key, Object[] args, Locale locale, String defaultMessage)</p>
</li>
<li>
<p>String getMessage(String key, List args, String defaultMessage)</p>
</li>
<li>
<p>String getMessage(String key, List args, Locale locale, String defaultMessage)</p>
</li>
<li>
<p>String getMessage(String key, Map args, String defaultMessage)</p>
</li>
<li>
<p>String getMessage(String key, Map args, Locale locale, String defaultMessage)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The simplest way to resolve a message thus results like this</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">getApplication().getMessageSource().getMessage(<span class="string"><span class="delimiter">'</span><span class="content">some.key</span><span class="delimiter">'</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The set of methods that take a <code>List</code> as arguments are meant to be used from Groovy
code whereas those that take an <code>Object[]</code> are meant for Java code; this leads to
better idiomatic code as the following examples reveal</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">getApplication().getMessageSource()
                .getMessage(<span class="string"><span class="delimiter">'</span><span class="content">groovy.message</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">apples</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">bananas</span><span class="delimiter">'</span></span>])</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java">getApplication().getMessageSource()
                .getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">java.message</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> <span class="predefined-type">Object</span><span class="type">[]</span>{<span class="string"><span class="delimiter">&quot;</span><span class="content">unicorns</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">rainbows</span><span class="delimiter">&quot;</span></span>});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Of course you may also use <code>List</code> versions in Java, like this</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java">getApplication().getMessageSource()
                .getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">hybrid.message</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">Arrays</span>.asList(<span class="string"><span class="delimiter">&quot;</span><span class="content">bells</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">whistles</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_message_formats"><a class="anchor" href="#_message_formats"></a>9.1.1. Message Formats</h4>
<div class="paragraph">
<p>There are three types of message formats supported by default. Additional formats may
be supported if the right plugins are installed. Resources may be configured using
either properties files or Groovy scripts, please refer to the
<a href="#_internationalization_message_source_configuration">configuration</a> section.</p>
</div>
<div class="sect4">
<h5 id="_standard_format"><a class="anchor" href="#_standard_format"></a>Standard Format</h5>
<div class="paragraph">
<p>The first set of message formats are those supported by the JDK&#8217;s
<code><a href="http://docs.oracle.com/javase/6/docs/api/java/text/MessageFormat.html">MessageFormat</a></code>
facilities. These formats work with all versions of the <code>getMessage()</code> method that
take a <code>List</code> or an <code>Object[]</code> as arguments. Examples follow. First the messages
stored in a properties file</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>healthy.proverb = An {0} a day keeps the {1} away
yoda.says = {0} is the path to the dark side. {0} leads to {1}. {1} leads to {2}. {2} leads to suffering.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then the code used to resolve them</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="predefined-type">String</span> quote = getApplication().getMessageSource()
                               .getMessage(<span class="string"><span class="delimiter">'</span><span class="content">healthy.proverb</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">apple</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">doctor</span><span class="delimiter">'</span></span>])
<span class="keyword">assert</span> quote == <span class="string"><span class="delimiter">'</span><span class="content">An apple a day keeps the doctor away</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="predefined-type">String</span> quote = getApplication().getMessageSource()
                               .getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">yoday.says</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> <span class="predefined-type">Object</span><span class="type">[]</span>{<span class="string"><span class="delimiter">&quot;</span><span class="content">Fear</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Anger</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Hate</span><span class="delimiter">&quot;</span></span>});
assertEquals(quote, <span class="string"><span class="delimiter">&quot;</span><span class="content">Fear is the path to the dark side. Fear leads to Anger. Anger leads to Hate. Hate leads to suffering</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_map_format"><a class="anchor" href="#_map_format"></a>Map Format</h5>
<div class="paragraph">
<p>The following format is non-standard (i.e, not supported by <code>MessageFormat</code>) and can
only be resolved by Griffon. This format uses symbols instead of numbers as placeholders
for arguments. Thus the previous messages can be rewritten as follows</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>healthy.proverb = An {:fruit} a day keeps the {:occupation} away
yoda.says = {:foo} is the path to the dark side. {:foo} leads to {:bar}. {:bar} leads to {:foobar}. {:foobar} leads to suffering.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which may be resolved in this manner</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="predefined-type">String</span> quote = getApplication().getMessageSource()
                               .getMessage(<span class="string"><span class="delimiter">'</span><span class="content">healthy.proverb</span><span class="delimiter">'</span></span>, [<span class="key">fruit</span>: <span class="string"><span class="delimiter">'</span><span class="content">apple</span><span class="delimiter">'</span></span>, <span class="key">occupation</span>: <span class="string"><span class="delimiter">'</span><span class="content">doctor</span><span class="delimiter">'</span></span>])
<span class="keyword">assert</span> quote == <span class="string"><span class="delimiter">'</span><span class="content">An apple a day keeps the doctor away</span></span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.util.CollectionUtils.map</span>;
<span class="predefined-type">String</span> quote = getApplication().getMessageSource()
                               .getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">yoday.says</span><span class="delimiter">&quot;</span></span>, map().e(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Fear</span><span class="delimiter">&quot;</span></span>)
                                                              .e(<span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Anger</span><span class="delimiter">&quot;</span></span>)
                                                              .e(<span class="string"><span class="delimiter">&quot;</span><span class="content">foobar</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Hate</span><span class="delimiter">&quot;</span></span>));
assertEquals(quote, <span class="string"><span class="delimiter">&quot;</span><span class="content">Fear is the path to the dark side. Fear leads to Anger. Anger leads to Hate. Hate leads to suffering</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_groovy_format"><a class="anchor" href="#_groovy_format"></a>Groovy format</h5>
<div class="paragraph">
<p>Groovy scripts have one advantage over properties files as you can embed custom logic
that may conditionally resolve a message based on environmental values or generate a
message on the fly. In order to accomplish this feat messages must be defined as
closures and must return a String value; if they do not then their return value will
be translated to a String. The following message uses the value of the current running
environment to determine the text of a warning to be displayed on a label</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">import</span> <span class="include">griffon.util.Environment</span>

warning.label = { args -&gt;
    <span class="keyword">if</span> (Environment.current == Environment.PRODUCTION) {
        <span class="string"><span class="delimiter">&quot;</span><span class="content">The application has encountered an error: </span><span class="inline"><span class="inline-delimiter">$</span>args</span><span class="delimiter">&quot;</span></span>
    } <span class="keyword">else</span> {
        <span class="string"><span class="delimiter">&quot;</span><span class="content">Somebody setup us the bomb! </span><span class="inline"><span class="inline-delimiter">$</span>args</span><span class="delimiter">&quot;</span></span>
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_reference_keys"><a class="anchor" href="#_reference_keys"></a>9.1.2. Reference Keys</h4>
<div class="paragraph">
<p>There may be times where you would want to have a 2 keys reference the same value,
as if one key were an alias for the other. <code>MessageSource</code> supports the notion of
referenced keys for this matter. In order to achieve this, the value of the alias
key must define the aliased key with a special format, for example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>famous.quote = This is {0}!
hello.world = @[famous.quote]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Resolving those keys results in</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">assert</span> getApplication()
           .getMessageSource()
           .getMessage(<span class="string"><span class="delimiter">'</span><span class="content">famous.quote</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">Sparta</span><span class="delimiter">'</span></span>]) == <span class="string"><span class="delimiter">'</span><span class="content">This is Sparta!</span><span class="delimiter">'</span></span>

<span class="keyword">assert</span> getApplication()
          .getMessageSource()
          .getMessage(<span class="string"><span class="delimiter">'</span><span class="content">hello.world</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">Griffon</span><span class="delimiter">'</span></span>]) == <span class="string"><span class="delimiter">'</span><span class="content">This is Griffon!</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_internationalization_message_source_configuration"><a class="anchor" href="#_internationalization_message_source_configuration"></a>9.2. MessageSource Configuration</h3>
<div class="paragraph">
<p>Messages may be configured in either properties files or Groovy scripts.
Groovy scripts have precedence over properties files should there be two files that
match the same <code>basename</code>. The default configured <code>basename</code> is "<code>messages</code>", thus
the application will search for the following resources in the classpath.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>messages.properties</p>
</li>
<li>
<p>messages.groovy</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Of course Groovy scripts are only enabled if you add a dependency to the <code>griffon-groovy</code>
module to your project. The default <code>basename</code> may be changed to some other value,
or additional basenames may be specified too; it&#8217;s just a matter of configuring a
<a href="api/griffon/core/injection/Module.html" target="_blank">Module</a> override</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="annotation">@ServiceProviderFor</span>(Module.class)
<span class="annotation">@Named</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">application</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@DependsOn</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">core</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">ApplicationModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        bind(MessageSource.class)
            .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">applicationMessageSource</span><span class="delimiter">&quot;</span></span>))
            .toProvider(<span class="keyword">new</span> MessageSourceProvider(<span class="string"><span class="delimiter">&quot;</span><span class="content">custom_basename</span><span class="delimiter">&quot;</span></span>))
            .asSingleton();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Both properties files and Groovy scripts are subject locale aware loading mechanism
described next. For a Locate set to <code>de_CH_Basel</code> the following resources will be
searched for and loaded</p>
</div>
<div class="ulist">
<ul>
<li>
<p>messages.properties</p>
</li>
<li>
<p>messages.groovy</p>
</li>
<li>
<p>messages_de.properties</p>
</li>
<li>
<p>messages_de.groovy</p>
</li>
<li>
<p>messages_de_CH.properties</p>
</li>
<li>
<p>messages_de_CH.groovy</p>
</li>
<li>
<p>messages_de_CH_Basel.properties</p>
</li>
<li>
<p>messages_de_CH_Basel.groovy</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Properties files and Groovy scripts used for internationalization purposes are usually
placed under <code>griffon-app/i18n</code> The default <code>messages.properties</code> file is placed in
this directory upon creating an application using the standard project templates.</p>
</div>
</div>
<div class="sect2">
<h3 id="_internationalization_message_source_transformation"><a class="anchor" href="#_internationalization_message_source_transformation"></a>9.3. The @MessageSourceAware AST Transformation</h3>
<div class="paragraph">
<p>Any component may gain the ability to resolve messages through a <code>MessageSource</code>
instance. You only need annotate the class with <code><a href="api/griffon/transform/MessageSourceAware.html" target="_blank">@griffon.transform.MessageSourceAware</a></code>
and it will automatically gain all methods exposed by <code><a href="api/griffon/core/i18n/MessageSource.html" target="_blank">MessageSource</a></code>.</p>
</div>
<div class="paragraph">
<p>This feature is just a shortcut to avoid reaching for the application instance
from objects that do not hold a reference to it.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of a custom bean that&#8217;s able to resolve messages</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="annotation">@griffon</span>.transform.MessageSourceAware
<span class="type">class</span> <span class="class">Bean</span> {
    <span class="predefined-type">String</span> name
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This class can be used in the following way</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="type">class</span> <span class="class">SampleService</span> {
    <span class="annotation">@Inject</span> Bean bean

    <span class="predefined-type">String</span> lookupValues(<span class="predefined-type">String</span> arg) {
        bean.name = arg
        bean.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">some.message.key</span><span class="delimiter">'</span></span>, [bean.name])
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The application&#8217;s <code>MessageSource</code> will be injected to annotated beans if no name is
specified as an argument to <code>MessageSourceAware</code>. You may define multiple <code>MessageSource</code>
bindings as long as you qualify them with a distinct name, such as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="annotation">@ServiceProviderFor</span>(Module.class)
<span class="annotation">@Named</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">application</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">ApplicationModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        bind(MessageSource.class)
            .withClassifier(AnnotationUtils.named(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>))
            .toProvider(<span class="keyword">new</span> MessageSourceProvider(<span class="string"><span class="delimiter">&quot;</span><span class="content">foofile</span><span class="delimiter">&quot;</span></span>))
            .asSingleton();

        bind(MessageSource.class)
            .withClassifier(AnnotationUtils.named(<span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span>))
            .toProvider(<span class="keyword">new</span> MessageSourceProvider(<span class="string"><span class="delimiter">&quot;</span><span class="content">barfile</span><span class="delimiter">&quot;</span></span>))
            .asSingleton();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then make use of any of these bindings like so</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="annotation">@griffon</span>.transform.MessageSourceAware(<span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>)
<span class="type">class</span> <span class="class">Bean</span> {
    <span class="predefined-type">String</span> name
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources"><a class="anchor" href="#_resources"></a>10. Resource Management</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes resource management and injection features available to all applications.</p>
</div>
<div class="sect2">
<h3 id="_resources_locating_resources"><a class="anchor" href="#_resources_locating_resources"></a>10.1. Locating Classpath Resources</h3>
<div class="paragraph">
<p>Resources can be loaded form the classpath using the standard mechanism provided by the
Java runtime, that is, ask a <code>ClassLoader</code> instance to load a resource <code>URL</code> or obtain
an <code>InputStream</code> that points to the resource.</p>
</div>
<div class="paragraph">
<p>But the code can get quite verbose, take for example the following view code that locates
a text file and displays it on a text component</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">scrollPane {
    textArea(<span class="key">columns</span>: <span class="integer">40</span>, <span class="key">rows</span>: <span class="integer">20</span>,
        <span class="key">text</span>: <span class="local-variable">this</span>.class.classLoader.getResource(<span class="string"><span class="delimiter">'</span><span class="content">someTextFile.txt</span><span class="delimiter">'</span></span>).text)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In order to reduce visual clutter, also to provide an abstraction over resource location,
applications rely on <code><a href="api/griffon/core/resources/ResourceHandler.html" target="_blank">ResourceHandler</a></code>, which exposes the following contract</p>
</div>
<div class="ulist">
<ul>
<li>
<p>URL getResourceAsURL(String name)</p>
</li>
<li>
<p>InputStream getResourceAsStream(String name)</p>
</li>
<li>
<p>List&lt;URL&gt; getResources(String name)</p>
</li>
<li>
<p>ClassLoader classloader()</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Thus, the previous example can be rewritten in this way</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">scrollPane {
    textArea(<span class="key">columns</span>: <span class="integer">40</span>, <span class="key">rows</span>: <span class="integer">20</span>,
        <span class="key">text</span>: application.resourceHandler.getResourceAsURL(<span class="string"><span class="delimiter">'</span><span class="content">someTextFile.txt</span><span class="delimiter">'</span></span>).text)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the future Griffon may switch to a modularized runtime, this abstraction will shield
you from any problems when the underlying mechanism changes, such as picking the correct
<code>ClassLoader</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_resources_resources_aware_transformation"><a class="anchor" href="#_resources_resources_aware_transformation"></a>10.2. The @ResourcesAware AST Transformation</h3>
<div class="paragraph">
<p>Any component may gain the ability to locate resources through a <code>ResourceHandler</code>
instance. You only need annotate the class with <code><a href="api/griffon/transform/ResourcesAware.html" target="_blank">@griffon.transform.ResourcesAware</a></code>
and it will automatically gain all methods exposed by <code><a href="api/griffon/core/resources/ResourceHandler.html" target="_blank">ResourceHandler</a></code>.</p>
</div>
<div class="paragraph">
<p>This feature is just a shortcut to avoid reaching for the application instance
from objects that do not hold a reference to it.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of a custom bean that&#8217;s able to locate resources</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="annotation">@griffon</span>.transform.ResourcesAware
<span class="type">class</span> <span class="class">Bean</span> {
    <span class="predefined-type">String</span> name
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This class can be used in the following way</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="type">class</span> <span class="class">SampleService</span> {
    <span class="annotation">@Inject</span> Bean bean

    <span class="predefined-type">InputStream</span> fetchResource(<span class="predefined-type">String</span> arg) {
        bean.name = arg
        bean.getResourceAsStream(bean.name)
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resources_resource_resolver"><a class="anchor" href="#_resources_resource_resolver"></a>10.3. ResourceResolver</h3>
<div class="paragraph">
<p>Applications have the ability to resolve internationalizable messages by leveraging
the behavior exposed by <code><a href="api/griffon/core/resources/ResourceResolver.html" target="_blank">ResourceResolver</a></code>. This interface exposes the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Object resolveResource(String key)</p>
</li>
<li>
<p>Object resolveResource(String key, Locale locale)</p>
</li>
<li>
<p>Object resolveResource(String key, Object[] args)</p>
</li>
<li>
<p>Object resolveResource(String key, Object[] args, Locale locale)</p>
</li>
<li>
<p>Object resolveResource(String key, List args)</p>
</li>
<li>
<p>Object resolveResource(String key, List args, Locale locale)</p>
</li>
<li>
<p>Object resolveResource(String key, Map args)</p>
</li>
<li>
<p>Object resolveResource(String key, Map args, Locale locale)</p>
</li>
<li>
<p>Object resolveResorceValue(String key, Locale locale)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first set throws <code>NoSuchResourceException</code> if a message could not be resolved given
the key sent as argument. The following methods take and additional <code>defaultValue</code>
parameter that may be used if no configured resource is found. If this optional parameter
were to be null then the <code>key</code> is used as the literal value of the resource; in other words,
these methods never throw <code>NoSuchResourceException</code> nor return <code>null</code> unless the passed
in <code>key</code> is null.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Object resolveResource(String key, Object defaultValue)</p>
</li>
<li>
<p>Object resolveResource(String key, Locale locale, Object defaultValue)</p>
</li>
<li>
<p>Object resolveResource(String key, Object[] args, Object defaultValue)</p>
</li>
<li>
<p>Object resolveResource(String key, Object[] args, Locale locale, Object defaultValue)</p>
</li>
<li>
<p>Object resolveResource(String key, List args, Object defaultValue)</p>
</li>
<li>
<p>Object resolveResource(String key, List args, Locale locale, Object defaultValue)</p>
</li>
<li>
<p>Object resolveResource(String key, Map args, Object defaultValue)</p>
</li>
<li>
<p>Object resolveResource(String key, Map args, Locale locale, Object defaultValue)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The simplest way to resolve a message thus results like this</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">getApplication().getResourceResolver().resolveResource(<span class="string"><span class="delimiter">'</span><span class="content">menu.icon</span><span class="delimiter">'</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The set of methods that take a <code>List</code> as arguments are meant to be used from Groovy
code whereas those that take an <code>Object[]</code> are meant for Java code; this leads to
better idiomatic code as the following examples reveal</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy">getApplication().getResourceResolver()
                .resolveResource(<span class="string"><span class="delimiter">'</span><span class="content">groovy.icon.resource</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">small</span><span class="delimiter">'</span></span>]))</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java">getApplication().getResourceResolver()
                .resolveResource(<span class="string"><span class="delimiter">&quot;</span><span class="content">java.icon.resource</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> <span class="predefined-type">Object</span><span class="type">[]</span>{<span class="string"><span class="delimiter">&quot;</span><span class="content">large</span><span class="delimiter">&quot;</span></span>});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Of course you may also use <code>List</code> versions in Java, like this</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java">getApplication().getResourceResolver()
                .resolveResource(<span class="string"><span class="delimiter">&quot;</span><span class="content">hybrid.icon.resource</span><span class="delimiter">&quot;</span></span>, <span class="predefined-type">Arrays</span>.asList(<span class="string"><span class="delimiter">&quot;</span><span class="content">medium</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_message_formats_2"><a class="anchor" href="#_message_formats_2"></a>10.3.1. Message Formats</h4>
<div class="paragraph">
<p>There are three types of resource formats supported by default. Additional formats may
be supported if the right plugins are installed. Resources may be configured using
either properties files or Groovy scripts, please refer to the
<a href="#_resources_resource_resolver_configuration">configuration</a> section.</p>
</div>
<div class="sect4">
<h5 id="_standard_format_2"><a class="anchor" href="#_standard_format_2"></a>Standard Format</h5>
<div class="paragraph">
<p>The first set of resource formats are those supported by the JDK&#8217;s
<code><a href="http://docs.oracle.com/javase/6/docs/api/java/text/MessageFormat.html">MessageFormat</a></code>
facilities. These formats work with all versions of the <code>resolveResource()</code> method that
take a <code>List</code> or an <code>Object[]</code> as arguments. Examples follow. First the resource
definitions stored in a properties file</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>menu.icon = /img/icons/menu-{0}.png</code></pre>
</div>
</div>
<div class="paragraph">
<p>Assuming there are three icon files stored at <code>griffon-app/resources/img/icons</code> whose
filenames are <code>menu-small.png</code>, <code>menu-medium.png</code> and <code>menu-large.png</code>, a component may
resolve any of them with</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="predefined-type">Object</span> icon = getApplication().getResourceResolver()
                              .resolveResource(<span class="string"><span class="delimiter">'</span><span class="content">menu.icon</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">large</span><span class="delimiter">'</span></span>])</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_map_format_2"><a class="anchor" href="#_map_format_2"></a>Map Format</h5>
<div class="paragraph">
<p>The following format is non-standard (i.e, not supported by <code>MessageFormat</code>) and can
only be resolved by Griffon. This format uses symbols instead of numbers as placeholders
for arguments. Thus the previous messages can be rewritten as follows</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>menu.icon = /img/icons/menu-{:size}.png</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which may be resolved in this manner</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="predefined-type">Object</span> icon = getApplication().getResourceResolver()
                              .resolveResource(<span class="string"><span class="delimiter">'</span><span class="content">menu.icon</span><span class="delimiter">'</span></span>, [<span class="key">size</span>: <span class="string"><span class="delimiter">'</span><span class="content">large</span><span class="delimiter">'</span></span>])</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_groovy_format_2"><a class="anchor" href="#_groovy_format_2"></a>Groovy format</h5>
<div class="paragraph">
<p>Groovy scripts have one advantage over properties files as you can embed custom logic
that may conditionally resolve a resource based on environmental values or generate a
message on the fly. In order to accomplish this feat resources must be defined as
closures. The following message uses the value of the current running environment
to determine the text of a warning to be displayed on a label</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">import</span> <span class="include">java.awt.Rectangle</span>

direct.instance = <span class="keyword">new</span> <span class="predefined-type">Rectangle</span>(<span class="integer">10</span>i, <span class="integer">20</span>i, <span class="integer">30</span>i, <span class="integer">40</span>i)
computed.instance = { x, y, w, h -&gt;
    <span class="keyword">new</span> <span class="predefined-type">Rectangle</span>(x, y, w, h)
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_type_conversion"><a class="anchor" href="#_type_conversion"></a>10.3.2. Type Conversion</h4>
<div class="paragraph">
<p>Note that the return value of <code>resolveResource</code> is marked as <code>Object</code> but you&#8217;ll get
a <code>String</code> from the first two formats. You&#8217;ll have to rely on <a href="#_resources_property_editors">property editors</a>
in order to transform the value into the correct type. <a href="#_resources_injected_resources">Injected resources</a>
are automatically transformed to the expected type.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s how it can be done</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">import</span> <span class="include">javax.swing.Icon</span>
<span class="keyword">import</span> <span class="include">java.beans.PropertyEditor</span>
<span class="keyword">import</span> <span class="include">java.beans.PropertyEditorManager</span>
...
Object iconValue = getApplication().getResourceResolver()
                                   .resolveResource(<span class="string"><span class="delimiter">'</span><span class="content">menu.icon</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">large</span><span class="delimiter">'</span></span>])
<span class="predefined-type">PropertyEditor</span> propertyEditor = <span class="predefined-type">PropertyEditorManager</span>.findEditor(<span class="predefined-type">Icon</span>)
propertyEditor.setAsText(<span class="predefined-type">String</span>.valueOf(iconValue))
<span class="predefined-type">Icon</span> icon = propertyEditor.getValue()</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_reference_keys_2"><a class="anchor" href="#_reference_keys_2"></a>10.3.3. Reference Keys</h4>
<div class="paragraph">
<p>There may be times where you would want to have a 2 keys reference the same value,
as if one key were an alias for the other. <code>ResourceResolver</code> supports the notion of
referenced keys for this matter. In order to achieve this, the value of the alias
key must define the aliased key with a special format, for example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>action.icon = /img/icons/action-{0}.png
hello.icon = @[action.icon]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Resolving those keys results in</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">assert</span> getApplication()
           .getResourceResolver()
           .resolveResource(<span class="string"><span class="delimiter">'</span><span class="content">action.icon</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">copy</span><span class="delimiter">'</span></span>]) == <span class="string"><span class="delimiter">'</span><span class="content">/img/icons/action-copy.png</span><span class="delimiter">'</span></span>

<span class="keyword">assert</span> getApplication()
           .getResourceResolver()
           .resolveResource(<span class="string"><span class="delimiter">'</span><span class="content">hello.icon</span><span class="delimiter">'</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">paste</span><span class="delimiter">'</span></span>]) == <span class="string"><span class="delimiter">'</span><span class="content">/img/icons/action-paste.png</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resources_resource_resolver_configuration"><a class="anchor" href="#_resources_resource_resolver_configuration"></a>10.4. ResourceResolver Configuration</h3>
<div class="paragraph">
<p>Resources may be configured in either properties files or Groovy scripts.
Groovy scripts have precedence over properties files should there be two files that
match the same <code>basename</code>. The default configured <code>basename</code> is "<code>resources</code>", thus
the application will search for the following resources in the classpath.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>resources.properties</p>
</li>
<li>
<p>resources.groovy</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Of course Groovy scripts are only enabled if you add a dependency to the <code>griffon-groovy</code>
module to your project. The default <code>basename</code> may be changed to some other value,
or additional basenames may be specified too; it&#8217;s just a matter of configuring a
<a href="api/griffon/core/injection/Module.html" target="_blank">Module</a> override</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="annotation">@ServiceProviderFor</span>(Module.class)
<span class="annotation">@Named</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">application</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@DependsOn</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">core</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">ApplicationModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        bind(ResourceResolver.class)
            .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">applicationResourceResolver</span><span class="delimiter">&quot;</span></span>))
            .toProvider(<span class="keyword">new</span> ResourceResolverProvider(<span class="string"><span class="delimiter">&quot;</span><span class="content">custom_basename</span><span class="delimiter">&quot;</span></span>))
            .asSingleton();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Both properties files and Groovy scripts are subject locale aware loading mechanism
described next. For a Locate set to <code>de_CH_Basel</code> the following resources will be
searched for and loaded</p>
</div>
<div class="ulist">
<ul>
<li>
<p>resources.properties</p>
</li>
<li>
<p>resources.groovy</p>
</li>
<li>
<p>resources_de.properties</p>
</li>
<li>
<p>resources_de.groovy</p>
</li>
<li>
<p>resources_de_CH.properties</p>
</li>
<li>
<p>resources_de_CH.groovy</p>
</li>
<li>
<p>resources_de_CH_Basel.properties</p>
</li>
<li>
<p>resources_de_CH_Basel.groovy</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Properties files and Groovy scripts used for internationalization purposes are usually
placed under <code>griffon-app/resources</code> The default <code>resources.properties</code> file is placed in
this directory upon creating an application using the standard project templates.</p>
</div>
</div>
<div class="sect2">
<h3 id="_resources_resource_resolver_transformation"><a class="anchor" href="#_resources_resource_resolver_transformation"></a>10.5. The @ResourceResolverAware AST Transformation</h3>
<div class="paragraph">
<p>Any component may gain the ability to resolve resources through a <code>ResourceResolver</code>
instance. You only need annotate the class with <code><a href="api/griffon/transform/ResourceResolverAware.html" target="_blank">@griffon.transform.ResourceResolverAware</a></code>
and it will automatically gain all methods exposed by <code><a href="api/griffon/core/resources/ResourceResolver.html" target="_blank">ResourceResolver</a></code>.</p>
</div>
<div class="paragraph">
<p>This feature is just a shortcut to avoid reaching for the application instance
from objects that do not hold a reference to it.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of a custom bean that&#8217;s able to resolve resources</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="annotation">@griffon</span>.transform.ResourceResolverAware
<span class="type">class</span> <span class="class">Bean</span> {
    <span class="predefined-type">String</span> name
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This class can be used in the following way</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="type">class</span> <span class="class">SampleService</span> {
    <span class="annotation">@Inject</span> Bean bean

    <span class="predefined-type">String</span> lookupValues(<span class="predefined-type">String</span> arg) {
        bean.name = arg
        bean.resolveResource(<span class="string"><span class="delimiter">'</span><span class="content">some.resource.key</span><span class="delimiter">'</span></span>, [bean.name])
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The application&#8217;s <code>ResourceResolver</code> will be injected to annotated beans if no name is
specified as an argument to <code>ResourceResolverAware</code>. You may define multiple <code>ResourceResolver</code>
bindings as long as you qualify them with a distinct name, such as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="annotation">@ServiceProviderFor</span>(Module.class)
<span class="annotation">@Named</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">application</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">ApplicationModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        bind(ResourceResolver.class)
            .withClassifier(AnnotationUtils.named(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>))
            .toProvider(<span class="keyword">new</span> ResourceResolverProvider(<span class="string"><span class="delimiter">&quot;</span><span class="content">foofile</span><span class="delimiter">&quot;</span></span>))
            .asSingleton();

        bind(ResourceResolver.class)
            .withClassifier(AnnotationUtils.named(<span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span>))
            .toProvider(<span class="keyword">new</span> ResourceResolverProvider(<span class="string"><span class="delimiter">&quot;</span><span class="content">barfile</span><span class="delimiter">&quot;</span></span>))
            .asSingleton();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then make use of any of these bindings like so</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="annotation">@griffon</span>.transform.ResourceResolverAware(<span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>)
<span class="type">class</span> <span class="class">Bean</span> {
    <span class="predefined-type">String</span> name
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resources_injected_resources"><a class="anchor" href="#_resources_injected_resources"></a>10.6. Resource Injection</h3>
<div class="paragraph">
<p>Resources may be automatically injected to any instance created via the application&#8217;s
<code>Injector</code>. Injection points must be annotated with <code><a href="api/griffon/core/resources/InjectedResource.html" target="_blank">@griffon.core.resources.InjectedResource</a></code>
which can be set on properties (Groovy), fields (Java and Groovy) and setter methods (Java and Groovy).
@InjectedResource is a perfect companion to <a href="#_models">models</a> as the following example shows</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/resources/resources.properties</div>
<div class="content">
<pre class="CodeRay"><code>sample.SampleModel.griffonLogo = /griffon-logo-48x48.png
logo = /griffon-logo-{0}x{0}.png</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">griffon-app/models/sample/SampleModel.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">griffon.core.resources.InjectedResource</span>
<span class="keyword">import</span> <span class="include">javax.swing.Icon</span>

<span class="type">class</span> <span class="class">SampleModel</span> {
    <span class="annotation">@InjectedResource</span> <span class="predefined-type">Icon</span> griffonLogo
    <span class="annotation">@InjectedResource</span>(key=<span class="string"><span class="delimiter">'</span><span class="content">logo</span><span class="delimiter">'</span></span>, args=[<span class="string"><span class="delimiter">'</span><span class="content">16</span><span class="delimiter">'</span></span>]) <span class="predefined-type">Icon</span> smallGriffonLogo
    <span class="annotation">@InjectedResource</span>(key=<span class="string"><span class="delimiter">'</span><span class="content">logo</span><span class="delimiter">'</span></span>, args=[<span class="string"><span class="delimiter">'</span><span class="content">64</span><span class="delimiter">'</span></span>]) <span class="predefined-type">Icon</span> largeGriffonLogo
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@InjectedResource</code> assumes a naming convention in order to determine the resource key
to use. These are the rules applied by the default by <code><a href="api/griffon/core/resources/ResourcesInjector.html" target="_blank">ResourcesInjector</a></code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If a value is specified for the <code>key</code> argument then use it as is.</p>
</li>
<li>
<p>otherwise construct a key based in the field name prefixed with the full qualified
class name of the field&#8217;s owner.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You may also specify a default value if the resource definition is not found, however
be aware that this value must be set as a String thus guaranteeing a type conversion.
An optional <code>format</code> value may be specified as a hint to the PropertyEditor used during
value conversion, for example</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/models/sample/SampleModel.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">griffon.core.resources.InjectedResource</span>
<span class="type">class</span> <span class="class">SampleModel</span> {
    <span class="annotation">@InjectedResource</span>(defaultValue=<span class="string"><span class="delimiter">'</span><span class="content">10.04.2013 2:30 PM</span><span class="delimiter">'</span></span>, format=<span class="string"><span class="delimiter">'</span><span class="content">dd.MM.yyyy h:mm a</span><span class="delimiter">'</span></span>)
    <span class="predefined-type">Date</span> date
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resources_property_editors"><a class="anchor" href="#_resources_property_editors"></a>10.7. Property Editors</h3>
<div class="paragraph">
<p>Resource injection makes use of the <a href="http://docs.oracle.com/javase/6/docs/api/java/beans/PropertyEditor.html">PropertyEditor</a>
mechanism provided by the <code>java.beans</code> package. The default <code><a href="api/griffon/core/resources/ResourcesInjector.html" target="_blank">ResourcesInjector</a></code> queries
<code><a href="http://docs.oracle.com/javase/6/docs/api/java/beans/PropertyEditorManager.html">PropertyEditorManager</a></code>
whenever a resource value must be transformed to a target type.</p>
</div>
<div class="paragraph">
<p>PropertyEditorManager provides methods for registering custom PropertyEditors, it also
follows a class name convention to load PropertyEditors should a custom one is not
programmatically registered. Griffon applications will automatically load and register
PropertyEditors from the following classpath resource: <code>/META-INF/services/java.beans.PropertyEditor</code>.
Each line follows the format</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>target.type = full.qualified.classname</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following table enumerates the default PropertyEditors loaded by Griffon at startup.
Plugins such as <code>griffon-swing</code> and <code>griffon-javafx</code> may register additional editors.</p>
</div>
<table class="tableblock frame-all grid-all" style="width:100%; ">
<colgroup>
<col style="width:50%;">
<col style="width:50%;"> 
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Editor Class</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.lang.String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.StringPropertyEditor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.io.File</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.FilePropertyEditor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.net.URL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.URLPropertyEditor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.net.URI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.URIPropertyEditor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.math.BigDecimal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.BigDecimalPropertyEditor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.math.BigInteger</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.BigIntegerPropertyEditor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.lang.Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.BooleanPropertyEditor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.lang.Byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.BytePropertyEditor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.lang.Short</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.ShortPropertyEditor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.lang.Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.IntegerPropertyEditor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.lang.Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.LongPropertyEditor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.lang.Float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.FloatPropertyEditor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.lang.Double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.DoublePropertyEditor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.util.Calendar</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.CalendarPropertyEditor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.util.Date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">griffon.core.editors.DatePropertyEditor</p></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_addons"><a class="anchor" href="#_addons"></a>11. Addons</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_addons-addonmanager"><a class="anchor" href="#_addons-addonmanager"></a>11.1. The AddonManager</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_testing"><a class="anchor" href="#_testing"></a>12. Testing</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_contributing"><a class="anchor" href="#_contributing"></a>13. Contributing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Griffon is an open source project with an active community and we rely heavily on
that community to help make Griffon better. As such, there are various ways in which
people can contribute to Griffon. One of these is by writing plugins and making them
publicly available. In this chapter, we&#8217;ll look at some of the other options.</p>
</div>
<div class="sect2">
<h3 id="_contributing_issues"><a class="anchor" href="#_contributing_issues"></a>13.1. Issues</h3>
<div class="paragraph">
<p>Griffon uses <a href="http://jira.codehaus.org/browse/griffon">JIRA</a> to track issues in the
ore framework, its documentation, its website, and many of the public plugins. If
you&#8217;ve found a bug or wish to see a particular feature added, this is the place to
start. You&#8217;ll need to create a (free) JIRA account in order to either submit an issue
or comment on an existing one.</p>
</div>
<div class="paragraph">
<p>When submitting issues, please provide as much information as possible and in the
case of bugs, make sure you explain which versions of Griffon and various plugins
you are using. Also, an issue is much more likely to be dealt with if you attach
a reproducible sample application.</p>
</div>
<div class="sect3">
<h4 id="_reviewing_issues"><a class="anchor" href="#_reviewing_issues"></a>13.1.1. Reviewing issues</h4>
<div class="paragraph">
<p>There are quite a few old issues in JIRA, some of which may no longer be valid.
The core team can&#8217;t track down these alone, so a very simple contribution that you
can make is to verify one or two issues occasionally.</p>
</div>
<div class="paragraph">
<p>Which issues need verification? A shared <a href="http://jira.codehaus.org/secure/IssueNavigator.jspa?reset=true&amp;jqlQuery=project+%3D+GRIFFON+AND+resolution+%3D+Unresolved+ORDER+BY+updated+DESC">JIRA filter</a>
will display all issues that haven&#8217;t been resolved. Just pick one or two of them
and check whether they are still relevant.</p>
</div>
<div class="paragraph">
<p>Once you&#8217;ve verified an issue, simply edit it by adding a "Last Reviewed" comment.
If you think the issue can be closed, then also add a "Flagged" comment and a short
explanation why.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_contributing_build"><a class="anchor" href="#_contributing_build"></a>13.2. Build</h3>
<div class="paragraph">
<p>If you&#8217;re interested in contributing fixes and features to the core framework, you
will have to learn how to get hold of the project&#8217;s source, build it and test it
with your own applications. Before you start, make sure you have:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A JDK (1.7 or above)</p>
</li>
<li>
<p>A git client</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once you have all the pre-requisite packages installed, the next step is to download
the Griffon source code, which is hosted at <a href="http://github.com">GitHub</a> in several
repositories owned by the <a href="http://github.com/griffon"><code>griffon</code> GitHub user</a>. This
is a simple case of cloning the repository you&#8217;re interested in. For example, to
get the core framework run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>$ git clone https://github.com/griffon/griffon.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will create a <code>griffon</code> directory in your current working directory containing
all the project source files. The next step is to get a Griffon installation from the source.</p>
</div>
<div class="sect3">
<h4 id="_running_the_test_suite"><a class="anchor" href="#_running_the_test_suite"></a>13.2.1. Running the test suite</h4>
<div class="paragraph">
<p>All you have to do to run the full suite of tests is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>$ ./gradlew test</code></pre>
</div>
</div>
<div class="paragraph">
<p>These will take a while, so consider running individual tests using the command line.
For example, to run the test case @MappingDslTests@ simply execute the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>$ ./gradlew -Dtest.single=EnvironmentTests :griffon-core:test</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that you need to specify the sub-project that the test case resides in, because
the top-level "test" target won&#8217;t work&#8230;.</p>
</div>
</div>
<div class="sect3">
<h4 id="_developing_in_intellij_idea"><a class="anchor" href="#_developing_in_intellij_idea"></a>13.2.2. Developing in IntelliJ IDEA</h4>
<div class="paragraph">
<p>You need to run the following gradle task:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>$ ./gradlew idea</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then open the project file which is generated in IDEA. Simple!</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_contributing_patches"><a class="anchor" href="#_contributing_patches"></a>13.3. Patches</h3>
<div class="paragraph">
<p>If you want to submit patches to the project, you simply need to fork the repository
on GitHub rather than clone it directly. Then you will commit your changes to your
fork and send a pull request for a core team member to review.</p>
</div>
<div class="sect3">
<h4 id="_forking_and_pull_requests"><a class="anchor" href="#_forking_and_pull_requests"></a>13.3.1. Forking and Pull Requests</h4>
<div class="paragraph">
<p>One of the benefits of <a href="http://github.com">GitHub</a> is the way that you can easily
contribute to a project by <a href="http://help.github.com/fork-a-repo/">forking the repository</a>
and <a href="http://help.github.com/send-pull-requests/">sending pull requests</a> with your changes.</p>
</div>
<div class="paragraph">
<p>What follows are some guidelines to help ensure that your pull requests are speedily
dealt with and provide the information we need. They will also make your life easier!</p>
</div>
<h5 id="_create_a_local_branch_for_your_changes" class="discrete">Create a local branch for your changes</h5>
<div class="paragraph">
<p>Your life will be greatly simplified if you create a local branch to make your changes
on. For example, as soon as you fork a repository and clone the fork locally, execute</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>$ git checkout -b mine</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will create a new local branch called <code>mine</code> based off the <code>master</code> branch.
Of course, you can name the branch whatever you like - you don&#8217;t have to use <code>mine</code>.</p>
</div>
<h5 id="_create_jiras_for_non_trivial_changes" class="discrete">Create JIRAs for non-trivial changes</h5>
<div class="paragraph">
<p>For any non-trivial changes, raise a JIRA issue if one doesn&#8217;t already exist. That
helps us keep track of what changes go into each new version of Griffon.</p>
</div>
<h5 id="_include_jira_issue_id_in_commit_messages" class="discrete">Include JIRA issue ID in commit messages</h5>
<div class="paragraph">
<p>This may not seem particularly important, but having a JIRA issue ID in a commit
message means that we can find out at a later date why a change was made. Include
the ID in any and all commits that relate to that issue. If a commit isn&#8217;t related
to an issue, then there&#8217;s no need to include an issue ID.</p>
</div>
<h5 id="_make_sure_your_fork_is_up_to_date" class="discrete">Make sure your fork is up to date</h5>
<div class="paragraph">
<p>Since the core developers must merge your commits into the main repository, it makes
life much easier if your fork on GitHub is up to date before you send a pull request.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s say you have the main repository set up as a remote called <code>upstream</code> and you
want to submit a pull request. Also, all your changes are currently on the local <code>mine</code>
branch but not on <code>master</code>. The first step involves pulling any changes from the main
repository that have been added since you last fetched and merged:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>$ git checkout master
$ git pull upstream</code></pre>
</div>
</div>
<div class="paragraph">
<p>This should complete without any problems or conflicts. Next, rebase your local
branch against the now up-to-date master:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>$ git checkout mine
$ git rebase master</code></pre>
</div>
</div>
<div class="paragraph">
<p>What this does is rearrange the commits such that all of your changes come after
the most recent one in master. Think adding some cards to the top of a deck rather
than shuffling them into the pack.</p>
</div>
<div class="paragraph">
<p>You&#8217;ll now be able to do a clean merge from your local branch to master:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>$ git checkout master
$ git merge mine</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, you must push your changes to your remote repository on GitHub, otherwise
the core developers won&#8217;t be able to pick them up:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code>$ git push</code></pre>
</div>
</div>
<div class="paragraph">
<p>You&#8217;re now ready to send the pull request from the GitHub user interface.</p>
</div>
<h5 id="_say_what_your_pull_request_is_for" class="discrete">Say what your pull request is for</h5>
<div class="paragraph">
<p>A pull request can contain any number of commits and it may be related to any number
of issues. In the pull request message, please specify the IDs of all issues that
the request relates to. Also give a brief description of the work you have done,
such as: "I refactored the resources injector and added support for custom number editors (GRIFFON-xxxx)".
:leveloffset: 1</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_appendix_migration"><a class="anchor" href="#_appendix_migration"></a>Appendix A: Migrating from Griffon 1.x</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Griffon 2.x has tried to be as close as possible to Griffon 1.x in terms of concepts
and APIs, however some changes were introduced that require your attention when
migrating an application from Griffon 1.x</p>
</div>
<div class="sect2">
<h3 id="_build_configuration"><a class="anchor" href="#_build_configuration"></a>1.1. Build Configuration</h3>
<div class="paragraph">
<p>There is no longer a specific Griffon buildtime tool nor configuration settings.
You must pick a build tool (we recommend <a href="http://gradle.org">Gradle</a>) and use that
tool&#8217;s configuration to match your needs. The simplest way to get started is to
select an appropriate <a href="http://github.com/pledbrook/layzbones">Lazybones</a> template
to create an empty project, then copy the files you need.</p>
</div>
<div class="paragraph">
<p>Build time plugins and scripts are now within the realm of a particular build tool.</p>
</div>
<div class="sect3">
<h4 id="_dependencies"><a class="anchor" href="#_dependencies"></a>1.1.1. Dependencies</h4>
<div class="paragraph">
<p>Dependencies used to be configured inside <code>griffon-app/conf/BuildConfig.groovy</code>. Now
that the file is gone you must configured dependencies using the native support of
the build tool you choose. Of particular note is that all griffon dependencies are
now standard JAR archives available from Maven compatible repositories, so they should
work no matter which dependency resolution you pick.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_runtime_configuration"><a class="anchor" href="#_runtime_configuration"></a>1.2. Runtime Configuration</h3>
<div class="sect3">
<h4 id="_application_and_config_scripts"><a class="anchor" href="#_application_and_config_scripts"></a>1.2.1. Application and Config Scripts</h4>
<div class="paragraph">
<p>The files <code>Application.groovy</code> and <code>Config.groovy</code> have been merged into a single
file : <code>Config.groovy</code>. The <code>log4j</code> DSL is no longer used, so please move your
logging settings to <code>src/resources/log4j.properties</code>; you can also use the XML variant
if you want. Griffon 2.x does not forces Log4j on you either, you&#8217;re free to pick
a suitable Slf4j binding of your choice.</p>
</div>
</div>
<div class="sect3">
<h4 id="_builder_script"><a class="anchor" href="#_builder_script"></a>1.2.2. Builder Script</h4>
<div class="paragraph">
<p>The <code>Builder.groovy</code> is no longer required. Its functions are now handled by
<code><a href="api/griffon/util/BuilderCustomizer.html" target="_blank">BuilderCustomizer</a></code> classes bound in a <code><a href="api/griffon/core/injection/Module.html" target="_blank">Module</a></code>. You must add
<code>griffon-groovy-2.0.0.BETA2.jar</code> as a compile dependency in order to use
<code>BuilderCustomizers</code>. Here&#8217;s an example for adding a <a href="http://miglayout.com">Miglayout</a>
customization</p>
</div>
<div class="listingblock">
<div class="title">src/main/com/acme/MiglayoutBuilderCustomizer.java</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">com.acme</span>;

<span class="keyword">import</span> <span class="include">griffon.inject.DependsOn</span>;
<span class="keyword">import</span> <span class="include">groovy.swing.factory.LayoutFactory</span>;
<span class="keyword">import</span> <span class="include">net.miginfocom.swing.MigLayout</span>;
<span class="keyword">import</span> <span class="include">groovy.util.Factory</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.view.AbstractBuilderCustomizer</span>;

<span class="keyword">import</span> <span class="include">javax.inject.Named</span>;
<span class="keyword">import</span> <span class="include">java.util.LinkedHashMap</span>;
<span class="keyword">import</span> <span class="include">java.util.Map</span>;

<span class="annotation">@Named</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">miglayout</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@DependsOn</span>({<span class="string"><span class="delimiter">&quot;</span><span class="content">swing</span><span class="delimiter">&quot;</span></span>})
<span class="annotation">@SuppressWarnings</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">rawtypes</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">MiglayoutBuilderCustomizer</span> <span class="directive">extends</span> AbstractBuilderCustomizer {
    <span class="annotation">@SuppressWarnings</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">unchecked</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> MiglayoutBuilderCustomizer() {
        <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, Factory&gt; factories = <span class="keyword">new</span> <span class="predefined-type">LinkedHashMap</span>&lt;&gt;();
        factories.put(<span class="string"><span class="delimiter">&quot;</span><span class="content">miglayout</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> LayoutFactory(MigLayout.class));
        setFactories(factories);
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">src/main/com/acme/MiglayoutModule.java</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">com.acme</span>;

<span class="keyword">import</span> <span class="include">griffon.core.injection.Module</span>;
<span class="keyword">import</span> <span class="include">griffon.inject.DependsOn</span>;
<span class="keyword">import</span> <span class="include">griffon.util.BuilderCustomizer</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.injection.AbstractModule</span>;
<span class="keyword">import</span> <span class="include">org.kordamp.jipsy.ServiceProviderFor</span>;

<span class="keyword">import</span> <span class="include">javax.inject.Named</span>;

<span class="annotation">@ServiceProviderFor</span>(Module.class)
<span class="annotation">@DependsOn</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">swing-groovy</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Named</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">miglayout-groovy</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">MiglayoutModule</span> <span class="directive">extends</span> AbstractModule {
    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> doConfigure() {
        bind(BuilderCustomizer.class)
            .to(MiglayoutBuilderCustomizer.class)
            .asSingleton();
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_events_script"><a class="anchor" href="#_events_script"></a>1.2.3. Events Script</h4>
<div class="paragraph">
<p>The <code>Events</code> script usually placed in <code>griffon-app/conf</code> should be moved to the main
source directory (<code>src/main/java</code> or <code>src/main/groovy</code> depending on your preferences).
The following snippet shows an skeleton implementation</p>
</div>
<div class="listingblock">
<div class="title">src/main/Events.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">import</span> <span class="include">griffon.core.event.EventHandler</span>

<span class="type">class</span> <span class="class">Events</span> <span class="directive">implements</span> <span class="predefined-type">EventHandler</span> {
    <span class="comment">// event handlers as public methods</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You must add event handlers as public methods following the conventions explained
in the <a href="#_events_consuming">consuming events</a> section.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_artifacts"><a class="anchor" href="#_artifacts"></a>1.3. Artifacts</h3>
<div class="paragraph">
<p>All artifacts must be annotated with <code><a href="api/griffon/metadata/ArtifactProviderFor.html" target="_blank">ArtifactProviderFor</a></code> without exception.
Failure to follow this rule will make Griffon miss the artifact during bootstrap.
The value for this annotation must be the basic interface that defines the artifact&#8217;s
type, for example</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/models/sample/SampleModel.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonModel</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonModel
<span class="type">class</span> <span class="class">SampleModel</span> {
    ...
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_controllers_2"><a class="anchor" href="#_controllers_2"></a>1.3.1. Controllers</h4>
<div class="paragraph">
<p>Closure properties as actions are no longer supported. All actions must be defined
as public methods.</p>
</div>
</div>
<div class="sect3">
<h4 id="_views_2"><a class="anchor" href="#_views_2"></a>1.3.2. Views</h4>
<div class="paragraph">
<p>View scripts have been upgraded to classes. You can use the following skeleton View
class as an starting point</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/views/sample/SampleView.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonView)
<span class="type">class</span> <span class="class">SampleView</span> {
    <span class="keyword">def</span> builder
    <span class="keyword">def</span> model

    <span class="type">void</span> initUI() {
        builder.with {
            <i class="conum" data-value="1"></i><b>(1)</b>
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>UI components</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Next, place the contents of your old View script inside <em class="conum">1</em>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_lifecycle_scripts"><a class="anchor" href="#_lifecycle_scripts"></a>1.4. Lifecycle Scripts</h3>
<div class="paragraph">
<p>These scripts must be migrated to full classes too. Here&#8217;s the basic skeleton code
for any lifecycle handler</p>
</div>
<div class="listingblock">
<div class="title">griffon-app/lifecycle/Initialize.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">import</span> <span class="include">griffon.core.GriffonApplication</span>
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.AbstractLifecycleHandler</span>

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>
<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>

<span class="type">class</span> <span class="class">Initialize</span> <span class="directive">extends</span> AbstractLifecycleHandler {
    <span class="annotation">@Inject</span>
    Initialize(<span class="annotation">@Nonnull</span> GriffonApplication application) {
        <span class="local-variable">super</span>(application)
    }

    <span class="annotation">@Override</span>
    <span class="type">void</span> execute() {
        <span class="comment">// do the work</span>
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tests"><a class="anchor" href="#_tests"></a>1.5. Tests</h3>
<div class="paragraph">
<p>Griffon 2.x no longer segregates tests between <code>unit</code> and <code>functional</code>. You must use
your build tool&#8217;s native support for both types (this is quite simple with Gradle).
Move all unit tests under <code>src/test/java</code> or <code>src/test/groovy</code> depending on your
choice of main language. The base <code>GriffonUnitTestCase</code> class no longer exist. Use
any testing framework you&#8217;re comfortable with to write unit tests (Junit4, Spock, etc).
Use the following template if you need to write artifact tests</p>
</div>
<div class="listingblock">
<div class="title">src/test/sample/SampleControllerTest.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> sample

<span class="keyword">import</span> <span class="include">griffon.core.test.GriffonUnitRule</span>
<span class="keyword">import</span> <span class="include">griffon.core.test.TestFor</span>
<span class="keyword">import</span> <span class="include">org.junit.Rule</span>
<span class="keyword">import</span> <span class="include">org.junit.Test</span>

<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.jayway.awaitility.Awaitility.await</span>
<span class="keyword">import</span> <span class="include">static</span> <span class="include">java.util.concurrent.TimeUnit.SECONDS</span>

<span class="annotation">@TestFor</span>(SampleController)
<span class="type">class</span> <span class="class">SampleControllerTest</span> {
    <span class="directive">private</span> SampleController controller

    <span class="annotation">@Rule</span>
    <span class="directive">public</span> <span class="directive">final</span> GriffonUnitRule griffon = <span class="keyword">new</span> GriffonUnitRule()

    <span class="annotation">@Test</span>
    <span class="type">void</span> testControllerAction() {
        <span class="comment">// given:</span>
        <span class="comment">// setup collaborators</span>

        <span class="comment">// when:</span>
        <span class="comment">// stimulus</span>
        controller.invokeAction(<span class="string"><span class="delimiter">'</span><span class="content">nameOfTheAction</span><span class="delimiter">'</span></span>)

        <span class="comment">// then:</span>
        <span class="comment">// use Awaitility to successfully wait for async processing to finish</span>
        await().atMost(<span class="integer">2</span>, SECONDS)
        <span class="keyword">assert</span> someCondition
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_appendix_module_bindings"><a class="anchor" href="#_appendix_module_bindings"></a>Appendix B: Module Bindings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following sections display all bindings per module. Use this information to
successfully override a binding on your own modules or to troubleshoot a module
binding if the wrong type has been applied by the Griffon runtime.</p>
</div>
<div class="sect2">
<h3 id="_core"><a class="anchor" href="#_core"></a>1.1. Core</h3>
<div class="paragraph">
<p>Module name: <code>core</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java">bind(ApplicationClassLoader.class)
    .to(DefaultApplicationClassLoader.class)
    .asSingleton();

bind(ApplicationConfigurer.class)
    .to(DefaultApplicationConfigurer.class)
    .asSingleton();

bind(ResourceHandler.class)
    .to(DefaultResourceHandler.class)
    .asSingleton();

bind(CompositeResourceBundleBuilder.class)
    .to(DefaultCompositeResourceBundleBuilder.class)
    .asSingleton();

bind(<span class="predefined-type">ResourceBundle</span>.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">applicationResourceBundle</span><span class="delimiter">&quot;</span></span>))
    .toProvider(<span class="keyword">new</span> ResourceBundleProvider(<span class="string"><span class="delimiter">&quot;</span><span class="content">Config</span><span class="delimiter">&quot;</span></span>))
    .asSingleton();

bind(<span class="predefined-type">Configuration</span>.class)
    .to(DefaultConfiguration.class)
    .asSingleton();

bind(ExecutorServiceManager.class)
    .to(DefaultExecutorServiceManager.class)
    .asSingleton();

bind(EventRouter.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">applicationEventRouter</span><span class="delimiter">&quot;</span></span>))
    .to(DefaultEventRouter.class)
    .asSingleton();

bind(EventRouter.class)
    .to(DefaultEventRouter.class);

bind(ResourceResolver.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">applicationResourceResolver</span><span class="delimiter">&quot;</span></span>))
    .toProvider(<span class="keyword">new</span> ResourceResolverProvider(<span class="string"><span class="delimiter">&quot;</span><span class="content">resources</span><span class="delimiter">&quot;</span></span>))
    .asSingleton();

bind(MessageSource.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">applicationMessageSource</span><span class="delimiter">&quot;</span></span>))
    .toProvider(<span class="keyword">new</span> MessageSourceProvider(<span class="string"><span class="delimiter">&quot;</span><span class="content">messages</span><span class="delimiter">&quot;</span></span>))
    .asSingleton();

bind(ResourceInjector.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">applicationResourceInjector</span><span class="delimiter">&quot;</span></span>))
    .to(DefaultApplicationResourceInjector.class)
    .asSingleton();

bind(UIThreadManager.class)
    .to(DefaultUIThreadManager.class)
    .asSingleton();

bind(MVCGroupManager.class)
    .to(DefaultMVCGroupManager.class)
    .asSingleton();

<span class="keyword">for</span> (Lifecycle lifecycle : Lifecycle.values()) {
    bind(LifecycleHandler.class)
        .withClassifier(named(lifecycle.getName()))
        .toProvider(<span class="keyword">new</span> LifecycleHandlerProvider(lifecycle.getName()))
        .asSingleton();
}

bind(WindowManager.class)
    .to(NoopWindowManager.class)
    .asSingleton();

bind(ActionManager.class)
    .to(DefaultActionManager.class)
    .asSingleton();

bind(ArtifactManager.class)
    .to(DefaultArtifactManager.class)
    .asSingleton();

bind(ArtifactHandler.class)
    .to(ModelArtifactHandler.class)
    .asSingleton();

bind(ArtifactHandler.class)
    .to(ViewArtifactHandler.class)
    .asSingleton();

bind(ArtifactHandler.class)
    .to(ControllerArtifactHandler.class)
    .asSingleton();

bind(ArtifactHandler.class)
    .to(ServiceArtifactHandler.class)
    .asSingleton();

bind(PlatformHandler.class)
    .toProvider(PlatformHandlerProvider.class)
    .asSingleton();

bind(AddonManager.class)
    .to(DefaultAddonManager.class)
    .asSingleton();

bind(<span class="predefined-type">EventHandler</span>.class)
    .to(DefaultEventHandler.class)
    .asSingleton();

bind(GriffonExceptionHandler.class)
    .asSingleton();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_groovy"><a class="anchor" href="#_groovy"></a>1.2. Groovy</h3>
<div class="paragraph">
<p>Module name: <code>groovy</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java">bind(ConfigReader.class)
    .toProvider(ConfigReader.Provider.class)
    .asSingleton();

bind(CompositeResourceBundleBuilder.class)
    .to(GroovyAwareCompositeResourceBundleBuilder.class)
    .asSingleton();

bind(GriffonAddon.class)
    .to(GroovyAddon.class)
    .asSingleton();

bind(MVCGroupManager.class)
    .to(GroovyAwareMVCGroupManager.class)
    .asSingleton();

bind(BuilderCustomizer.class)
    .to(CoreBuilderCustomizer.class)
    .asSingleton();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_swing"><a class="anchor" href="#_swing"></a>1.3. Swing</h3>
<div class="paragraph">
<p>Module name: <code>swing</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java">bind(SwingWindowDisplayHandler.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">defaultWindowDisplayHandler</span><span class="delimiter">&quot;</span></span>))
    .to(DefaultSwingWindowDisplayHandler.class)
    .asSingleton();

bind(SwingWindowDisplayHandler.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">windowDisplayHandler</span><span class="delimiter">&quot;</span></span>))
    .to(ConfigurableSwingWindowDisplayHandler.class)
    .asSingleton();

bind(WindowManager.class)
    .to(DefaultSwingWindowManager.class)
    .asSingleton();

bind(UIThreadManager.class)
    .to(SwingUIThreadManager.class)
    .asSingleton();

bind(ActionManager.class)
    .to(SwingActionManager.class)
    .asSingleton();

bind(GriffonAddon.class)
    .to(SwingAddon.class)
    .asSingleton();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_swing_builder"><a class="anchor" href="#_swing_builder"></a>1.4. Swing Builder</h3>
<div class="paragraph">
<p>Module name: <code>swing-groovy</code><br>
Depends on: <code>swing</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java">bind(BuilderCustomizer.class)
    .to(SwingBuilderCustomizer.class)
    .asSingleton();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_javafx"><a class="anchor" href="#_javafx"></a>1.5. JavaFX</h3>
<div class="paragraph">
<p>Module name: <code>javafx</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java">bind(JavaFXWindowDisplayHandler.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">defaultWindowDisplayHandler</span><span class="delimiter">&quot;</span></span>))
    .to(DefaultJavaFXWindowDisplayHandler.class)
    .asSingleton();

bind(JavaFXWindowDisplayHandler.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">windowDisplayHandler</span><span class="delimiter">&quot;</span></span>))
    .to(ConfigurableJavaFXWindowDisplayHandler.class)
    .asSingleton();

bind(WindowManager.class)
    .to(DefaultJavaFXWindowManager.class)
    .asSingleton();

bind(UIThreadManager.class)
    .to(JavaFXUIThreadManager.class)
    .asSingleton();

bind(ActionManager.class)
    .to(JavaFXActionManager.class)
    .asSingleton();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_javafx_builder"><a class="anchor" href="#_javafx_builder"></a>1.6. JavaFX Builder</h3>
<div class="paragraph">
<p>Module name: <code>javafx-groovy</code><br>
Depends on: <code>javafx</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java">bind(BuilderCustomizer.class)
    .to(JavafxBuilderCustomizer.class)
    .asSingleton();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_lanterna"><a class="anchor" href="#_lanterna"></a>1.7. Lanterna</h3>
<div class="paragraph">
<p>Module name: <code>lanterna</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java">bind(GUIScreen.class)
    .toProvider(GUIScreenProvider.class)
    .asSingleton();

bind(LanternaWindowDisplayHandler.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">defaultWindowDisplayHandler</span><span class="delimiter">&quot;</span></span>))
    .to(DefaultLanternaWindowDisplayHandler.class)
    .asSingleton();

bind(LanternaWindowDisplayHandler.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">windowDisplayHandler</span><span class="delimiter">&quot;</span></span>))
    .to(ConfigurableLanternaWindowDisplayHandler.class)
    .asSingleton();

bind(WindowManager.class)
    .to(DefaultLanternaWindowManager.class)
    .asSingleton();

bind(UIThreadManager.class)
    .to(LanternaUIThreadManager.class)
    .asSingleton();

bind(ActionManager.class)
    .to(LanternaActionManager.class)
    .asSingleton();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_lanterna_builder"><a class="anchor" href="#_lanterna_builder"></a>1.8. Lanterna Builder</h3>
<div class="paragraph">
<p>Module name: <code>lanterna-groovy</code><br>
Depends on: <code>lanterna</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java">bind(BuilderCustomizer.class)
    .to(LanternaBuilderCustomizer.class)
    .asSingleton();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pivot"><a class="anchor" href="#_pivot"></a>1.9. Pivot</h3>
<div class="paragraph">
<p>Module name: <code>pivot</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java">bind(PivotWindowDisplayHandler.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">defaultWindowDisplayHandler</span><span class="delimiter">&quot;</span></span>))
    .to(DefaultPivotWindowDisplayHandler.class)
    .asSingleton();

bind(PivotWindowDisplayHandler.class)
    .withClassifier(named(<span class="string"><span class="delimiter">&quot;</span><span class="content">windowDisplayHandler</span><span class="delimiter">&quot;</span></span>))
    .to(ConfigurablePivotWindowDisplayHandler.class)
    .asSingleton();

bind(WindowManager.class)
    .to(DefaultPivotWindowManager.class)
    .asSingleton();

bind(UIThreadManager.class)
    .to(PivotUIThreadManager.class)
    .asSingleton();

bind(ActionManager.class)
    .to(PivotActionManager.class)
    .asSingleton();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pivot_builder"><a class="anchor" href="#_pivot_builder"></a>1.10. Pivot Builder</h3>
<div class="paragraph">
<p>Module name: <code>pivot-groovy</code><br>
Depends on: <code>pivot</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java">bind(BuilderCustomizer.class)
    .to(PivotBuilderCustomizer.class)
    .asSingleton();</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_appendix_ast_transformations"><a class="anchor" href="#_appendix_ast_transformations"></a>Appendix C: AST Transformations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following list summarizes all AST transformations available to Groovy based
projects when the <code>griffon-groovy-compile-2.0.0.BETA2.jar</code> dependency is
added to a project</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#_events_eventpublisher_transformation">@EventPublisher</a></p>
</li>
<li>
<p><a href="#_internationalization_message_source_transformation">@MessageSourceAware</a></p>
</li>
<li>
<p><a href="#_mvc_mvcaware_transformation">@MVCAware</a></p>
</li>
<li>
<p><a href="#_models_observable_transformation">@Observable</a></p>
</li>
<li>
<p><a href="#_models_property_listener_transformation">@PropertyListener</a></p>
</li>
<li>
<p><a href="#_resources_resource_resolver_transformation">@ResourceResolverAware</a></p>
</li>
<li>
<p><a href="#_resources_resources_aware_transformation">@ResourcesAware</a></p>
</li>
<li>
<p><a href="#_threading_annotation">@Threading</a></p>
</li>
<li>
<p><a href="#_threading_transformation">@ThreadingAware</a></p>
</li>
<li>
<p><a href="#_models_vetoable_transformation">@Vetoable</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_appenidx_sample_applications"><a class="anchor" href="#_appenidx_sample_applications"></a>Appendix D: Sample Applications</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This appendix showcases the same application implemented with different languages
and different UI toolkits. The application presents a very simple form where a user
is asked for his or her name. Once a button is clicked a reply will appear within
the same window. In order to achieve this Models hold 2 observable properties: the
first to keep track of the <code>input</code>, the second to do the same for the <code>output</code>.
Views are only concerned with values coming from the model and as such never
interact directly with Controllers. Controllers in turn only interact with Models
and a Service used to transform the input value into the output value. The single
controller action observes the rules for invoking computations outside of the UI
thread and updating UI components inside the UI thread.</p>
</div>
<div class="paragraph">
<p>These are some screenshots of each one of the applications we&#8217;ll cover next.</p>
</div>
<div id="figure-sample-swing" class="imageblock">
<div class="content">
<img src="images/sample-swing-java.png" alt="Swing" width="50%" height="50%">
</div>
<div class="title">Figure 1. Swing Sample</div>
</div>
<div id="figure-sample-javafx" class="imageblock">
<div class="content">
<img src="images/sample-javafx-java.png" alt="JavaFX" width="50%" height="50%">
</div>
<div class="title">Figure 2. JavaFx Sample</div>
</div>
<div id="figure-sample-lanterna" class="imageblock">
<div class="content">
<img src="images/sample-lanterna-java.png" alt="JavaFX" width="50%" height="50%">
</div>
<div class="title">Figure 3. Lanterna Sample</div>
</div>
<div id="figure-sample-pivot" class="imageblock">
<div class="content">
<img src="images/sample-pivot-java.png" alt="JavaFX" width="50%" height="50%">
</div>
<div class="title">Figure 4. Pivot Sample</div>
</div>
<div class="paragraph">
<p>The goal of these applications is to showcase the similarities and differences of each
one of them given their implementation language and UI toolkit.</p>
</div>
<div class="sect2">
<h3 id="_swing_2"><a class="anchor" href="#_swing_2"></a>1.1. Swing</h3>
<div class="paragraph">
<p>Let&#8217;s begin with Swing, as it&#8217;s probably the most well known Java UI toolkit. First
we&#8217;ll show the Java version of an artifact, then we&#8217;ll show it&#8217;s Groovy counterpart.</p>
</div>
<div class="sect3">
<h4 id="_model_2"><a class="anchor" href="#_model_2"></a>1.1.1. Model</h4>
<div class="paragraph">
<p>Instances of <code><a href="api/griffon/core/artifact/GriffonModel.html" target="_blank">GriffonModel</a></code> implement the <code><a href="api/griffon/core/Observable.html" target="_blank">Observable</a></code> interface which
means they know how to handle observable properties out of the box. We only need to be
concerned in triggering a <code>java.beans.PropertyChangeEvent</code> when a property changes value.</p>
</div>
<div class="listingblock">
<div class="title">sample-swing-java/griffon-app/models/sample/swing/java/SampleModel.java</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">sample.swing.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.GriffonApplication</span>;
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonModel</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonModel</span>;

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>;
<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonModel.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleModel</span> <span class="directive">extends</span> AbstractGriffonModel {
    <span class="directive">private</span> <span class="predefined-type">String</span> input;                                                <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">private</span> <span class="predefined-type">String</span> output;                                               <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">public</span> <span class="predefined-type">SampleModel</span>(<span class="annotation">@Nonnull</span> GriffonApplication application) {
        <span class="local-variable">super</span>(application);
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getInput() {                                           <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">return</span> input;
    }

    <span class="directive">public</span> <span class="type">void</span> setInput(<span class="predefined-type">String</span> input) {
        firePropertyChange(<span class="string"><span class="delimiter">&quot;</span><span class="content">input</span><span class="delimiter">&quot;</span></span>, <span class="local-variable">this</span>.input, <span class="local-variable">this</span>.input = input);     <i class="conum" data-value="3"></i><b>(3)</b>
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getOutput() {                                          <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">return</span> output;
    }

    <span class="directive">public</span> <span class="type">void</span> setOutput(<span class="predefined-type">String</span> output) {
        firePropertyChange(<span class="string"><span class="delimiter">&quot;</span><span class="content">output</span><span class="delimiter">&quot;</span></span>, <span class="local-variable">this</span>.output, <span class="local-variable">this</span>.output = output); <i class="conum" data-value="3"></i><b>(3)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Define a private field for the property</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Property accessor</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Property mutator must fire a <code>PropertyChangeEvent</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The code is quite straight forward, there&#8217;s nothing much to see here other than making
sure to follow the rules for creating observable properties. The Groovy version sports
a short hand thanks to the usage of the @Observable AST transformation.</p>
</div>
<div class="paragraph">
<p>One key difference between the Java and the Groovy version is that the Groovy Model
does not extend a particular class. It also This is due to Griffon being aware of its own
conventions and applying the appropriate byte code manipulation (via AST transformations).
The compiled Model class does implement the <code><a href="api/griffon/core/artifact/GriffonModel.html" target="_blank">GriffonModel</a></code> interface as required by
the framework. This type of byte code manipulation is expected to work for every Groovy
based artifact.</p>
</div>
<div class="listingblock">
<div class="title">sample-swing-groovy/griffon-app/models/sample/swing/groovy/SampleModel.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> sample.swing.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonModel</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>
<span class="keyword">import</span> <span class="include">griffon.transform.Observable</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonModel)
<span class="type">class</span> <span class="class">SampleModel</span> {
    <span class="annotation">@Observable</span> <span class="predefined-type">String</span> input                                             <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="annotation">@Observable</span> <span class="predefined-type">String</span> output                                            <i class="conum" data-value="1"></i><b>(1)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Observable property</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Properties become observable by simply annotating them with @Observable. The Groovy compiler
will generate the required boilerplate code, which so happens to be functionally equivalent
to what we showed in the Java version.</p>
</div>
</div>
<div class="sect3">
<h4 id="_controller_2"><a class="anchor" href="#_controller_2"></a>1.1.2. Controller</h4>
<div class="paragraph">
<p>Controllers provide actions that are used to fill up the application&#8217;s interaction.
They usually manipulate values coming from Views via Model properties. Controllers may
rely on additional components, such as Services, to do they work. This is exactly our
case as there&#8217;s a <code>SampleService</code> instance injected into our controllers.</p>
</div>
<div class="listingblock">
<div class="title">sample-swing-java/griffon-app/controllers/sample/swing/java/SampleController.java</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">sample.swing.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.GriffonApplication</span>;
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonController</span>;

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>;
<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonController.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleController</span> <span class="directive">extends</span> AbstractGriffonController {
    <span class="directive">private</span> <span class="predefined-type">SampleModel</span> model;                                             <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">private</span> SampleService sampleService;                                   <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">public</span> SampleController(<span class="annotation">@Nonnull</span> GriffonApplication application) {
        <span class="local-variable">super</span>(application);
    }

    <span class="directive">public</span> <span class="type">void</span> setModel(<span class="predefined-type">SampleModel</span> model) {
        <span class="local-variable">this</span>.model = model;
    }

    <span class="directive">public</span> <span class="type">void</span> sayHello() {                                               <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="directive">final</span> <span class="predefined-type">String</span> result = sampleService.sayHello(model.getInput());
        runInsideUIAsync(<span class="keyword">new</span> <span class="predefined-type">Runnable</span>() {                                  <i class="conum" data-value="4"></i><b>(4)</b>
            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> run() {
                model.setOutput(result);
            }
        });
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Injected by JSR 330</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Automatically run off the UI thread</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Get back inside the UI thread</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Of particular note is the fact that actions are always executed outside off the UI thread
unless otherwise configured with an <code>@Threading</code> annotation. Once we have computed the right
output we must inform the View of the new value. This is done by updating the model
inside the UI thread <em class="conum">4</em>.</p>
</div>
<div class="listingblock">
<div class="title">sample-swing-groovy/griffon-app/controllers/sample/swing/groovy/SampleController.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> sample.swing.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonController)
<span class="type">class</span> <span class="class">SampleController</span> {
    <span class="predefined-type">SampleModel</span> model                                                      <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">private</span> SampleService sampleService                                    <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="type">void</span> sayHello() {                                                      <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="predefined-type">String</span> result = sampleService.sayHello(model.input)
        model.output = result                                              <i class="conum" data-value="4"></i><b>(4)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Injected by JSR 330</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Automatically run off the UI thread</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Get back inside the UI thread</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Groovy version of the Controller is much terser of course however there&#8217;s a nice
feature available to Groovy Swing: Model properties bound to UI components are <em>always</em>
updated inside the UI thread.</p>
</div>
</div>
<div class="sect3">
<h4 id="_service"><a class="anchor" href="#_service"></a>1.1.3. Service</h4>
<div class="paragraph">
<p>Services are tasked to work with raw data and I/O, they should <strong><em>never</em></strong> interact with
Views and Models directly, though you may have additional components injected to them.
The following service shows another facility provide by the
<code><a href="api/griffon/core/GriffonApplication.html" target="_blank">GriffonApplication</a></code> interface:
<code><a href="api/griffon/core/i18n/MessageSource.html" target="_blank">MessageSource</a></code>, capable of resolving i18n-able
resources.</p>
</div>
<div class="listingblock">
<div class="title">sample-swing-java/griffon-app/services/sample/swing/java/SampleService.java</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">sample.swing.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.GriffonApplication</span>;
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonService</span>;
<span class="keyword">import</span> <span class="include">griffon.core.i18n.MessageSource</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonService</span>;

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>;
<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.util.GriffonNameUtils.isBlank</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">java.util.Arrays.asList</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonService.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleService</span> <span class="directive">extends</span> AbstractGriffonService {
    <span class="annotation">@Inject</span>
    <span class="directive">public</span> SampleService(<span class="annotation">@Nonnull</span> GriffonApplication application) {
        <span class="local-variable">super</span>(application);
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> sayHello(<span class="predefined-type">String</span> input) {
        MessageSource messageSource = getApplication().getMessageSource();
        <span class="keyword">if</span> (isBlank(input)) {
            <span class="keyword">return</span> messageSource.getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting.default</span><span class="delimiter">&quot;</span></span>);
        } <span class="keyword">else</span> {
            <span class="keyword">return</span> messageSource.getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting.parameterized</span><span class="delimiter">&quot;</span></span>, asList(input));
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">sample-swing-groovy/griffon-app/services/sample/swing/groovy/SampleService.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> sample.swing.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonService</span>
<span class="keyword">import</span> <span class="include">griffon.core.i18n.MessageSource</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.util.GriffonNameUtils.isBlank</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonService)
<span class="type">class</span> <span class="class">SampleService</span> {
    <span class="predefined-type">String</span> sayHello(<span class="predefined-type">String</span> input) {
        MessageSource ms = application.messageSource
        isBlank(input) ? ms.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">greeting.default</span><span class="delimiter">'</span></span>) : ms.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">greeting.parameterized</span><span class="delimiter">'</span></span>, [input])
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_view_2"><a class="anchor" href="#_view_2"></a>1.1.4. View</h4>
<div class="paragraph">
<p>We come to the final piece of the puzzle: the View. Components are arranged in a
one column vertical grid</p>
</div>
<div class="listingblock">
<div class="title">sample-swing-java/griffon-app/views/sample/swing/java/SampleView.java</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">sample.swing.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.GriffonApplication</span>;
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonView</span>;

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>;
<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;
<span class="keyword">import</span> <span class="include">javax.swing</span>.*;
<span class="keyword">import</span> <span class="include">javax.swing.event.DocumentEvent</span>;
<span class="keyword">import</span> <span class="include">javax.swing.event.DocumentListener</span>;
<span class="keyword">import</span> <span class="include">java.awt.GridLayout</span>;
<span class="keyword">import</span> <span class="include">java.awt.Image</span>;
<span class="keyword">import</span> <span class="include">java.awt.Toolkit</span>;
<span class="keyword">import</span> <span class="include">java.beans.PropertyChangeEvent</span>;
<span class="keyword">import</span> <span class="include">java.beans.PropertyChangeListener</span>;
<span class="keyword">import</span> <span class="include">java.util.Collections</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">java.util.Arrays.asList</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">javax.swing.WindowConstants.DO_NOTHING_ON_CLOSE</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonView.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleView</span> <span class="directive">extends</span> AbstractGriffonView {
    <span class="directive">private</span> SampleController controller;                                         <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">private</span> <span class="predefined-type">SampleModel</span> model;                                                   <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">public</span> SampleView(<span class="annotation">@Nonnull</span> GriffonApplication application) {
        <span class="local-variable">super</span>(application);
    }

    <span class="directive">public</span> <span class="type">void</span> setController(SampleController controller) {
        <span class="local-variable">this</span>.controller = controller;
    }

    <span class="directive">public</span> <span class="type">void</span> setModel(<span class="predefined-type">SampleModel</span> model) {
        <span class="local-variable">this</span>.model = model;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> initUI() {
        <span class="predefined-type">JFrame</span> window = (<span class="predefined-type">JFrame</span>) getApplication()
            .createApplicationContainer(<span class="predefined-type">Collections</span>.&lt;<span class="predefined-type">String</span>,<span class="predefined-type">Object</span>&gt;emptyMap());
        window.setName(<span class="string"><span class="delimiter">&quot;</span><span class="content">mainWindow</span><span class="delimiter">&quot;</span></span>);
        window.setTitle(getApplication().getConfiguration().getAsString(<span class="string"><span class="delimiter">&quot;</span><span class="content">application.title</span><span class="delimiter">&quot;</span></span>));
        window.setSize(<span class="integer">320</span>, <span class="integer">120</span>);
        window.setDefaultCloseOperation(DO_NOTHING_ON_CLOSE);
        window.setIconImage(getImage(<span class="string"><span class="delimiter">&quot;</span><span class="content">/griffon-icon-48x48.png</span><span class="delimiter">&quot;</span></span>));
        window.setIconImages(asList(
            getImage(<span class="string"><span class="delimiter">&quot;</span><span class="content">/griffon-icon-48x48.png</span><span class="delimiter">&quot;</span></span>),
            getImage(<span class="string"><span class="delimiter">&quot;</span><span class="content">/griffon-icon-32x32.png</span><span class="delimiter">&quot;</span></span>),
            getImage(<span class="string"><span class="delimiter">&quot;</span><span class="content">/griffon-icon-16x16.png</span><span class="delimiter">&quot;</span></span>)
        ));
        getApplication().getWindowManager().attach(<span class="string"><span class="delimiter">&quot;</span><span class="content">mainWindow</span><span class="delimiter">&quot;</span></span>, window);        <i class="conum" data-value="2"></i><b>(2)</b>

        window.getContentPane().setLayout(<span class="keyword">new</span> <span class="predefined-type">GridLayout</span>(<span class="integer">4</span>, <span class="integer">1</span>));
        window.getContentPane().add(
            <span class="keyword">new</span> <span class="predefined-type">JLabel</span>(getApplication().getMessageSource().getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">name.label</span><span class="delimiter">&quot;</span></span>))
        );
        <span class="directive">final</span> <span class="predefined-type">JTextField</span> nameField = <span class="keyword">new</span> <span class="predefined-type">JTextField</span>();
        nameField.setName(<span class="string"><span class="delimiter">&quot;</span><span class="content">inputField</span><span class="delimiter">&quot;</span></span>);
        nameField.getDocument().addDocumentListener(<span class="keyword">new</span> <span class="predefined-type">DocumentListener</span>() {     <i class="conum" data-value="3"></i><b>(3)</b>
            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> insertUpdate(<span class="predefined-type">DocumentEvent</span> e) {
                model.setInput(nameField.getText());
            }

            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> removeUpdate(<span class="predefined-type">DocumentEvent</span> e) {
                model.setInput(nameField.getText());
            }

            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> changedUpdate(<span class="predefined-type">DocumentEvent</span> e) {
                model.setInput(nameField.getText());
            }
        });
        window.getContentPane().add(nameField);

        <span class="predefined-type">Action</span> action = (<span class="predefined-type">Action</span>) getApplication().getActionManager()             <i class="conum" data-value="4"></i><b>(4)</b>
            .actionFor(controller, <span class="string"><span class="delimiter">&quot;</span><span class="content">sayHello</span><span class="delimiter">&quot;</span></span>)
            .getToolkitAction();
        <span class="directive">final</span> <span class="predefined-type">JButton</span> button = <span class="keyword">new</span> <span class="predefined-type">JButton</span>(action);
        button.setName(<span class="string"><span class="delimiter">&quot;</span><span class="content">sayHelloButton</span><span class="delimiter">&quot;</span></span>);
        window.getContentPane().add(button);

        <span class="directive">final</span> <span class="predefined-type">JLabel</span> outputLabel = <span class="keyword">new</span> <span class="predefined-type">JLabel</span>();
        outputLabel.setName(<span class="string"><span class="delimiter">&quot;</span><span class="content">outputLabel</span><span class="delimiter">&quot;</span></span>);
        model.addPropertyChangeListener(<span class="string"><span class="delimiter">&quot;</span><span class="content">output</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> <span class="predefined-type">PropertyChangeListener</span>() { <i class="conum" data-value="3"></i><b>(3)</b>
            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> propertyChange(<span class="predefined-type">PropertyChangeEvent</span> evt) {
                outputLabel.setText(<span class="predefined-type">String</span>.valueOf(evt.getNewValue()));
            }
        });
        window.getContentPane().add(outputLabel);
    }

    <span class="directive">private</span> <span class="predefined-type">Image</span> getImage(<span class="predefined-type">String</span> path) {
        <span class="keyword">return</span> <span class="predefined-type">Toolkit</span>.getDefaultToolkit().getImage(SampleView.class.getResource(path));
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Attach window to <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Apply component-to-model binding</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Hook in controller action by name</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Here we can appreciate at <em class="conum">3</em> how Model properties are bound to
View components, also how controller actions can be transformed into toolkit actions
that may be applied to buttons <em class="conum">4</em> for example.</p>
</div>
<div class="listingblock">
<div class="title">sample-swing-groovy/griffon-app/views/sample/swing/groovy/SampleView.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> sample.swing.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonView)
<span class="type">class</span> <span class="class">SampleView</span> {
    FactoryBuilderSupport builder                                                              <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="predefined-type">SampleModel</span> model                                                                          <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="type">void</span> initUI() {
        builder.with {
            application(<span class="key">title</span>: application.configuration[<span class="string"><span class="delimiter">'</span><span class="content">application.title</span><span class="delimiter">'</span></span>],                 <i class="conum" data-value="2"></i><b>(2)</b>
                <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">mainWindow</span><span class="delimiter">'</span></span>, <span class="key">size</span>: [<span class="integer">320</span>, <span class="integer">160</span>],
                <span class="key">iconImage</span>: imageIcon(<span class="string"><span class="delimiter">'</span><span class="content">/griffon-icon-48x48.png</span><span class="delimiter">'</span></span>).image,
                <span class="key">iconImages</span>: [imageIcon(<span class="string"><span class="delimiter">'</span><span class="content">/griffon-icon-48x48.png</span><span class="delimiter">'</span></span>).image,
                    imageIcon(<span class="string"><span class="delimiter">'</span><span class="content">/griffon-icon-32x32.png</span><span class="delimiter">'</span></span>).image,
                    imageIcon(<span class="string"><span class="delimiter">'</span><span class="content">/griffon-icon-16x16.png</span><span class="delimiter">'</span></span>).image]) {
                gridLayout(<span class="key">rows</span>: <span class="integer">4</span>, <span class="key">cols</span>: <span class="integer">1</span>)
                label(application.messageSource.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">name.label</span><span class="delimiter">'</span></span>))
                textField(<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">inputField</span><span class="delimiter">'</span></span>, <span class="key">text</span>: bind(<span class="key">target</span>: model, <span class="string"><span class="delimiter">'</span><span class="content">input</span><span class="delimiter">'</span></span>))                 <i class="conum" data-value="3"></i><b>(3)</b>
                button(sayHelloAction, <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">sayHelloButton</span><span class="delimiter">'</span></span>)                                    <i class="conum" data-value="4"></i><b>(4)</b>
                label(<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">outputLabel</span><span class="delimiter">'</span></span>, <span class="key">text</span>: bind { model.output })                           <i class="conum" data-value="3"></i><b>(3)</b>
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create window and attach it to <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Apply component-to-model binding</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Hook in controller action by name</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Groovy version is again much terse thanks to the <a href="http://groovy.codehaus.org/Swing+Builder">SwingBuilder DSL</a>.
Notice how easy is to bind <em class="conum">3</em> model properties using the +bind+ node.
The controller action is also transformed into an UI toolkit specific action however
this time it&#8217;s easier to grab: by convention all controller actions are exposed as variables
to the corresponding <code>builder</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_resources_2"><a class="anchor" href="#_resources_2"></a>1.1.5. Resources</h4>
<div class="paragraph">
<p>The last file we&#8217;ll touch is the one that holds de i18n-able content. Griffon supports
several formats. Here we&#8217;re showing the standard one as found in many Java projects.</p>
</div>
<div class="listingblock">
<div class="title">sample-swing-java/griffon-app/i18n/messages.properties</div>
<div class="content">
<pre class="CodeRay"><code>name.label = Please enter your name
greeting.default = Howdy stranger!
greeting.parameterized = Hello {0}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_javafx_2"><a class="anchor" href="#_javafx_2"></a>1.2. JavaFX</h3>
<div class="paragraph">
<p>JavaFx is a next generation UI toolkit and will eventually replace Swing, so it&#8217;s a good
idea to get started with it now. Among the several features found in JavaFX you&#8217;ll find</p>
</div>
<div class="ulist">
<ul>
<li>
<p>observable properties</p>
</li>
<li>
<p>component styling with CSS</p>
</li>
<li>
<p>FXML: a declarative format for defining UIs</p>
</li>
<li>
<p>and more!</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_model_3"><a class="anchor" href="#_model_3"></a>1.2.1. Model</h4>
<div class="listingblock">
<div class="title">sample-javafx-java/griffon-app/models/sample/javafx/java/SampleModel.java</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">sample.javafx.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.GriffonApplication</span>;
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonModel</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">javafx.beans.property.SimpleStringProperty</span>;
<span class="keyword">import</span> <span class="include">javafx.beans.property.StringProperty</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonModel</span>;

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>;
<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonModel.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleModel</span> <span class="directive">extends</span> AbstractGriffonModel {
    <span class="directive">private</span> StringProperty input;                                          <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">private</span> StringProperty output;                                         <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">public</span> <span class="predefined-type">SampleModel</span>(<span class="annotation">@Nonnull</span> GriffonApplication application) {
        <span class="local-variable">super</span>(application);
    }

    <span class="annotation">@Nonnull</span>
    <span class="directive">public</span> <span class="directive">final</span> StringProperty inputProperty() {                          <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">if</span> (input == <span class="predefined-constant">null</span>) {
            input = <span class="keyword">new</span> SimpleStringProperty(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">input</span><span class="delimiter">&quot;</span></span>);
        }
        <span class="keyword">return</span> input;
    }

    <span class="directive">public</span> <span class="type">void</span> setInput(<span class="predefined-type">String</span> input) {                                   <i class="conum" data-value="3"></i><b>(3)</b>
        inputProperty().set(input);
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getInput() {                                             <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="keyword">return</span> input == <span class="predefined-constant">null</span> ? <span class="predefined-constant">null</span> : inputProperty().get();
    }

    <span class="annotation">@Nonnull</span>
    <span class="directive">public</span> <span class="directive">final</span> StringProperty outputProperty() {                         <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">if</span> (output == <span class="predefined-constant">null</span>) {
            output = <span class="keyword">new</span> SimpleStringProperty(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">output</span><span class="delimiter">&quot;</span></span>);
        }
        <span class="keyword">return</span> output;
    }

    <span class="directive">public</span> <span class="type">void</span> setOutput(<span class="predefined-type">String</span> output) {                                 <i class="conum" data-value="3"></i><b>(3)</b>
        outputProperty().set(output);
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getOutput() {                                            <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="keyword">return</span> output == <span class="predefined-constant">null</span> ? <span class="predefined-constant">null</span> : outputProperty().get();
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Define a private field for the property</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Property accessor</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Pass-thru values to <code>Property</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Model makes use of JavaFX&#8217;s observable properties .These properties are roughly
equivalent in behavior to the ones we saw back in the <a href="#_swing">Swing</a> example, however
they provide much more behavior than that; values may be cached automatically for
example, avoiding bindings to be updated needlessly.</p>
</div>
<div class="listingblock">
<div class="title">sample-javafx-groovy/griffon-app/models/sample/javafx/groovy/SampleModel.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> sample.javafx.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonModel</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>
<span class="keyword">import</span> <span class="include">griffon.transform.FXObservable</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonModel)
<span class="type">class</span> <span class="class">SampleModel</span> {
    <span class="annotation">@FXObservable</span> <span class="predefined-type">String</span> input                                           <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="annotation">@FXObservable</span> <span class="predefined-type">String</span> output                                          <i class="conum" data-value="1"></i><b>(1)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Observable property</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Similarly to <code>@Observable</code> we find that Groovy based JavaFX models can use another AST
transformation named <code>@FXObservable</code>. This transformation generates equivalent byte code
to the Java based Model we saw earlier.</p>
</div>
</div>
<div class="sect3">
<h4 id="_controller_3"><a class="anchor" href="#_controller_3"></a>1.2.2. Controller</h4>
<div class="paragraph">
<p>Have a look at the controller for this application. See if you can spot the differences
between its Swing counterpart.</p>
</div>
<div class="listingblock">
<div class="title">sample-javafx-java/griffon-app/controllers/sample/javafx/java/SampleController.java</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">sample.javafx.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.GriffonApplication</span>;
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonController</span>;

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>;
<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonController.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleController</span> <span class="directive">extends</span> AbstractGriffonController {
    <span class="directive">private</span> <span class="predefined-type">SampleModel</span> model;                                             <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">private</span> SampleService sampleService;                                   <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">public</span> SampleController(<span class="annotation">@Nonnull</span> GriffonApplication application) {
        <span class="local-variable">super</span>(application);
    }

    <span class="directive">public</span> <span class="type">void</span> setModel(<span class="predefined-type">SampleModel</span> model) {
        <span class="local-variable">this</span>.model = model;
    }

    <span class="directive">public</span> <span class="type">void</span> sayHello() {                                               <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="directive">final</span> <span class="predefined-type">String</span> result = sampleService.sayHello(model.getInput());
        runInsideUIAsync(<span class="keyword">new</span> <span class="predefined-type">Runnable</span>() {                                  <i class="conum" data-value="4"></i><b>(4)</b>
            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> run() {
                model.setOutput(result);
            }
        });
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Injected by JSR 330</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Automatically run off the UI thread</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Get back inside the UI thread</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Di you spot any differences? No? That&#8217;s because the two controllers are 100% identical.
How can this be? This is the power of separating concerns between MVC members. Because
the Controller only talks to the View via the Model, and the Model exposes an identical
contract for its properties we didn&#8217;t have to change the Controller at all.</p>
</div>
<div class="listingblock">
<div class="title">sample-javafx-groovy/griffon-app/controllers/sample/javafx/groovy/SampleController.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> sample.javafx.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonController)
<span class="type">class</span> <span class="class">SampleController</span> {
    <span class="predefined-type">SampleModel</span> model                                                      <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">private</span> SampleService sampleService                                    <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="type">void</span> sayHello() {                                                      <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="predefined-type">String</span> result = sampleService.sayHello(model.input)
        runInsideUIAsync {                                                 <i class="conum" data-value="4"></i><b>(4)</b>
            model.output = result
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Injected by JSR 330</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Automatically run off the UI thread</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Get back inside the UI thread</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Opposed to its Swing counterpart here we have to add an explicit threading block when
updating model properties. This is because the <code>bind</code> node for JavaFX components is not
aware of the same rules than the <code>bind</code> node for Swing components. Nevertheless the
code remains short and to the point.</p>
</div>
</div>
<div class="sect3">
<h4 id="_service_2"><a class="anchor" href="#_service_2"></a>1.2.3. Service</h4>
<div class="paragraph">
<p>Given that the service operates with raw data and has no ties to the toolkit in use we&#8217;d
expect no changes from the Swing example.</p>
</div>
<div class="listingblock">
<div class="title">sample-javafx-java/griffon-app/services/sample/javafx/java/SampleService.java</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">sample.javafx.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.GriffonApplication</span>;
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonService</span>;
<span class="keyword">import</span> <span class="include">griffon.core.i18n.MessageSource</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonService</span>;

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>;
<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.util.GriffonNameUtils.isBlank</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">java.util.Arrays.asList</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonService.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleService</span> <span class="directive">extends</span> AbstractGriffonService {
    <span class="annotation">@Inject</span>
    <span class="directive">public</span> SampleService(<span class="annotation">@Nonnull</span> GriffonApplication application) {
        <span class="local-variable">super</span>(application);
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> sayHello(<span class="predefined-type">String</span> input) {
        MessageSource messageSource = getApplication().getMessageSource();
        <span class="keyword">if</span> (isBlank(input)) {
            <span class="keyword">return</span> messageSource.getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting.default</span><span class="delimiter">&quot;</span></span>);
        } <span class="keyword">else</span> {
            <span class="keyword">return</span> messageSource.getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting.parameterized</span><span class="delimiter">&quot;</span></span>, asList(input));
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">sample-javafx-groovy/griffon-app/services/sample/javafx/groovy/SampleService.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> sample.javafx.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonService</span>
<span class="keyword">import</span> <span class="include">griffon.core.i18n.MessageSource</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.util.GriffonNameUtils.isBlank</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonService)
<span class="type">class</span> <span class="class">SampleService</span> {
    <span class="predefined-type">String</span> sayHello(<span class="predefined-type">String</span> input) {
        MessageSource ms = application.messageSource
        isBlank(input) ? ms.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">greeting.default</span><span class="delimiter">'</span></span>) : ms.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">greeting.parameterized</span><span class="delimiter">'</span></span>, [input])
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_view_3"><a class="anchor" href="#_view_3"></a>1.2.4. View</h4>
<div class="paragraph">
<p>Views are the artifacts that are most impacted by the choice of UI toolkit. You may
remember we mentioned FXML as one of the strong features delivered by JavaFX and so
we chose to implement the Java based View by reading an fxml file by convention.</p>
</div>
<div class="listingblock">
<div class="title">sample-javafx-java/griffon-app/views/sample/javafx/java/SampleView.java</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">sample.javafx.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.GriffonApplication</span>;
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">javafx.fxml.FXML</span>;
<span class="keyword">import</span> <span class="include">javafx.scene.Group</span>;
<span class="keyword">import</span> <span class="include">javafx.scene.Node</span>;
<span class="keyword">import</span> <span class="include">javafx.scene.Scene</span>;
<span class="keyword">import</span> <span class="include">javafx.scene.control.Label</span>;
<span class="keyword">import</span> <span class="include">javafx.scene.control.TextField</span>;
<span class="keyword">import</span> <span class="include">javafx.scene.paint.Color</span>;
<span class="keyword">import</span> <span class="include">javafx.stage.Stage</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.javafx.artifact.AbstractJavaFXGriffonView</span>;

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>;
<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;
<span class="keyword">import</span> <span class="include">java.util.Collections</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonView.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleView</span> <span class="directive">extends</span> AbstractJavaFXGriffonView {
    <span class="directive">private</span> SampleController controller;                                  <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">private</span> <span class="predefined-type">SampleModel</span> model;                                            <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@FXML</span>
    <span class="directive">private</span> <span class="predefined-type">TextField</span> input;                                              <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="annotation">@FXML</span>
    <span class="directive">private</span> <span class="predefined-type">Label</span> output;                                                 <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">public</span> SampleView(<span class="annotation">@Nonnull</span> GriffonApplication application) {
        <span class="local-variable">super</span>(application);
    }

    <span class="directive">public</span> <span class="type">void</span> setController(SampleController controller) {
        <span class="local-variable">this</span>.controller = controller;
    }

    <span class="directive">public</span> <span class="type">void</span> setModel(<span class="predefined-type">SampleModel</span> model) {
        <span class="local-variable">this</span>.model = model;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> initUI() {
        Stage stage = (Stage) getApplication()
            .createApplicationContainer(<span class="predefined-type">Collections</span>.&lt;<span class="predefined-type">String</span>,<span class="predefined-type">Object</span>&gt;emptyMap());
        stage.setTitle(getApplication().getConfiguration().getAsString(<span class="string"><span class="delimiter">&quot;</span><span class="content">application.title</span><span class="delimiter">&quot;</span></span>));
        stage.setWidth(<span class="integer">400</span>);
        stage.setHeight(<span class="integer">120</span>);
        stage.setScene(init());
        getApplication().getWindowManager().attach(<span class="string"><span class="delimiter">&quot;</span><span class="content">mainWindow</span><span class="delimiter">&quot;</span></span>, stage);  <i class="conum" data-value="3"></i><b>(3)</b>
    }

    <span class="comment">// build the UI</span>
    <span class="directive">private</span> Scene init() {
        Scene scene = <span class="keyword">new</span> Scene(<span class="keyword">new</span> <span class="predefined-type">Group</span>());
        scene.setFill(<span class="predefined-type">Color</span>.WHITE);

        Node node = loadFromFXML();
        model.inputProperty().bindBidirectional(input.textProperty());
        model.outputProperty().bindBidirectional(output.textProperty());
        ((<span class="predefined-type">Group</span>) scene.getRoot()).getChildren().addAll(node);
        connectActions(node, controller);                                 <i class="conum" data-value="4"></i><b>(4)</b>

        <span class="keyword">return</span> scene;
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create window and attach it to <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Injected by FXMLLoader</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Hook actions by convention</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>FXMLLoader</code> can inject components to an instance as long as that instance exposes
fields annotated with <code>@FXML</code>; fields names must match component ids <em class="conum">2</em>
as defined in the fxml file, which is shown next:</p>
</div>
<div class="listingblock">
<div class="title">sample-javafx-java/griffon-app/resources/sample/javafx/java/sample.fxml</div>
<div class="content">
<pre class="CodeRay"><code class="xml language-xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>

<span class="comment">&lt;?import javafx.scene.control.Button?&gt;</span>
<span class="comment">&lt;?import javafx.scene.control.Label?&gt;</span>
<span class="comment">&lt;?import javafx.scene.control.TextField?&gt;</span>
<span class="comment">&lt;?import javafx.scene.layout.AnchorPane?&gt;</span>
<span class="tag">&lt;AnchorPane</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">AnchorPane</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">maxHeight</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">-Infinity</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">maxWidth</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">-Infinity</span><span class="delimiter">&quot;</span></span>
            <span class="attribute-name">minHeight</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">-Infinity</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">minWidth</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">-Infinity</span><span class="delimiter">&quot;</span></span>
            <span class="attribute-name">prefHeight</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">80.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">prefWidth</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">384.0</span><span class="delimiter">&quot;</span></span>
            <span class="attribute-name">xmlns:fx</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://javafx.com/fxml</span><span class="delimiter">&quot;</span></span>
            <span class="attribute-name">fx:controller</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">sample.javafx.java.SampleController</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;children&gt;</span>
        <span class="tag">&lt;Label</span> <span class="attribute-name">layoutX</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">14.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">layoutY</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">14.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">text</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Please enter your name:</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;TextField</span> <span class="attribute-name">fx:id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">input</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">layoutX</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">172.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">layoutY</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">11.0</span><span class="delimiter">&quot;</span></span>
                   <span class="attribute-name">prefWidth</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">200.0</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;Button</span> <span class="attribute-name">layoutX</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">172.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">layoutY</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">45.0</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">mnemonicParsing</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">prefWidth</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">200.0</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">text</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Say hello!</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">fx:id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">sayHelloActionTarget</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>                         <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="tag">&lt;Label</span> <span class="attribute-name">layoutX</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">14.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">layoutY</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">80.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">prefWidth</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">360.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">fx:id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">output</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/children&gt;</span>
<span class="tag">&lt;/AnchorPane&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Naming convention for automatic action binding</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Please pay special attention to the <code>fx:id</code> given to the button. Griffon applies a naming
convention to match controller actions to JavaFX components that can handle said actions.
Let&#8217;s review what we have here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>SampleController</code> exposes an action named <code>sayHello</code></p>
</li>
<li>
<p>the button has an <code>fx:id</code> value of <code>sayHelloActionTarget</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Given this we infer that the <code>fx:id</code> value must be of the form <code>&lt;actionName&gt;ActionTarget</code>.
The naming convention is one of two steps, you must also connect the controller using
a helper method <em class="conum">4</em> as shown in the View.</p>
</div>
<div class="listingblock">
<div class="title">sample-javafx-groovy/griffon-app/views/sample/javafx/groovy/SampleView.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> sample.javafx.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonView)
<span class="type">class</span> <span class="class">SampleView</span> {
    FactoryBuilderSupport builder                                                              <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="predefined-type">SampleModel</span> model                                                                          <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="type">void</span> initUI() {
        builder.application(<span class="key">title</span>: application.configuration[<span class="string"><span class="delimiter">'</span><span class="content">application.title</span><span class="delimiter">'</span></span>],
            <span class="key">sizeToScene</span>: <span class="predefined-constant">true</span>, <span class="key">centerOnScreen</span>: <span class="predefined-constant">true</span>) {                                         <i class="conum" data-value="2"></i><b>(2)</b>
            scene(<span class="key">fill</span>: WHITE, <span class="key">width</span>: <span class="integer">400</span>, <span class="key">height</span>: <span class="integer">120</span>) {
                anchorPane {
                    label(<span class="key">leftAnchor</span>: <span class="integer">14</span>, <span class="key">topAnchor</span>: <span class="integer">11</span>,
                          <span class="key">text</span>: application.messageSource.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">name.label</span><span class="delimiter">'</span></span>))
                    textField(<span class="key">leftAnchor</span>: <span class="integer">172</span>, <span class="key">topAnchor</span>: <span class="integer">11</span>, <span class="key">prefWidth</span>: <span class="integer">200</span>,
                              <span class="key">text</span>: bind(model.inputProperty()))                               <i class="conum" data-value="3"></i><b>(3)</b>
                    button(<span class="key">leftAnchor</span>: <span class="integer">172</span>, <span class="key">topAnchor</span>: <span class="integer">45</span>, <span class="key">prefWidth</span>: <span class="integer">200</span>,
                           sayHelloAction)                                                     <i class="conum" data-value="4"></i><b>(4)</b>
                    label(<span class="key">leftAnchor</span>: <span class="integer">14</span>, <span class="key">topAnchor</span>: <span class="integer">80</span>, <span class="key">prefWidth</span>: <span class="integer">200</span>,
                        <span class="key">text</span>: bind(model.outputProperty()))                                    <i class="conum" data-value="3"></i><b>(3)</b>
                }
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create window and attach it to <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Apply component-to-model binding</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Hook actions by convention</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Groovy version of the View uses the GroovyFX DSL instead of FXML. You&#8217;ll find that
this DSL is very similar to SwingBuilder.</p>
</div>
</div>
<div class="sect3">
<h4 id="_resources_3"><a class="anchor" href="#_resources_3"></a>1.2.5. Resources</h4>
<div class="paragraph">
<p>Finally the resources for this application are identical to the Swing version.</p>
</div>
<div class="listingblock">
<div class="title">sample-javafx-java/griffon-app/i18n/messages.properties</div>
<div class="content">
<pre class="CodeRay"><code>name.label = Please enter your name
greeting.default = Howdy stranger!
greeting.parameterized = Hello {0}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_lanterna_2"><a class="anchor" href="#_lanterna_2"></a>1.3. Lanterna</h3>
<div class="paragraph">
<p><a href="http://code.google.com/p/lanterna/">Lanterna</a> is a Java library allowing you to write
easy semi-graphical user interfaces in a text-only environment, very similar to the
C library curses but with more functionality. Lanterna supports xterm compatible terminals
and terminal emulators such as konsole, gnome-terminal, putty, xterm and many more.
One of the main benefits of lanterna is that it&#8217;s not dependent on any native library
but runs 100% in pure Java.</p>
</div>
<div class="sect3">
<h4 id="_model_4"><a class="anchor" href="#_model_4"></a>1.3.1. Model</h4>
<div class="paragraph">
<p>Even though Lanterna UI components do not expose observable properties in any way
it&#8217;s a good thing to use observable properties in the Model, and so the following
Model is identical to the <a href="#_swing">Swing</a> version.</p>
</div>
<div class="listingblock">
<div class="title">sample-lanterna-java/griffon-app/models/sample/lanterna/java/SampleModel.java</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">sample.lanterna.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.GriffonApplication</span>;
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonModel</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonModel</span>;

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>;
<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonModel.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleModel</span> <span class="directive">extends</span> AbstractGriffonModel {
    <span class="directive">private</span> <span class="predefined-type">String</span> input;                                                <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">private</span> <span class="predefined-type">String</span> output;                                               <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">public</span> <span class="predefined-type">SampleModel</span>(<span class="annotation">@Nonnull</span> GriffonApplication application) {
        <span class="local-variable">super</span>(application);
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getInput() {                                           <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">return</span> input;
    }

    <span class="directive">public</span> <span class="type">void</span> setInput(<span class="predefined-type">String</span> input) {
        firePropertyChange(<span class="string"><span class="delimiter">&quot;</span><span class="content">input</span><span class="delimiter">&quot;</span></span>, <span class="local-variable">this</span>.input, <span class="local-variable">this</span>.input = input);     <i class="conum" data-value="3"></i><b>(3)</b>
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getOutput() {                                          <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">return</span> output;
    }

    <span class="directive">public</span> <span class="type">void</span> setOutput(<span class="predefined-type">String</span> output) {
        firePropertyChange(<span class="string"><span class="delimiter">&quot;</span><span class="content">output</span><span class="delimiter">&quot;</span></span>, <span class="local-variable">this</span>.output, <span class="local-variable">this</span>.output = output); <i class="conum" data-value="3"></i><b>(3)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Define a private field for the property</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Property accessor</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Property mutator must fire a <code>PropertyChangeEvent</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For reasons we&#8217;ll see in the Groovy View and Controller we decided to skip a Model
for the Groovy version. This also demonstrates that even though and MVC group is the
smallest building block you can still configure how it&#8217;s assembled. Have a look at
the application&#8217;s configuration to find out how</p>
</div>
<div class="listingblock">
<div class="title">sample-lanterna-groovy/griffon-app/conf/sample/lanterna/groovy/Config.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> sample.lanterna.groovy

application {
    title = <span class="string"><span class="delimiter">'</span><span class="content">Lanterna + Groovy</span><span class="delimiter">'</span></span>
    startupGroups = [<span class="string"><span class="delimiter">'</span><span class="content">sample</span><span class="delimiter">'</span></span>]
    autoShutdown = <span class="predefined-constant">true</span>
}
mvcGroups {
    <span class="comment">// MVC Group for &quot;sample&quot;</span>
    <span class="string"><span class="delimiter">'</span><span class="content">sample</span><span class="delimiter">'</span></span> {
        view       = <span class="string"><span class="delimiter">'</span><span class="content">sample.lanterna.groovy.SampleView</span><span class="delimiter">'</span></span>
        controller = <span class="string"><span class="delimiter">'</span><span class="content">sample.lanterna.groovy.SampleController</span><span class="delimiter">'</span></span>
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_controller_4"><a class="anchor" href="#_controller_4"></a>1.3.2. Controller</h4>
<div class="paragraph">
<p>We find that for the Java version the Controler it&#8217;s identical to the <a href="#_swing">Swing</a>
and <a href="#_javafx">JavaFX</a> versions. For the Groovy one we notice that both <code>input</code>
and <code>output</code> view components are accessed directly. We know we&#8217;ve said in the past
that a Controller should never do this but because Lanterna exposes no bind mechanism
the Groovy binding implementation would look as verbose as the Java version; we
decided to take a shortcut for demonstrations purposes.</p>
</div>
<div class="listingblock">
<div class="title">sample-lanterna-java/griffon-app/controllers/sample/lanterna/java/SampleController.java</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">sample.lanterna.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.GriffonApplication</span>;
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonController</span>;

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>;
<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonController.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleController</span> <span class="directive">extends</span> AbstractGriffonController {
    <span class="directive">private</span> <span class="predefined-type">SampleModel</span> model;                                             <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">private</span> SampleService sampleService;                                   <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">public</span> SampleController(<span class="annotation">@Nonnull</span> GriffonApplication application) {
        <span class="local-variable">super</span>(application);
    }

    <span class="directive">public</span> <span class="type">void</span> setModel(<span class="predefined-type">SampleModel</span> model) {
        <span class="local-variable">this</span>.model = model;
    }

    <span class="directive">public</span> <span class="type">void</span> sayHello() {                                               <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="directive">final</span> <span class="predefined-type">String</span> result = sampleService.sayHello(model.getInput());
        runInsideUIAsync(<span class="keyword">new</span> <span class="predefined-type">Runnable</span>() {                                  <i class="conum" data-value="4"></i><b>(4)</b>
            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> run() {
                model.setOutput(result);
            }
        });
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Injected by JSR 330</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Automatically run off the UI thread</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Get back inside the UI thread</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">sample-lanterna-groovy/griffon-app/controllers/sample/lanterna/groovy/SampleController.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> sample.lanterna.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonController)
<span class="type">class</span> <span class="class">SampleController</span> {
    FactoryBuilderSupport builder                                          <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">private</span> SampleService sampleService                                    <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="type">void</span> sayHello() {                                                      <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="predefined-type">String</span> result = sampleService.sayHello(builder.input.text)
        runInsideUIAsync {                                                 <i class="conum" data-value="4"></i><b>(4)</b>
            builder.output.text = result
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Injected by JSR 330</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Automatically run off the UI thread</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Get back inside the UI thread</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_service_3"><a class="anchor" href="#_service_3"></a>1.3.3. Service</h4>
<div class="paragraph">
<p>Again, services should not be affected by the choice of UI tookit so the following
Service definitions are identical to the previous ones be saw earlier.</p>
</div>
<div class="listingblock">
<div class="title">sample-lanterna-java/griffon-app/services/sample/lanterna/java/SampleService.java</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">sample.lanterna.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.GriffonApplication</span>;
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonService</span>;
<span class="keyword">import</span> <span class="include">griffon.core.i18n.MessageSource</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonService</span>;

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>;
<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.util.GriffonNameUtils.isBlank</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">java.util.Arrays.asList</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonService.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleService</span> <span class="directive">extends</span> AbstractGriffonService {
    <span class="annotation">@Inject</span>
    <span class="directive">public</span> SampleService(<span class="annotation">@Nonnull</span> GriffonApplication application) {
        <span class="local-variable">super</span>(application);
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> sayHello(<span class="predefined-type">String</span> input) {
        MessageSource messageSource = getApplication().getMessageSource();
        <span class="keyword">if</span> (isBlank(input)) {
            <span class="keyword">return</span> messageSource.getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting.default</span><span class="delimiter">&quot;</span></span>);
        } <span class="keyword">else</span> {
            <span class="keyword">return</span> messageSource.getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting.parameterized</span><span class="delimiter">&quot;</span></span>, asList(input));
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">sample-lanterna-groovy/griffon-app/services/sample/lanterna/groovy/SampleService.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> sample.lanterna.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonService</span>
<span class="keyword">import</span> <span class="include">griffon.core.i18n.MessageSource</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.util.GriffonNameUtils.isBlank</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonService)
<span class="type">class</span> <span class="class">SampleService</span> {
    <span class="predefined-type">String</span> sayHello(<span class="predefined-type">String</span> input) {
        MessageSource ms = application.messageSource
        isBlank(input) ? ms.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">greeting.default</span><span class="delimiter">'</span></span>) : ms.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">greeting.parameterized</span><span class="delimiter">'</span></span>, [input])
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_view_4"><a class="anchor" href="#_view_4"></a>1.3.4. View</h4>
<div class="paragraph">
<p>We&#8217;d expect the View to follow the same pattern we&#8217;ve seen in the previous examples,
that is, create two components that will be bound to model properties and a button
that&#8217;s connected to a Controller action. Here we see that the Java version is rather
verbose due to the fact that Lanterna has no observable UI components. This is the
reason for which we must explicitly mode the value of the <code>input</code> component into
the <code>input</code> Model property as soon as the button is clicked.</p>
</div>
<div class="listingblock">
<div class="title">sample-lanterna-java/griffon-app/views/sample/lanterna/java/SampleView.java</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">sample.lanterna.java</span>;

<span class="keyword">import</span> <span class="include">com.googlecode.lanterna.gui.Window</span>;
<span class="keyword">import</span> <span class="include">com.googlecode.lanterna.gui.component.Label</span>;
<span class="keyword">import</span> <span class="include">com.googlecode.lanterna.gui.component.Panel</span>;
<span class="keyword">import</span> <span class="include">com.googlecode.lanterna.gui.component.TextBox</span>;
<span class="keyword">import</span> <span class="include">griffon.core.GriffonApplication</span>;
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>;
<span class="keyword">import</span> <span class="include">griffon.lanterna.support.LanternaAction</span>;
<span class="keyword">import</span> <span class="include">griffon.lanterna.widgets.MutableButton</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonView</span>;

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>;
<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;
<span class="keyword">import</span> <span class="include">java.beans.PropertyChangeEvent</span>;
<span class="keyword">import</span> <span class="include">java.beans.PropertyChangeListener</span>;
<span class="keyword">import</span> <span class="include">java.util.Collections</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonView.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleView</span> <span class="directive">extends</span> AbstractGriffonView {
    <span class="directive">private</span> SampleController controller;                                         <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">private</span> <span class="predefined-type">SampleModel</span> model;                                                   <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">public</span> SampleView(<span class="annotation">@Nonnull</span> GriffonApplication application) {
        <span class="local-variable">super</span>(application);
    }

    <span class="directive">public</span> <span class="type">void</span> setController(SampleController controller) {
        <span class="local-variable">this</span>.controller = controller;
    }

    <span class="directive">public</span> <span class="type">void</span> setModel(<span class="predefined-type">SampleModel</span> model) {
        <span class="local-variable">this</span>.model = model;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> initUI() {
        <span class="predefined-type">Window</span> window = (<span class="predefined-type">Window</span>) getApplication()
            .createApplicationContainer(<span class="predefined-type">Collections</span>.&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt;emptyMap());
        getApplication().getWindowManager().attach(<span class="string"><span class="delimiter">&quot;</span><span class="content">mainWindow</span><span class="delimiter">&quot;</span></span>, window);        <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="predefined-type">Panel</span> panel = <span class="keyword">new</span> <span class="predefined-type">Panel</span>(<span class="predefined-type">Panel</span>.Orientation.VERTICAL);

        panel.addComponent(<span class="keyword">new</span> <span class="predefined-type">Label</span>(getApplication().getMessageSource().getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">name.label</span><span class="delimiter">&quot;</span></span>)));

        <span class="directive">final</span> TextBox input = <span class="keyword">new</span> TextBox();
        panel.addComponent(input);

        LanternaAction sayHelloAction = (LanternaAction) getApplication().getActionManager()
            .actionFor(controller, <span class="string"><span class="delimiter">&quot;</span><span class="content">sayHello</span><span class="delimiter">&quot;</span></span>)
            .getToolkitAction();
        <span class="directive">final</span> <span class="predefined-type">Runnable</span> runnable = sayHelloAction.getRunnable();
        sayHelloAction.setRunnable(<span class="keyword">new</span> <span class="predefined-type">Runnable</span>() {                              <i class="conum" data-value="3"></i><b>(3)</b>
            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> run() {
                model.setInput(input.getText());
                runnable.run();
            }
        });
        panel.addComponent(<span class="keyword">new</span> MutableButton(sayHelloAction));                   <i class="conum" data-value="4"></i><b>(4)</b>

        <span class="directive">final</span> <span class="predefined-type">Label</span> output = <span class="keyword">new</span> <span class="predefined-type">Label</span>();
        panel.addComponent(output);
        model.addPropertyChangeListener(<span class="string"><span class="delimiter">&quot;</span><span class="content">output</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> <span class="predefined-type">PropertyChangeListener</span>() { <i class="conum" data-value="3"></i><b>(3)</b>
            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> propertyChange(<span class="predefined-type">PropertyChangeEvent</span> evt) {
                output.setText(<span class="predefined-type">String</span>.valueOf(evt.getNewValue()));
            }
        });

        window.addComponent(panel);
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create window and attach it to <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Apply component-to-model binding</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Hook actions by convention</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Fortunately we can rely on the observable <code>output</code> Model property to write back the
value to the <code>output</code> component as soon as said property gets updated.</p>
</div>
<div class="listingblock">
<div class="title">sample-lanterna-groovy/griffon-app/views/sample/lanterna/groovy/SampleView.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> sample.lanterna.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonView)
<span class="type">class</span> <span class="class">SampleView</span> {
    FactoryBuilderSupport builder                                                              <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="type">void</span> initUI() {
        builder.with {
            application(<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">mainWindow</span><span class="delimiter">'</span></span>) {                                                    <i class="conum" data-value="2"></i><b>(2)</b>
                verticalLayout()
                label(application.messageSource.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">name.label</span><span class="delimiter">'</span></span>))
                textBox(<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">input</span><span class="delimiter">'</span></span>)
                button(sayHelloAction)                                                         <i class="conum" data-value="3"></i><b>(3)</b>
                label(<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">output</span><span class="delimiter">'</span></span>)
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create window and attach it to <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Hook actions by convention</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Here we can certify there&#8217;s no binding code in the View, hence why the Controller has
to access UI components directly.</p>
</div>
</div>
<div class="sect3">
<h4 id="_resources_4"><a class="anchor" href="#_resources_4"></a>1.3.5. Resources</h4>
<div class="paragraph">
<p>The resources file is identical to the ones found in the other applications. There&#8217;s
in fact no changes brought by the choice of UI toolkit here.</p>
</div>
<div class="listingblock">
<div class="title">sample-lanterna-java/griffon-app/i18n/messages.properties</div>
<div class="content">
<pre class="CodeRay"><code>name.label = Please enter your name
greeting.default = Howdy stranger!
greeting.parameterized = Hello {0}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pivot_2"><a class="anchor" href="#_pivot_2"></a>1.4. Pivot</h3>
<div class="paragraph">
<p><a href="http://pivot.apache.org">Apache Pivot</a> is an open-source platform for building installable
Internet applications (IIAs). It combines the enhanced productivity and usability features
of a modern user interface toolkit with the robustness of the Java platform.</p>
</div>
<div class="paragraph">
<p>We decided to implement this application in the same fashion as the <a href="#_lanterna">Lanterna</a>
application because of the same reason: Pivot UI components are not observable. You&#8217;ll
notice that the Java Model is identical and there&#8217;s no Groovy Model</p>
</div>
<div class="sect3">
<h4 id="_model_5"><a class="anchor" href="#_model_5"></a>1.4.1. Model</h4>
<div class="listingblock">
<div class="title">sample-pivot-java/griffon-app/models/sample/pivot/java/SampleModel.java</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">sample.pivot.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.GriffonApplication</span>;
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonModel</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonModel</span>;

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>;
<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonModel.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleModel</span> <span class="directive">extends</span> AbstractGriffonModel {
    <span class="directive">private</span> <span class="predefined-type">String</span> input;                                                <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">private</span> <span class="predefined-type">String</span> output;                                               <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">public</span> <span class="predefined-type">SampleModel</span>(<span class="annotation">@Nonnull</span> GriffonApplication application) {
        <span class="local-variable">super</span>(application);
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getInput() {                                           <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">return</span> input;
    }

    <span class="directive">public</span> <span class="type">void</span> setInput(<span class="predefined-type">String</span> input) {
        firePropertyChange(<span class="string"><span class="delimiter">&quot;</span><span class="content">input</span><span class="delimiter">&quot;</span></span>, <span class="local-variable">this</span>.input, <span class="local-variable">this</span>.input = input);     <i class="conum" data-value="3"></i><b>(3)</b>
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getOutput() {                                          <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">return</span> output;
    }

    <span class="directive">public</span> <span class="type">void</span> setOutput(<span class="predefined-type">String</span> output) {
        firePropertyChange(<span class="string"><span class="delimiter">&quot;</span><span class="content">output</span><span class="delimiter">&quot;</span></span>, <span class="local-variable">this</span>.output, <span class="local-variable">this</span>.output = output); <i class="conum" data-value="3"></i><b>(3)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Define a private field for the property</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Property accessor</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Property mutator must fire a <code>PropertyChangeEvent</code></td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_controller_5"><a class="anchor" href="#_controller_5"></a>1.4.2. Controller</h4>
<div class="paragraph">
<p>The Pivot Controllers follow the same rules than the Lanterna ones, and as such you&#8217;ll
see there are no differences between one another.</p>
</div>
<div class="listingblock">
<div class="title">sample-pivot-java/griffon-app/controllers/sample/pivot/java/SampleController.java</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">sample.pivot.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.GriffonApplication</span>;
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonController</span>;

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>;
<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonController.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleController</span> <span class="directive">extends</span> AbstractGriffonController {
    <span class="directive">private</span> <span class="predefined-type">SampleModel</span> model;                                             <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">private</span> SampleService sampleService;                                   <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">public</span> SampleController(<span class="annotation">@Nonnull</span> GriffonApplication application) {
        <span class="local-variable">super</span>(application);
    }

    <span class="directive">public</span> <span class="type">void</span> setModel(<span class="predefined-type">SampleModel</span> model) {
        <span class="local-variable">this</span>.model = model;
    }

    <span class="directive">public</span> <span class="type">void</span> sayHello() {                                               <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="directive">final</span> <span class="predefined-type">String</span> result = sampleService.sayHello(model.getInput());
        runInsideUIAsync(<span class="keyword">new</span> <span class="predefined-type">Runnable</span>() {                                  <i class="conum" data-value="4"></i><b>(4)</b>
            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> run() {
                model.setOutput(result);
            }
        });
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Injected by JSR 330</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Automatically run off the UI thread</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Get back inside the UI thread</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">sample-pivot-groovy/griffon-app/controllers/sample/pivot/groovy/SampleController.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> sample.pivot.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonController</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonController)
<span class="type">class</span> <span class="class">SampleController</span> {
    FactoryBuilderSupport builder                                          <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">private</span> SampleService sampleService                                    <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="type">void</span> sayHello() {                                                      <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="predefined-type">String</span> result = sampleService.sayHello(builder.input.text)
        runInsideUIAsync {                                                 <i class="conum" data-value="4"></i><b>(4)</b>
            builder.output.text = result
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Injected by JSR 330</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Automatically run off the UI thread</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Get back inside the UI thread</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_service_4"><a class="anchor" href="#_service_4"></a>1.4.3. Service</h4>
<div class="paragraph">
<p>Services remain constant again, what a surprise, right?</p>
</div>
<div class="listingblock">
<div class="title">sample-pivot-java/griffon-app/services/sample/pivot/java/SampleService.java</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">sample.pivot.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.GriffonApplication</span>;
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonService</span>;
<span class="keyword">import</span> <span class="include">griffon.core.i18n.MessageSource</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonService</span>;

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>;
<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.util.GriffonNameUtils.isBlank</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">java.util.Arrays.asList</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonService.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleService</span> <span class="directive">extends</span> AbstractGriffonService {
    <span class="annotation">@Inject</span>
    <span class="directive">public</span> SampleService(<span class="annotation">@Nonnull</span> GriffonApplication application) {
        <span class="local-variable">super</span>(application);
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> sayHello(<span class="predefined-type">String</span> input) {
        MessageSource messageSource = getApplication().getMessageSource();
        <span class="keyword">if</span> (isBlank(input)) {
            <span class="keyword">return</span> messageSource.getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting.default</span><span class="delimiter">&quot;</span></span>);
        } <span class="keyword">else</span> {
            <span class="keyword">return</span> messageSource.getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting.parameterized</span><span class="delimiter">&quot;</span></span>, asList(input));
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">sample-pivot-groovy/griffon-app/services/sample/pivot/groovy/SampleService.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> sample.pivot.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonService</span>
<span class="keyword">import</span> <span class="include">griffon.core.i18n.MessageSource</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="keyword">import</span> <span class="include">static</span> <span class="include">griffon.util.GriffonNameUtils.isBlank</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonService)
<span class="type">class</span> <span class="class">SampleService</span> {
    <span class="predefined-type">String</span> sayHello(<span class="predefined-type">String</span> input) {
        MessageSource ms = application.messageSource
        isBlank(input) ? ms.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">greeting.default</span><span class="delimiter">'</span></span>) : ms.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">greeting.parameterized</span><span class="delimiter">'</span></span>, [input])
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_view_5"><a class="anchor" href="#_view_5"></a>1.4.4. View</h4>
<div class="paragraph">
<p>If you squint your eyes you&#8217;ll see that the View is almost identical to the <a href="#_swing">Swing</a>
and <a href="#_lanterna">Lanterna</a> Views. Besides using toolkit specific components we notice
that both <code>input</code> and <code>output</code> Model properties have to be explicitly bound using
the native support exposed by the toolkit.</p>
</div>
<div class="listingblock">
<div class="title">sample-pivot-java/griffon-app/views/sample/pivot/java/SampleView.java</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="java language-java"><span class="keyword">package</span> <span class="namespace">sample.pivot.java</span>;

<span class="keyword">import</span> <span class="include">griffon.core.GriffonApplication</span>;
<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>;
<span class="keyword">import</span> <span class="include">griffon.core.controller.Action</span>;
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>;
<span class="keyword">import</span> <span class="include">griffon.pivot.support.PivotAction</span>;
<span class="keyword">import</span> <span class="include">griffon.pivot.support.adapters.TextInputContentAdapter</span>;
<span class="keyword">import</span> <span class="include">org.apache.pivot.serialization.SerializationException</span>;
<span class="keyword">import</span> <span class="include">org.apache.pivot.wtk</span>.*;
<span class="keyword">import</span> <span class="include">org.codehaus.griffon.runtime.core.artifact.AbstractGriffonView</span>;

<span class="keyword">import</span> <span class="include">javax.annotation.Nonnull</span>;
<span class="keyword">import</span> <span class="include">javax.inject.Inject</span>;
<span class="keyword">import</span> <span class="include">java.beans.PropertyChangeEvent</span>;
<span class="keyword">import</span> <span class="include">java.beans.PropertyChangeListener</span>;
<span class="keyword">import</span> <span class="include">java.util.Collections</span>;

<span class="annotation">@ArtifactProviderFor</span>(GriffonView.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SampleView</span> <span class="directive">extends</span> AbstractGriffonView {
    <span class="directive">private</span> SampleController controller;                                         <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">private</span> <span class="predefined-type">SampleModel</span> model;                                                   <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Inject</span>
    <span class="directive">public</span> SampleView(<span class="annotation">@Nonnull</span> GriffonApplication application) {
        <span class="local-variable">super</span>(application);
    }

    <span class="directive">public</span> <span class="type">void</span> setController(SampleController controller) {
        <span class="local-variable">this</span>.controller = controller;
    }

    <span class="directive">public</span> <span class="type">void</span> setModel(<span class="predefined-type">SampleModel</span> model) {
        <span class="local-variable">this</span>.model = model;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> initUI() {
        <span class="predefined-type">Window</span> window = (<span class="predefined-type">Window</span>) getApplication()
            .createApplicationContainer(<span class="predefined-type">Collections</span>.&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt;emptyMap());
        window.setTitle(getApplication().getConfiguration().getAsString(<span class="string"><span class="delimiter">&quot;</span><span class="content">application.title</span><span class="delimiter">&quot;</span></span>));
        window.setMaximized(<span class="predefined-constant">true</span>);
        getApplication().getWindowManager().attach(<span class="string"><span class="delimiter">&quot;</span><span class="content">mainWindow</span><span class="delimiter">&quot;</span></span>, window);        <i class="conum" data-value="2"></i><b>(2)</b>

        BoxPane vbox = <span class="keyword">new</span> BoxPane(Orientation.VERTICAL);
        <span class="keyword">try</span> {
            vbox.setStyles(<span class="string"><span class="delimiter">&quot;</span><span class="content">{horizontalAlignment:'center', verticalAlignment:'center'}</span><span class="delimiter">&quot;</span></span>);
        } <span class="keyword">catch</span> (SerializationException e) {
            <span class="comment">// ignore</span>
        }

        vbox.add(<span class="keyword">new</span> <span class="predefined-type">Label</span>(getApplication().getMessageSource().getMessage(<span class="string"><span class="delimiter">&quot;</span><span class="content">name.label</span><span class="delimiter">&quot;</span></span>)));

        TextInput input = <span class="keyword">new</span> TextInput();
        input.setName(<span class="string"><span class="delimiter">&quot;</span><span class="content">inputField</span><span class="delimiter">&quot;</span></span>);
        input.getTextInputContentListeners().add(<span class="keyword">new</span> TextInputContentAdapter() {  <i class="conum" data-value="3"></i><b>(3)</b>
            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> textChanged(TextInput arg0) {
                model.setInput(arg0.getText());
            }
        });
        vbox.add(input);

        <span class="predefined-type">Action</span> sayHelloAction = getApplication().getActionManager()
            .actionFor(controller, <span class="string"><span class="delimiter">&quot;</span><span class="content">sayHello</span><span class="delimiter">&quot;</span></span>);
        <span class="directive">final</span> <span class="predefined-type">Button</span> button = <span class="keyword">new</span> PushButton(sayHelloAction.getName());
        button.setName(<span class="string"><span class="delimiter">&quot;</span><span class="content">sayHelloButton</span><span class="delimiter">&quot;</span></span>);
        button.setAction((PivotAction) sayHelloAction.getToolkitAction());       <i class="conum" data-value="4"></i><b>(4)</b>
        vbox.add(button);

        <span class="directive">final</span> TextInput output = <span class="keyword">new</span> TextInput();
        output.setName(<span class="string"><span class="delimiter">&quot;</span><span class="content">outputField</span><span class="delimiter">&quot;</span></span>);
        output.setEditable(<span class="predefined-constant">false</span>);
        model.addPropertyChangeListener(<span class="string"><span class="delimiter">&quot;</span><span class="content">output</span><span class="delimiter">&quot;</span></span>, <span class="keyword">new</span> <span class="predefined-type">PropertyChangeListener</span>() { <i class="conum" data-value="3"></i><b>(3)</b>
            <span class="annotation">@Override</span>
            <span class="directive">public</span> <span class="type">void</span> propertyChange(<span class="predefined-type">PropertyChangeEvent</span> evt) {
                output.setText(<span class="predefined-type">String</span>.valueOf(evt.getNewValue()));
            }
        });
        vbox.add(output);

        window.setContent(vbox);
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create window and attach it to <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Apply component-to-model binding</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Hook actions by convention</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">sample-pivot-groovy/griffon-app/views/sample/pivot/groovy/SampleView.groovy</div>
<div class="content">
<pre class="CodeRay nowrap"><code class="groovy language-groovy"><span class="keyword">package</span> sample.pivot.groovy

<span class="keyword">import</span> <span class="include">griffon.core.artifact.GriffonView</span>
<span class="keyword">import</span> <span class="include">griffon.metadata.ArtifactProviderFor</span>

<span class="annotation">@ArtifactProviderFor</span>(GriffonView)
<span class="type">class</span> <span class="class">SampleView</span> {
    FactoryBuilderSupport builder                                                              <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="type">void</span> initUI() {
        builder.with {
            application(<span class="key">title</span>: application.configuration[<span class="string"><span class="delimiter">'</span><span class="content">application.title</span><span class="delimiter">'</span></span>],
                        <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">mainWindow</span><span class="delimiter">'</span></span>, <span class="key">maximized</span>: <span class="predefined-constant">true</span>) {                                   <i class="conum" data-value="2"></i><b>(2)</b>
                vbox(<span class="key">styles</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">{horizontalAlignment:'center', verticalAlignment:'center'}</span><span class="delimiter">&quot;</span></span>) {
                    label(application.messageSource.getMessage(<span class="string"><span class="delimiter">'</span><span class="content">name.label</span><span class="delimiter">'</span></span>))
                    textInput(<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">input</span><span class="delimiter">'</span></span>)
                    button(<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">sayHelloButton</span><span class="delimiter">'</span></span>, sayHelloAction)                               <i class="conum" data-value="3"></i><b>(3)</b>
                    textInput(<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">output</span><span class="delimiter">'</span></span>, <span class="key">editable</span>: <span class="predefined-constant">false</span>)
                }
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>MVC member injected by <code><a href="api/griffon/core/mvc/MVCGroupManager.html" target="_blank">MVCGroupManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create window and attach it to <code><a href="api/griffon/core/view/WindowManager.html" target="_blank">WindowManager</a></code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Hook actions by convention</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_resources_5"><a class="anchor" href="#_resources_5"></a>1.4.5. Resources</h4>
<div class="paragraph">
<p>The resource file, left untouched once more.</p>
</div>
<div class="listingblock">
<div class="title">sample-pivot-java/griffon-app/i18n/messages.properties</div>
<div class="content">
<pre class="CodeRay"><code>name.label = Please enter your name
greeting.default = Howdy stranger!
greeting.parameterized = Hello {0}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 2.0.0.BETA2<br>
Last updated 2014-06-08 14:00:44 CEST
</div>
</div>
</body>
</html>